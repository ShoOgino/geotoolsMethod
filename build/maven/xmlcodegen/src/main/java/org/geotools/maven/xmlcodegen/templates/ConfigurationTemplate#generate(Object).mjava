  public String generate(Object argument)
  {
    final StringBuffer stringBuffer = new StringBuffer();
     	
    Object[] arguments = (Object[])argument;
	XSDSchema schema = (XSDSchema)arguments[0];
	List components = (List)arguments[1];
	
	String namespace = schema.getTargetNamespace();
	String prefix = Schemas.getTargetPrefix( schema ).toUpperCase();
	
	List<XSDTypeDefinition> types = new ArrayList<>();
    List<XSDTypeDefinition> elements = new ArrayList<>();
    List<XSDAttributeDeclaration> attributes = new ArrayList<>();

      for (Object o : components) {
          XSDNamedComponent component = (XSDNamedComponent) o;
          if (component instanceof XSDTypeDefinition) {
              types.add((XSDTypeDefinition) component);
          } else if (component instanceof XSDTypeDefinition) {
              elements.add((XSDTypeDefinition) component);
          } else if (component instanceof XSDAttributeDeclaration) {
              attributes.add((XSDAttributeDeclaration) component);
          }
      }

    stringBuffer.append(TEXT_1);
    stringBuffer.append(namespace);
    stringBuffer.append(TEXT_2);
    stringBuffer.append(prefix);
    stringBuffer.append(TEXT_3);
    stringBuffer.append(prefix);
    stringBuffer.append(TEXT_4);
    stringBuffer.append(prefix);
    stringBuffer.append(TEXT_5);
    
    if (!types.isEmpty()) {

    stringBuffer.append(TEXT_6);

        for (XSDTypeDefinition type : types) {
            if (type.getName() == null) continue;

            String typeQName = prefix.toUpperCase() + "." + type.getName();
            String binding = type.getName().substring(0, 1).toUpperCase() +
                    type.getName().substring(1) + "Binding.class";

            stringBuffer.append(TEXT_7);
            stringBuffer.append(typeQName);
            stringBuffer.append(TEXT_8);
            stringBuffer.append(binding);
            stringBuffer.append(TEXT_9);

        }
    }

    stringBuffer.append(TEXT_10);
    
    if (!elements.isEmpty()) {

    stringBuffer.append(TEXT_11);

        for (XSDTypeDefinition element : elements) {
            XSDNamedComponent named = (XSDNamedComponent) element;
            if (named.getName() == null) continue;

            String nQName = prefix.toUpperCase() + "." + named.getName();
            String binding = named.getName().substring(0, 1).toUpperCase() +
                    named.getName().substring(1) + "Binding.class";

            stringBuffer.append(TEXT_12);
            stringBuffer.append(nQName);
            stringBuffer.append(TEXT_13);
            stringBuffer.append(binding);
            stringBuffer.append(TEXT_14);

        }
    }

    stringBuffer.append(TEXT_15);
    
    if (!attributes.isEmpty()) {

    stringBuffer.append(TEXT_16);

        for (XSDAttributeDeclaration attribute : attributes) {
            XSDNamedComponent named = (XSDNamedComponent) attribute;
            if (named.getName() == null) continue;

            String nQName = prefix.toUpperCase() + "." + named.getName();
            String binding = named.getName().substring(0, 1).toUpperCase() +
                    named.getName().substring(1) + "Binding.class";

            stringBuffer.append(TEXT_17);
            stringBuffer.append(nQName);
            stringBuffer.append(TEXT_18);
            stringBuffer.append(binding);
            stringBuffer.append(TEXT_19);

        }
    }

    stringBuffer.append(TEXT_20);
    return stringBuffer.toString();
  }

