    YamlMap encode(String dirname, String filename) throws Exception {
        SLDParser sldParser = new SLDParser(CommonFactoryFinder.getStyleFactory());
        sldParser.setInput(YsldTests.sld(dirname, filename));

        StyledLayerDescriptor sld = sldParser.parseSLD();

        StringWriter w = new StringWriter();
        YsldEncoder ysldEncoder = new YsldEncoder(w);
        ysldEncoder.encode(sld);

        //System.out.println(w.toString());
        return new YamlMap(new Yaml().load(new StringReader(w.toString())));
    }

