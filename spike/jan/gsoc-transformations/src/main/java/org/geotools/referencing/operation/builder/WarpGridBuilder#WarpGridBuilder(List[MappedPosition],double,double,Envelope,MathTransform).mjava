	/**
	 * Constructs Builder with proper worldToGrid math transform with integer
	 * values for generated grid. This constructor is useful for calculating
	 * transformation for image in image coordinate system.
	 * 
	 * @param vectors
	 *            Mapped positions ground control points
	 * @param dx
	 *            The horizontal spacing between grid cells.
	 * @param dy
	 *            The vertical spacing between grid cells.
	 * @param envelope
	 *            Envelope of generated grid.
	 * @throws MismatchedSizeException
	 * @throws MismatchedDimensionException
	 * @throws MismatchedReferenceSystemException
	 * @throws NoSuchIdentifierException
	 */
	public WarpGridBuilder(List<MappedPosition> vectors, double dx, double dy,
			Envelope envelope, MathTransform worldToGrid)
			throws MismatchedSizeException, MismatchedDimensionException,
			MismatchedReferenceSystemException, TransformException,
			NoSuchIdentifierException {

		this.worldToGrid = worldToGrid;
		this.envelope = envelope;
		this.gridParameters = GridParameters.createGridParameters(envelope, dx,
				dy, (AffineTransform2D) worldToGrid, true);
		super.setMappedPositions(vectors);
		localpositions = transformMPToGrid(vectors, worldToGrid);
	}

