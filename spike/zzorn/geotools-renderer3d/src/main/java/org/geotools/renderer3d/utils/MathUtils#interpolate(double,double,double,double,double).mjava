    /**
     * Calculates a linearily interpolated value, given a start value and position, an end value and position,
     * and the position to get the value at.
     * <p/>
     * First calculates the relative position, then does a normal linear interpolation between the start and end value,
     * using the relative position as the interpolation factor.
     *
     * @param position
     * @param startPosition
     * @param endPosition
     * @param startValue
     * @param endValue
     *
     * @return the interpolated value
     */
    public static double interpolate( final double position,
                                      final double startPosition,
                                      final double endPosition,
                                      final double startValue,
                                      final double endValue )
    {
        final double relativePosition = ( position - startPosition ) / ( endPosition - startPosition );
        return startValue + relativePosition * ( endValue - startValue );
    }

