    /**
     * Calculates a linearily interpolated value, given a start value and position, an end value and position,
     * and the position to get the value at.
     * <p/>
     * If the position is outside start or end position, it is treated as if it was at the start or end position respectively.
     * <p/>
     * First calculates the relative position, then does a normal linear interpolation between the start and end value,
     * using the relative position as the interpolation factor.
     *
     * @param position
     * @param startPosition
     * @param endPosition
     * @param startValue
     * @param endValue
     */
    public static double interpolateClamp( final double position,
                                           final double startPosition,
                                           final double endPosition,
                                           final double startValue,
                                           final double endValue )
    {
        // Clamp
        double p = position;
        if ( p < startPosition )
        {
            p = startPosition;
        }
        else if ( p > endPosition )
        {
            p = endPosition;
        }

        return interpolate( p, startPosition, endPosition, startValue, endValue );
    }

