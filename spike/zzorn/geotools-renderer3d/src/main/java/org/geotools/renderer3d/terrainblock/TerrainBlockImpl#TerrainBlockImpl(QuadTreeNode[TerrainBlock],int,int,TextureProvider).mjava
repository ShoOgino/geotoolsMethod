    /**
     * @param quadTreeNode
     * @param numberOfGridsPerSide number of grid cells along the side of the TerrainBlock.
     * @param textureSize
     * @param textureProvider
     */
    public TerrainBlockImpl( final QuadTreeNode<TerrainBlock> quadTreeNode,
                             final int numberOfGridsPerSide,
                             final int textureSize,
                             final TextureProvider textureProvider )
    {
        ParameterChecker.checkNotNull( quadTreeNode, "quadTreeNode" );
        ParameterChecker.checkPositiveNonZeroInteger( numberOfGridsPerSide, "numberOfGridsPerSide" );
        ParameterChecker.checkPositiveNonZeroInteger( textureSize, "textureSize" );
        ParameterChecker.checkNotNull( textureProvider, "textureProvider" );

        myQuadTreeNode = quadTreeNode;
        myNumberOfGridsPerSide = numberOfGridsPerSide;
        myTextureProvider = textureProvider;
        myTextureSize = textureSize;

        myTextureImage = allocateTextureImage( textureSize );

        updateDerivedData();

        myQuadTreeNode.addNodeListener( this );
    }

