    /**
     * Call this method once each frame, to allow the counter to compute the frames per second property.
     * <p/>
     * NOTE: Should be called from a single thread, or wrapped in a syncronized object.  If called from two different
     * threads, there could be frames with negative fps or secondsBetweenFrames.
     */
    public void onFrame()
    {
        // Get start time of current frame
        final long now_ns = System.nanoTime();

        synchronized ( mySyncLock )
        {
            // Only update the fps property if we have two values already, so the duration is valid.
            if ( myHasPreviousSample )
            {
                // Calculate the duration since the last frame
                long duration_ns = now_ns - myFrameStartTime_ns;

                // Avoid division by zero if the frame rate is very high
                if ( duration_ns == 0 )
                {
                    duration_ns = 1;
                }

                // Update the frames per second and time since last frame property
                mySecondsBetweenFrames = ( 1.0 * duration_ns ) / TICKS_PER_SECOND;
                myFramesPerSecond = TICKS_PER_SECOND / duration_ns;
            }
            else
            {
                // Now we have one sample already, so next time we can update the property
                myHasPreviousSample = true;
            }

            // Remember current frame start time
            myFrameStartTime_ns = now_ns;
        }
    }

