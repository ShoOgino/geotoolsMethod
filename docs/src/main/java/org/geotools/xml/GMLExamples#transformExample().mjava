    private void transformExample() throws Exception {
        // transformExample start
        SimpleFeatureType TYPE =
                DataUtilities.createType(
                        "urn:org.geotools.xml.examples", "location", "geom:Point,name:String");
        TYPE.getUserData().put("prefix", "ex");

        WKTReader2 wkt = new WKTReader2();
        List<SimpleFeature> collection = new LinkedList<>();
        collection.add(
                SimpleFeatureBuilder.build(
                        TYPE, new Object[] {wkt.read("POINT (1 2)"), "name1"}, null));
        collection.add(
                SimpleFeatureBuilder.build(
                        TYPE, new Object[] {wkt.read("POINT (4 4)"), "name2"}, null));

        SimpleFeatureCollection featureCollection = new ListFeatureCollection(TYPE, collection);

        FeatureTransformer transform = new FeatureTransformer();
        transform.setEncoding(Charset.defaultCharset());
        transform.setIndentation(4);
        transform.setGmlPrefixing(true);

        // define feature information
        final SimpleFeatureType schema = featureCollection.getSchema();
        String prefix = (String) schema.getUserData().get("prefix");
        String namespace = schema.getName().getNamespaceURI();
        transform.getFeatureTypeNamespaces().declareDefaultNamespace(prefix, namespace);
        transform.addSchemaLocation(prefix, namespace);

        String srsName = CRS.toSRS(schema.getCoordinateReferenceSystem());
        if (srsName != null) {
            transform.setSrsName(srsName);
        }

        // define feature collection
        transform.setCollectionPrefix("col");
        transform.setCollectionNamespace("urn:org.geotools.xml.example.collection");

        // other configuration
        transform.setCollectionBounding(true); // include bbox info

        ByteArrayOutputStream xml = new ByteArrayOutputStream();
        transform.transform(featureCollection, xml);
        xml.close();

        System.out.println(xml.toString());
        // transformExample end
    }

