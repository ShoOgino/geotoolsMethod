private void transformExample() throws Exception {
    SimpleFeatureCollection collection = null;
    
    Charset charset = null;
    String collectionPrefix = null;
    String collectionNamespace = null;
    OutputStream out = null;
    // transformExample start
    FeatureTransformer transform = new FeatureTransformer();
    transform.setEncoding(charset);
    transform.setIndentation(4);
    transform.setGmlPrefixing(true);
    
    // define feature information
    final SimpleFeatureType schema = collection.getSchema();
    String prefix = (String) schema.getUserData().get("prefix");
    String namespace = schema.getName().getNamespaceURI();
    transform.getFeatureTypeNamespaces().declareDefaultNamespace(prefix, namespace);
    transform.addSchemaLocation(prefix, namespace);
    
    String srsName = CRS.toSRS(schema.getCoordinateReferenceSystem());
    if (srsName != null) {
        transform.setSrsName(srsName);
    }
    
    // define feature collection
    transform.setCollectionPrefix(collectionPrefix);
    transform.setCollectionNamespace(collectionNamespace);
    
    // other configuration
    transform.setCollectionBounding(true); // include bbox info
    
    transform.transform(collection, out);
    // transformExample end
}

