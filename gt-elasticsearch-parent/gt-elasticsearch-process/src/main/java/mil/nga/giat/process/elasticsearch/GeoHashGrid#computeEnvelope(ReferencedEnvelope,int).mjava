    private static Envelope computeEnvelope(ReferencedEnvelope outEnvelope, int precision) throws NoSuchAuthorityCodeException, TransformException, FactoryException {
        final String minHash = GeoHash.encodeHash(Math.max(-90,outEnvelope.getMinY()), Math.max(-180, outEnvelope.getMinX()), precision);
        final String maxHash = GeoHash.encodeHash(Math.min(90, outEnvelope.getMaxY()), Math.min(180, outEnvelope.getMaxX()), precision);
        final LatLong minLatLon = GeoHash.decodeHash(minHash);
        final LatLong maxLatLon = GeoHash.decodeHash(maxHash);
        return new Envelope(minLatLon.getLon(), maxLatLon.getLon(), minLatLon.getLat(), maxLatLon.getLat());
    }

