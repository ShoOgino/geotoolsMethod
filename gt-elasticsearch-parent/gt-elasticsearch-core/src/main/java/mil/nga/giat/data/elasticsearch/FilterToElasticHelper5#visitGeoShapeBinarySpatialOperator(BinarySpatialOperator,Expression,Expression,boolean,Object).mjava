    @Override
    protected void visitGeoShapeBinarySpatialOperator(BinarySpatialOperator filter, Expression e1, Expression e2, 
            boolean swapped, Object extraData) {

        super.visitGeoShapeBinarySpatialOperator(filter, e1, e2, swapped, extraData);

        if (shapeRelation != null && shapeBuilder != null) {
            try {
                getDelegate().filterBuilder = QueryBuilders.geoShapeQuery(key, shapeBuilder).relation(shapeRelation);
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        } else {
            getDelegate().filterBuilder = QueryBuilders.matchAllQuery();
        }
    }

