    @Test
    public void testSearchResults() {
        when(hits[0].getId()).thenReturn("doc_id");
        when(hits[0].getIndex()).thenReturn("index_name");
        when(hits[0].getType()).thenReturn("type_name");
        when(hits[0].getScore()).thenReturn(0.8f);
        when(hits[0].getSource()).thenReturn(ImmutableMap.of("key","value"));
        SearchHitField mockField = mock(SearchHitField.class);
        when(mockField.getValues()).thenReturn(ImmutableList.of("value1","value2"));
        when(hits[0].field("a_field")).thenReturn(mockField);

        assertEquals(1, response.getResults().getHits().size());
        ElasticHit hit = response.getResults().getHits().get(0);
        assertEquals("doc_id", hit.getId());
        assertEquals("index_name", hit.getIndex());
        assertEquals("type_name", hit.getType());
        assertEquals(0.8, hit.getScore(), 1e-6);
        assertEquals(ImmutableMap.of("key","value"), hit.getSource());
        assertEquals(ImmutableList.of("value1","value2"), hit.field("a_field"));
        assertNull(hit.field("not_a_field"));
    }

