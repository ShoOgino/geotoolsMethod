    @Test
    public void compoundFilter() throws CQLException {
        Filter filter = ECQL.toFilter("time > \"1970-01-01\" and INTERSECTS(\"geom\", LINESTRING(0 0,1 1))");
        RangeFilterBuilder expected1 = FilterBuilders.rangeFilter("time").gt("1970-01-01");
        LineStringBuilder shape = ShapeBuilder.newLineString().point(0, 0).point(1,1);
        GeoShapeFilterBuilder expected2 = FilterBuilders.geoShapeFilter("geom", shape, ShapeRelation.INTERSECTS);
        AndFilterBuilder expected = FilterBuilders.andFilter(expected1, expected2);

        builder.encode(filter);
        assertTrue(builder.createFilterCapabilities().fullySupports(filter));
        assertTrue(builder.getFilterBuilder().toString().equals(expected.toString()));
    }

