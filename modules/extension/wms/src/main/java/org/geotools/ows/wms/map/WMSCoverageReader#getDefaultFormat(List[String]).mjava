    public String getDefaultFormat(List<String> formats) {

        // if preferred format is not supported default to first available
        for (String format : formats) {
            if ("image/png".equals(format)
                    || "image/png24".equals(format)
                    || "png".equals(format)
                    || "png24".equals(format)
                    || "image/png; mode=24bit".equals(format)) {
                return format;
            }
        }
        return null;
    }

