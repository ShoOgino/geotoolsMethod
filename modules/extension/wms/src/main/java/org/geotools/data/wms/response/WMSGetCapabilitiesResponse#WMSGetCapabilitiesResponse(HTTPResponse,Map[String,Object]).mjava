    public WMSGetCapabilitiesResponse(HTTPResponse response, Map<String, Object> hints) throws ServiceException, IOException {
        super(response);

        try {
            if(hints == null) {
                // default setup
                hints = new HashMap<>();
                hints.put(DocumentHandler.DEFAULT_NAMESPACE_HINT_KEY, WMSSchema.getInstance());
                hints.put(DocumentFactory.VALIDATION_HINT, Boolean.FALSE);
            }

            Object object;
            InputStream inputStream = null;
            try {
                inputStream = response.getResponseStream();
                object = DocumentFactory.getInstance(inputStream, hints, Level.WARNING);
            } catch (SAXException e) {
                throw (ServiceException) new ServiceException("Error while parsing XML.")
                        .initCause(e);
            } finally {
                IOUtils.closeQuietly(inputStream);
            }

            if (object instanceof ServiceException) {
                throw (ServiceException) object;
            }

            this.capabilities = (Capabilities) object;
        } finally {
            response.dispose();
        }
    }

