    /**
     * Utility method to return each layer that has a name. This method maintains no hierarchy at
     * all.
     *
     * @return An array of Layers, each value has a it's name property set or an empty array if
     *     there are none. It will return null if there is no capabilities document
     */
    public static Layer[] getNamedLayers(WMSCapabilities capabilities) {

        if (capabilities == null) {
            return null;
        }

        List<Layer> namedLayersList = new ArrayList<>();

        Layer[] layers =
                (Layer[])
                        capabilities
                                .getLayerList()
                                .toArray(new Layer[capabilities.getLayerList().size()]);

        for (int i = 0; i < layers.length; i++) {
            if ((layers[i].getName() != null) && (layers[i].getName().length() != 0)) {
                namedLayersList.add(layers[i]);
            }
        }

        Layer[] namedLayers = new Layer[namedLayersList.size()];
        for (int i = 0; i < namedLayersList.size(); i++) {
            namedLayers[i] = (Layer) namedLayersList.get(i);
        }

        return namedLayers;
    }

