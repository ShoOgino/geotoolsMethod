    @Override
    @Test
    public void testCreateGetMapRequest() throws Exception {
        try {
            WebMapServer wms = new WebMapServer(server);
            wms.getCapabilities();
            GetMapRequest request = wms.createGetMapRequest();
            request.setFormat("image/jpeg");
            // System.out.println(request.getFinalURL().toExternalForm());

            String externalForm = request.getFinalURL().toExternalForm();
            assertTrue(externalForm.indexOf("image%2Fjpeg") >= 0);
        } catch (java.net.ConnectException ce) {
            if (ce.getMessage().indexOf("timed out") > 0) {
                LOGGER.warning("Unable to test - timed out: " + ce);
            } else {
                throw (ce);
            }
        }
    }

