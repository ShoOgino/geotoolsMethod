    @Test
    public void testCreateGetLegendGraphicRequest() throws Exception {
        /* TODO FIX
                try{

                    WebMapServer wms = new CustomWMS(server);
                    GetLegendGraphicRequest request = wms.createGetLegendGraphicRequest();

                    assertNotNull(request);

                    Layer[] layers = WMSUtils.getNamedLayers(wms.getCapabilities());
                    SimpleLayer park = null;
                    for (int i = 0; i < layers.length; i++) {
                        if (layers[i].getName().equals("park")) {
                            park = new SimpleLayer(layers[i].getName(), "");
                            break;
                        }
                    }

                    assertNotNull(park);
                    request.setLayer(park);

                    request.setFormat("image/gif");

                    request.setWidth("50");
                    request.setHeight("50");

                    // System.out.println(request.getFinalURL());

                    GetLegendGraphicResponse response = (GetLegendGraphicResponse) wms.issueRequest(request);
                    assertNotNull(response);

                    assertEquals(response.getContentType(), "image/gif");

                    BufferedImage image = ImageIO.read(response.getInputStream());
                    assertEquals(image.getHeight(), 50);
                } catch(java.net.ConnectException ce){
                    if(ce.getMessage().indexOf("timed out")>0){
                        // System.err.println("Unable to test - timed out: "+ce);
                    } else{
                        throw(ce);
                    }
                }
        */
    }

