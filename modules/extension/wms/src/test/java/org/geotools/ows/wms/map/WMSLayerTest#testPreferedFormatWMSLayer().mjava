    /** Test method for {@link WMSLayer#WMSLayer(WebMapServer, Layer)}. */
    @Test
    public void testPreferedFormatWMSLayer() {
        Layer[] wmsLayers = WMSUtils.getNamedLayers(server.getCapabilities());

        WMSLayer l = new WMSLayer(server, wmsLayers[0], "", "image/jpg");
        // verify reader is using correct
        assertTrue(l.getReader().format.equalsIgnoreCase("image/jpg"));

        WMSLayer l2 = new WMSLayer(server, wmsLayers[0], "", "image/unknown");
        // verify backward compatability
        assertTrue(l2.getReader().format.equalsIgnoreCase("image/png"));
    }

