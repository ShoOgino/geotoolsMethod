    /** Verifies that the nonProxyConfig is used when a GET is executed, matching a nonProxyHost. */
    @Test
    public void testGetWithMatchingNonProxyHost() throws HttpException, IOException {
        System.setProperty(SYS_PROP_KEY_HOST, "myproxy");
        System.setProperty(SYS_PROP_KEY_NONPROXYHOSTS, "localhost");
        MultithreadedHttpClient sut = new MultithreadedHttpTestClient();
        when(mockHttpClient.executeMethod(isNull(), any(HttpMethod.class))).thenReturn(200);
        sut.get(new URL("http://localhost"));

        System.setProperty(SYS_PROP_KEY_NONPROXYHOSTS, "\"localhost|www.geotools.org\"");
        sut = new MultithreadedHttpTestClient();
        sut.get(new URL("http://localhost"));
        // HttpClient.executeMethod(HostConfig, HttpMethod) has to be called
        // (with HostConfig)
        verify(mockHttpClient, times(2)).executeMethod(any(), any(HttpMethod.class));
    }

