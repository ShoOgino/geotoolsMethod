    @Test
    public void testIssueGetFeatureInfoRequest() throws Exception {
        /* TODO fix this

        //        http://dev1.dmsolutions.ca/cgi-bin/mswms_gmap?LAYERS=DEMO&FORMAT=image/png&TRANSPARENT=TRUE&HEIGHT=213&REQUEST=GetMap&BBOX=-172.367,35.667300000000004,-11.562400000000014,83.8293&WIDTH=710&STYLES=&SRS=EPSG:4326&VERSION=1.1.1

                WebMapServer wms = new WebMapServer(featureURL);
                WMSCapabilities capabilities = wms.getCapabilities();

                assertNotNull(capabilities);

                GetMapRequest getMapRequest = wms.createGetMapRequest();

                List layers = Arrays.asList(WMSUtils.getNamedLayers(capabilities));
                List simpleLayers = new ArrayList();
                Iterator iter = layers.iterator();
                while (iter.hasNext()) {
                        Layer layer = (Layer) iter.next();
                        SimpleLayer sLayer = new SimpleLayer(layer.getName(), "");
                        simpleLayers.add(sLayer);
                        List styles = layer.getStyles();
                        if (styles.size() == 0) {
                                sLayer.setStyle("");
                                continue;
                        }
                        Random random = new Random();
                        int randomInt = random.nextInt(styles.size());
                        sLayer.setStyle((String) styles.get(randomInt));
                }
                getMapRequest.setLayers(simpleLayers);

                getMapRequest.setSRS("EPSG:4326");
                getMapRequest.setDimensions("400", "400");
                getMapRequest.setFormat("image/png");

                getMapRequest.setBBox("-114.01268,59.4596930,-113.26043,60.0835794");
                URL url2 = getMapRequest.getFinalURL();

                GetFeatureInfoRequest request = wms.createGetFeatureInfoRequest(getMapRequest);
                request.setQueryLayers(WMSUtils.getQueryableLayers(capabilities));
                request.setQueryPoint(200, 200);
                request.setInfoFormat("text/html");

                // System.out.println(request.getFinalURL());

                GetFeatureInfoResponse response = (GetFeatureInfoResponse) wms.issueRequest(request);
                // System.out.println(response.getContentType());
                assertTrue( response.getContentType().indexOf("text/html") != -1 );
                BufferedReader in = new BufferedReader(new InputStreamReader(response.getInputStream()));
                String line;

                boolean textFound = false;
                while ((line = in.readLine()) != null) {
                    // System.out.println(line);
                    if (line.indexOf("Wood Buffalo National Park") != -1) {
                        textFound = true;
                    }
                }
                assertTrue(textFound);
        */
    }

