    /**
     * Test splitting an array function into an array of functions -- one for each dimension in the
     * array. (Exponential function).
     */
    @Test
    public void testArrayFunction() throws Exception {
        JSONObject json =
                MapboxTestUtils.object(
                        "{'property':'temperature','type':'exponential', 'base':1.5, 'stops':[ [0,[0,5]], [100,[2,10]] ]}");
        MBFunction function = new MBFunction(json);

        SimpleFeatureType SAMPLE =
                DataUtilities.createType(
                        "SAMPLE",
                        "id:\"\",temperature:0.0,location=4326,color:java.awt.Color,text:String:");
        SimpleFeature feature1 =
                DataUtilities.createFeature(SAMPLE, "measure1=A|0|POINT(0,0)|#FF0000|red");
        SimpleFeature feature2 =
                DataUtilities.createFeature(SAMPLE, "measure1=A|100|POINT(0,0)|#FF0000|red");

        List<MBFunction> splitFunctions = function.splitArrayFunction();
        assertEquals(2, splitFunctions.size());

        MBFunction xFn = splitFunctions.get(0);
        MBFunction yFn = splitFunctions.get(1);

        assertEquals(0, xFn.numeric().evaluate(feature1, Integer.class).intValue());
        assertEquals(5, yFn.numeric().evaluate(feature1, Integer.class).intValue());

        assertEquals(2, xFn.numeric().evaluate(feature2, Integer.class).intValue());
        assertEquals(10, yFn.numeric().evaluate(feature2, Integer.class).intValue());
    }

