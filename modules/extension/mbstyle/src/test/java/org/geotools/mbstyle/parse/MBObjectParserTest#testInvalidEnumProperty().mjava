    /**
     * Test parsing from a Mapbox enumeration property to a GeoTools expression, when the JSON
     * property value is invalid for the enumeration (should fallback to default).
     */
    @Test
    public void testInvalidEnumProperty() throws ParseException {
        // Test for text-pitch-alignment
        JSONObject object = MapboxTestUtils.object("{'text-pitch-alignment': 'bad_value'}");
        Expression expression =
                parser.enumToExpression(
                        object,
                        "text-pitch-alignment",
                        SymbolMBLayer.Alignment.class,
                        SymbolMBLayer.Alignment.AUTO);
        assertEquals("auto", expression.evaluate(null, String.class));

        // Test for line-cap
        object = MapboxTestUtils.object("{'line-cap': 'bad_value'}");
        expression =
                parser.enumToExpression(
                        object, "line-cap", LineMBLayer.LineCap.class, LineMBLayer.LineCap.BUTT);
        assertEquals("butt", expression.evaluate(null, String.class));

        // Test for line-join
        object = MapboxTestUtils.object("{'line-join': 'bad_value'}");
        expression =
                parser.enumToExpression(
                        object,
                        "line-join",
                        LineMBLayer.LineJoin.class,
                        LineMBLayer.LineJoin.MITER);
        assertEquals("mitre", expression.evaluate(null, String.class));
    }

