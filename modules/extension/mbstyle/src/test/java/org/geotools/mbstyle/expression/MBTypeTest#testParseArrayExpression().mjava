    /** Verify that the "array" MBTypes expression can be parsed and evaluated correctly. */
    @Test
    public void testParseArrayExpression() {

        final JSONObject j = getObjectByLayerId("arrayExpression", "paint");
        JSONArray test = new JSONArray();

        @SuppressWarnings("unchecked")
        ArrayList<Object> array = (ArrayList<Object>) test;

        array.add(111L);
        array.add(222L);
        array.add(121L);

        Object arr = getExpressionEvaluation(j, "array");
        assertEquals(test, arr);

        Object nested = getExpressionEvaluation(j, "nest");
        assertEquals(test, nested);

        try {
            getExpressionEvaluation(j, "boolean");
            fail(
                    "expected exception function \"mbType\" fails if argument can't be converted to a color");
        } catch (IllegalArgumentException e) {
        }

        try {
            getExpressionEvaluation(j, "string");
            fail(
                    "expected exception function \"mbType\" fails if argument can't be converted to a color");
        } catch (IllegalArgumentException e) {
        }

        try {
            getExpressionEvaluation(j, "number");
            fail(
                    "expected exception function \"mbType\" fails if argument can't be converted to a color");
        } catch (IllegalArgumentException e) {
        }

        try {
            getExpressionEvaluation(j, "object");
            fail(
                    "expected exception function \"mbType\" fails if argument can't be converted to a color");
        } catch (IllegalArgumentException e) {
        }
    }

