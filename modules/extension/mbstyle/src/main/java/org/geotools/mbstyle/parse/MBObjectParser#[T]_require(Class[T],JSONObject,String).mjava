    /**
     * Retrieve an object of the provided type in the JSONObject at this tag, throwing an {@link
     * MBFormatException} if no object of that type is found at that tag in the object.
     *
     * @param <T> Class to return
     * @param type The type of the object to retrieve.
     * @param json The JSONObject in which to retrieve the object.
     * @param name The index in the JSONObject at which to retrieve the object.
     * @return The object of the required type in the JSONObject at the tag.
     */
    public <T> T require(Class<T> type, JSONObject json, String name) {
        if (json == null) {
            throw new IllegalArgumentException("json required");
        }
        if (name == null) {
            throw new IllegalArgumentException("name required for json object access");
        }
        if (json.containsKey(name) && type.isInstance(json.get(name))) {
            return type.cast(json.get(name));
        } else {
            throw new MBFormatException(
                    context.getSimpleName()
                            + " requires \""
                            + name
                            + "\" "
                            + type.getSimpleName()
                            + " field");
        }
    }

