    @Test
    public void testStream() throws Exception {
        StreamingParser parser =
                new StreamingParser(
                        new KMLConfiguration(),
                        getClass().getResourceAsStream("states.kml"),
                        KML.Placemark);
        int count = 0;
        SimpleFeature f = null;

        while ((f = (SimpleFeature) parser.parse()) != null) {
            FeatureTypeStyle style = (FeatureTypeStyle) f.getAttribute("Style");
            Assert.assertNotNull(style);

            Assert.assertEquals(3, style.rules().get(0).symbolizers().size());

            count++;
        }

        Assert.assertEquals(49, count);
    }

