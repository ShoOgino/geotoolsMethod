    /**
     * Test ensures no deadlock occurs when a remote schema is loaded, which resolves to the same
     * JVM. Deadlock used to occur in GeoServer, when schema was loaded from same GeoServer
     * instance, because schema consumer and schema server both synchronized on same {@link
     * org.geotools.xsd.Schemas} class instance.
     */
    public void testParseRemoteDoesNotBlock() throws IOException {
        URIConverter converter =
                new ExtensibleURIConverterImpl(
                        Collections.singletonList(new MockServerBehaviour()),
                        Collections.emptyList());
        ResourceSet resourceSet = new ResourceSetImpl();
        resourceSet.setURIConverter(converter);
        XSDSchema schema =
                Schemas.parse("http://www.foo.bar/remoteSchemaLocation.xsd", resourceSet);
        assertNotNull(schema);
    }

