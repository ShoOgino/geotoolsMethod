    /** Tests entity expansion limit configuration on Parser. */
    @Test
    public void testEntityExpansionLimitAllowed() throws Exception {
        final StringBuffer sb = new StringBuffer();
        XSD xsd =
                new XSD() {
                    @Override
                    public String getSchemaLocation() {
                        return ParserTest.class.getResource("mixed.xsd").getFile();
                    }

                    @Override
                    public String getNamespaceURI() {
                        return "http://geotools.org/test";
                    }
                };
        Configuration cfg =
                new Configuration(xsd) {
                    @Override
                    protected void registerBindings(Map bindings) {
                        bindings.put(
                                new QName("http://geotools.org/test", "MixedType"),
                                new MixedTypeBinding(sb));
                    }

                    @Override
                    protected void configureParser(Parser parser) {
                        parser.setHandleMixedContent(true);
                    }
                };

        Parser p = new Parser(cfg);
        p.setEntityExpansionLimit(100);
        SAXParseException unexpected = null;
        try {
            p.parse(getClass().getResourceAsStream("entityExpansionLimit.xml"));
        } catch (SAXParseException ex) {
            unexpected = ex;
        }
        assertNull(unexpected);
    }

