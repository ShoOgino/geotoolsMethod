    /**
     * Obtains all instances of a particular class from a container by navigating up the container
     * hierachy.
     *
     * @param container The container.
     * @param clazz The class.
     * @return A list of all instances of <code>clazz</code>, or the empty list if none found.
     */
    public static <T> List<T> getComponentInstancesOfType(PicoContainer container, Class<T> clazz) {
        List<T> instances = new ArrayList<>();

        while (container != null) {
            @SuppressWarnings("unchecked")
            List<T> l = container.getComponentInstancesOfType(clazz);
            instances.addAll(l);
            container = container.getParent();
        }

        return instances;
    }

