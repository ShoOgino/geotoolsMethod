    /**
     * Builds the schema from the .xsd file specified by {@link #getSchemaLocation()}
     *
     * <p>This method may be extended, but should not be overridden.
     */
    protected XSDSchema buildSchema() throws IOException {
        // grab all the dependencies and create schema locators from the build
        // schemas
        List<XSDSchemaLocator> locators = new ArrayList<>();
        List<XSDSchemaLocationResolver> resolvers = new ArrayList<>();

        for (Iterator d = allDependencies().iterator(); d.hasNext(); ) {
            XSD dependency = (XSD) d.next();
            SchemaLocator locator = dependency.createSchemaLocator();

            if (locator != null) {
                locators.add(locator);
            }

            SchemaLocationResolver resolver = dependency.createSchemaLocationResolver();

            if (resolver != null) {
                resolvers.add(resolver);
            }
        }

        XSDSchemaLocator suppSchemaLocator = getSupplementarySchemaLocator();

        if (suppSchemaLocator != null) {
            locators.add(suppSchemaLocator);
        }

        SchemaLocationResolver resolver = createSchemaLocationResolver();

        if (resolver != null) {
            resolvers.add(resolver);
        }

        // parse the location of the xsd with all the locators for dependent
        // schemas
        return Schemas.parse(getSchemaLocation(), locators, resolvers);
    }

