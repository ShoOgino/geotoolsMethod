    /**
     * Fetches the contents of the URI into a byte[].
     * 
     * @param uri
     * @param options
     * @param response
     * @return The resource data
     * @throws IOException
     */
    private static byte[] readUriResource(URI uri, ResourceSet resourceSet, Map<?, ?> response)
            throws IOException {
        Map<Object, Object> options = resourceSet.getLoadOptions();
        URIConverter uriConverter = getUriConverter(resourceSet);

        Map<Object, Object> loadMap = new HashMap<>(options);
        loadMap.put(URIConverter.OPTION_RESPONSE, response);

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        try (InputStream inputStream = uriConverter.createInputStream(uri, loadMap)) {
            IOUtils.copy(inputStream, out);
        }
        return out.toByteArray();
    }

