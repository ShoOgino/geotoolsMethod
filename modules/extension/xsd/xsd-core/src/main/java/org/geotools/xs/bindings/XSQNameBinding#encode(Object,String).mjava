    @Override
    public String encode(Object object, String value) throws Exception {
        try {
            return DatatypeConverterImpl.getInstance().printQName((QName) object, namespaceContext);
        } catch (Exception e) {
            // will happen if a prefix is not in the context, serialize manually
            QName qName = (QName) object;
            if (qName.getPrefix() == null || qName.getPrefix().equals("")) {
                return qName.getLocalPart();
            }

            return qName.getPrefix() + ":" + qName.getLocalPart();
        }
    }

