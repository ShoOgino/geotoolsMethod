    protected List<XSD> allDependencies() {
        LinkedList<XSD> unpacked = new LinkedList<>();

        Stack<XSD> stack = new Stack<>();
        stack.addAll(getDependencies());

        while (!stack.isEmpty()) {
            XSD xsd = (XSD) stack.pop();

            if (!equals(xsd) && !unpacked.contains(xsd)) {
                unpacked.addFirst(xsd);
                stack.addAll(xsd.getDependencies());
            }
        }

        return unpacked;
    }

