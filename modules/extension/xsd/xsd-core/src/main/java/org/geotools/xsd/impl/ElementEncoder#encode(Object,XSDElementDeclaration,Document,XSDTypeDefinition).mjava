    /**
     * Encodes a value corresponding to an element in a schema.
     *
     * @param value The value to encode.
     * @param element The declaration of the element corresponding to the value.
     * @param document The document used to create the encoded element.
     * @return The encoded value as an element.
     */
    public Element encode(
            Object value,
            XSDElementDeclaration element,
            Document document,
            XSDTypeDefinition container) {
        ElementEncodeExecutor executor =
                new ElementEncodeExecutor(
                        value,
                        element,
                        document,
                        logger,
                        (NamespaceSupport)
                                context.getComponentInstanceOfType(NamespaceSupport.class));
        BindingVisitorDispatch.walk(value, bindingWalker, element, executor, container, context);
        return executor.getEncodedElement();
    }

