    public Object getComponentInstanceOfType(Class componentType) {
        if (componentType == null) {
            return Collections.emptyList();
        }

        // first look for instance
        for (Object value : entrySet()) {
            Entry entry = (Entry) value;

            if (entry.getValue() instanceof Class) {
                continue;
            }

            if (componentType.isInstance(entry.getValue())) {
                return entry.getValue();
            }
        }

        for (Object o : entrySet()) {
            Entry entry = (Entry) o;

            if (entry.getValue() instanceof Class) {
                Class clazz = (Class) entry.getValue();
                if (componentType.isAssignableFrom(clazz)) {
                    return getComponentInstance(entry.getKey());
                }
            }
        }

        return null;
    }

