    private void mapBinding(Map<String, Object> map, List attributes) {
        for (Iterator i = attributes.iterator(); i.hasNext(); ) {
            Node attribute = (Node) i.next();
            String name = attribute.getComponent().getName();
            Object value = attribute.getValue();

            if (map.containsKey(name)) {
                List<Object> values;
                Object obj = map.get(name);

                if (obj instanceof List) {
                    @SuppressWarnings("unchecked")
                    List<Object> cast = (List<Object>) obj;
                    values = cast;
                } else {
                    values = new ArrayList<>();
                    values.add(obj);
                    map.put(name, values);
                }

                values.add(value);
            } else {
                map.put(name, value);
            }
        }
    }

