    /**
     * Resolves <param>location<param> to a physical location.
     * <p>
     * Resolution is performed by stripping the filename off of <param>location</param>
     * and looking up a resource located in the same package as the xsd.
     * </p>
     */
    public String resolveSchemaLocation(XSDSchema schema, String uri, String location) {
        if (location == null) {
            return null;
        }

        //if no namespace given, assume default for the current schema
        if (((uri == null) || "".equals(uri)) && (schema != null)) {
            uri = schema.getTargetNamespace();
        }

        //namespace match?
        if (canHandle(schema, uri, location)) {
            return resolveLocationToResource( location ).toString();
        }

        return null;
    }

