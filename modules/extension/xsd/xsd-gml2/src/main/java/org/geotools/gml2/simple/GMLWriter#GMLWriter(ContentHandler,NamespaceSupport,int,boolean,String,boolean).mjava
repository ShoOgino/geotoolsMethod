    /**
     * Create a new content handler
     *
     * @param delegate The actual XML writer
     * @param namespaces The namespaces known to the Encoder
     * @param numDecimals How many decimals to preserve when writing ordinates
     * @param forceDecimal If xs:decimal compliant encoding should be used, or not
     * @param gmlPrefix The GML namespace prefix
     * @param encodeMeasures TRUE if coordinates measures should be included
     */
    public GMLWriter(
            ContentHandler delegate,
            NamespaceSupport namespaces,
            int numDecimals,
            boolean forceDecimal,
            String gmlPrefix,
            boolean encodeMeasures) {
        this.handler = delegate;
        this.namespaces = namespaces;

        String gmlUri = namespaces.getURI(gmlPrefix);
        if (gmlUri == null) {
            gmlUri = GML.NAMESPACE;
        }

        this.coordinates = COORDINATES.derive(gmlPrefix, gmlUri);
        this.posList = POS_LIST.derive(gmlPrefix, gmlUri);

        this.coordFormatter = new CoordinateFormatter(numDecimals);
        this.coordFormatter.setForcedDecimal(forceDecimal);

        this.encodeMeasures = encodeMeasures;
    }

