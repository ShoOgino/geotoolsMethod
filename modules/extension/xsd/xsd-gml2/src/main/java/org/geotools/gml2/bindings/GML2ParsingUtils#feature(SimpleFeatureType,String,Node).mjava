    public static SimpleFeature feature(SimpleFeatureType fType, String fid, Node node)
            throws Exception {
        SimpleFeatureBuilder b = new SimpleFeatureBuilder(fType);

        int attributeCount = fType.getAttributeCount();
        for (int i = 0; i < attributeCount; i++) {
            AttributeDescriptor att = fType.getDescriptor(i);
            AttributeType attType = att.getType();
            Object attValue = node.getChildValue(att.getLocalName());

            if ((attValue != null) && !attType.getBinding().isAssignableFrom(attValue.getClass())) {
                // type mismatch, to try convert
                Object converted = Converters.convert(attValue, attType.getBinding());

                if (converted != null) {
                    attValue = converted;
                }
            }

            b.add(attValue);
        }

        // create the feature
        return b.buildFeature(fid);
    }

