    @Override
    public void encode(Polygon geometry, AttributesImpl atts, GMLWriter handler, String gmlId)
            throws Exception {
        atts = cloneWithGmlId(atts, gmlId);
        handler.startElement(polygon, atts);

        handler.startElement(exterior, null);
        encodeRing(geometry.getExteriorRing(), handler, gmlId + ".1");
        handler.endElement(exterior);

        for (int i = 0; i < geometry.getNumInteriorRing(); i++) {
            handler.startElement(interior, null);
            encodeRing(geometry.getInteriorRingN(i), handler, gmlId + "." + (i + 2));
            handler.endElement(interior);
        }

        handler.endElement(polygon);
    }

