    @Test
    public void testValidateGammaValueExpression() throws Exception {
        String file = "example-sld-gamma-value.xml";
        StyledLayerDescriptor sld = (StyledLayerDescriptor) parse(file);

        // basic drill down
        Assert.assertEquals(1, sld.getStyledLayers().length);
        NamedLayer layer = (NamedLayer) sld.getStyledLayers()[0];
        Assert.assertEquals(1, layer.getStyles().length);
        Style style = layer.getStyles()[0];
        Assert.assertEquals(1, style.featureTypeStyles().size());
        FeatureTypeStyle fts = style.featureTypeStyles().get(0);
        Assert.assertEquals(1, fts.rules().size());
        Rule rule = fts.rules().get(0);
        Assert.assertEquals(1, rule.symbolizers().size());

        // every symbolizer has the vendor option
        RasterSymbolizer raster = (RasterSymbolizer) rule.symbolizers().get(0);
        ContrastEnhancement ce = raster.getContrastEnhancement();
        Assert.assertNotNull(ce);
        Expression gammaExp = ce.getGammaValue();
        Assert.assertNotNull(gammaExp);
        Double gamma = gammaExp.evaluate(null, Double.class);
        Assert.assertEquals(1.5, gamma, 0d);
    }

