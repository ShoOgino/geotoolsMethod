    @Override
    protected void setUp() throws Exception {

        store = new MemoryDataStore();

        AttributeTypeBuilder ab = new AttributeTypeBuilder();
        ab.setNamespaceURI(GML.NAMESPACE);
        ab.setName("identifier");
        ab.setBinding(String.class);
        AttributeType identifierType = ab.buildType();
        AttributeDescriptor identifierDescriptor =
                ab.buildDescriptor(new NameImpl(GML.NAMESPACE, "identifier"), identifierType);

        SimpleFeatureTypeBuilder tb = new SimpleFeatureTypeBuilder();
        tb.setName("feature");
        tb.setNamespaceURI("http://geotools.org");
        tb.add(identifierDescriptor);
        tb.add("geometry", Point.class);
        tb.add("integer", Integer.class);
        store.createSchema(tb.buildFeatureType());

        SimpleFeatureBuilder b = new SimpleFeatureBuilder(store.getSchema("feature"));
        b.add("id1");
        b.add(new GeometryFactory().createPoint(new Coordinate(0, 0)));
        b.add(0);
        store.addFeature(b.buildFeature("zero"));

        b.add("id2");
        b.add(new GeometryFactory().createPoint(new Coordinate(1, 1)));
        b.add(1);
        store.addFeature(b.buildFeature("one"));

        tb = new SimpleFeatureTypeBuilder();
        tb.setName("other");
        tb.setNamespaceURI("http://geotools.org");
        tb.add("geometry", Point.class);
        tb.add("integer", Integer.class);
        store.createSchema(tb.buildFeatureType());

        b = new SimpleFeatureBuilder(store.getSchema("other"));
        b.add(new GeometryFactory().createPoint(new Coordinate(2, 2)));
        b.add(2);
        store.addFeature(b.buildFeature("two"));

        b.add(new GeometryFactory().createPoint(new Coordinate(3, 3)));
        b.add(3);
        store.addFeature(b.buildFeature("three"));
    }

