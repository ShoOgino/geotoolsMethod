    @Test
    public void testEncodeFeatureCollectionCoordinatesFormatting11() throws Exception {
        org.geotools.wfs.v1_1.WFSConfiguration configuration =
                new org.geotools.wfs.v1_1.WFSConfiguration();
        configuration.getProperties().add(GMLConfiguration.OPTIMIZED_ENCODING);
        configuration
                .getDependency(org.geotools.gml3.GMLConfiguration.class)
                .setForceDecimalEncoding(true);
        configuration.getDependency(org.geotools.gml3.GMLConfiguration.class).setNumDecimals(4);
        configuration.getDependency(org.geotools.gml3.GMLConfiguration.class).setPadWithZeros(true);
        Encoder e = new Encoder(configuration);
        e.getNamespaces().declarePrefix("geotools", "http://geotools.org");
        e.setIndenting(true);

        Document d = e.encodeAsDOM(fc, WFS.FeatureCollection);
        // XMLTestSupport.print(d);
        Assert.assertEquals(2, d.getElementsByTagName("gml:Point").getLength());
        Assert.assertEquals(2, d.getElementsByTagName("gml:pos").getLength());
        Assert.assertEquals(0, d.getElementsByTagName("gml:coord").getLength());
        Assert.assertEquals(
                "1.0000 1.0000", d.getElementsByTagName("gml:pos").item(0).getTextContent());
        Assert.assertEquals(2, d.getElementsByTagName("geotools:feature").getLength());
        Assert.assertNotNull(
                ((Element) d.getElementsByTagName("geotools:feature").item(0))
                        .getAttribute("gml:id"));
    }

