    @Test
    public void testEncodeFeatureCollectionCoordinatesFormatting10() throws Exception {
        org.geotools.wfs.v1_0.WFSConfiguration_1_0 configuration =
                new org.geotools.wfs.v1_0.WFSConfiguration_1_0();
        configuration.getProperties().add(GMLConfiguration.OPTIMIZED_ENCODING);
        configuration.getDependency(GMLConfiguration.class).setForceDecimalEncoding(true);
        configuration.getDependency(GMLConfiguration.class).setNumDecimals(4);
        configuration.getDependency(GMLConfiguration.class).setPadWithZeros(true);
        Encoder e = new Encoder(configuration);
        e.getNamespaces().declarePrefix("geotools", "http://geotools.org");
        e.setIndenting(true);

        Document d = e.encodeAsDOM(fc, WFS.FeatureCollection);
        // XMLTestSupport.print(d);

        Assert.assertEquals(2, d.getElementsByTagName("gml:Point").getLength());
        Assert.assertEquals(4, d.getElementsByTagName("gml:coordinates").getLength());
        String coords = d.getElementsByTagName("gml:coordinates").item(1).getTextContent();
        Assert.assertEquals("1.0000,1.0000", coords);

        Assert.assertEquals(2, d.getElementsByTagName("geotools:feature").getLength());
        Assert.assertNotNull(
                ((Element) d.getElementsByTagName("geotools:feature").item(0)).getAttribute("fid"));
    }

