    @Test
    public void testEncode() throws Exception {
        FilterFactory f = CommonFactoryFinder.getFilterFactory(null);
        Filter filter = f.equal(f.property("testString"), f.literal(2), false);

        File file = File.createTempFile("filter", "xml");
        file.deleteOnExit();

        try (OutputStream output = new BufferedOutputStream(new FileOutputStream(file))) {
            Encoder encoder = new Encoder(new OGCConfiguration());

            encoder.encode(filter, OGC.PropertyIsEqualTo, output);
            output.flush();
        }

        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        docFactory.setNamespaceAware(true);

        Document doc = docFactory.newDocumentBuilder().parse(file);

        Assert.assertEquals("ogc:PropertyIsEqualTo", doc.getDocumentElement().getNodeName());
        Assert.assertEquals(1, doc.getElementsByTagName("ogc:PropertyName").getLength());
        Assert.assertEquals(1, doc.getElementsByTagName("ogc:Literal").getLength());

        Element propertyName = (Element) doc.getElementsByTagName("ogc:PropertyName").item(0);
        Element literal = (Element) doc.getElementsByTagName("ogc:Literal").item(0);

        Assert.assertEquals("testString", propertyName.getFirstChild().getNodeValue());
        Assert.assertEquals("2", literal.getFirstChild().getNodeValue());
    }

