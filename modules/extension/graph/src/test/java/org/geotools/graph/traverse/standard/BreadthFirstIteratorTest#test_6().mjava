    /**
     * Create a graph that contains a cycle and do a full traversal.<br>
     * <br>
     * Expected: 1. All nodes visited.
     */
    public void test_6() {
        GraphTestUtil.buildCircular(builder(), 100);
        GraphVisitor visitor =
                new GraphVisitor() {
                    public int visit(Graphable component) {
                        if (component.getID() == 50) return (Graph.PASS_AND_CONTINUE);
                        return (Graph.FAIL_QUERY);
                    }
                };
        Node source = builder().getGraph().queryNodes(visitor).get(0);

        CountingWalker walker = new CountingWalker();
        BreadthFirstIterator iterator = createIterator();

        BasicGraphTraversal traversal =
                new BasicGraphTraversal(builder().getGraph(), walker, iterator);
        traversal.init();

        iterator.setSource(source);
        traversal.traverse();

        // ensure all nodes visisited
        visitor =
                new GraphVisitor() {
                    public int visit(Graphable component) {
                        assertTrue(component.isVisited());
                        return (0);
                    }
                };

        builder().getGraph().visitNodes(visitor);

        // ensure all nodes only visitied once
        assertEquals(walker.getCount(), builder().getGraph().getNodes().size());
    }

