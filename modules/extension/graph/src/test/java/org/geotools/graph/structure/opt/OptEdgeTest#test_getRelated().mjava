    public void test_getRelated() {
        OptEdge be;
        Iterator itr;

        // nodes share single edge
        itr = m_edge.getRelated();
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4));
        assertTrue(itr.hasNext());
        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4));
        assertTrue(!itr.hasNext());

        // nodes share multiple edges (same direction)
        addSame();

        itr = m_edge.getRelated();
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_same));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_same));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_same));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_same));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_same));
        assertTrue(!itr.hasNext());

        // nodes share multiple edges (differnt direction)
        addOpp();

        itr = m_edge.getRelated();
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_opp));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_opp));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_opp));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_opp));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_opp));
        assertTrue(!itr.hasNext());

        // loop on one of nodes
        addLoopA();

        itr = m_edge.getRelated();
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopA));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopA));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopA));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopA));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopA));
        assertTrue(!itr.hasNext());

        // loop on other node
        addLoopB();

        itr = m_edge.getRelated();
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));
        assertTrue(!itr.hasNext());

        // loop on both
        addLoopAB();

        itr = m_edge.getRelated();
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_loopA)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_loopA)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_loopA)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_loopA)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopA));
        assertTrue(itr.hasNext());

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_loopA)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));

        be = (OptEdge) itr.next();
        assertTrue(
                be.equals(m_other1)
                        || be.equals(m_other2)
                        || be.equals(m_loopA)
                        || be.equals(m_other3)
                        || be.equals(m_other4)
                        || be.equals(m_loopB));

        assertTrue(!itr.hasNext());
    }

