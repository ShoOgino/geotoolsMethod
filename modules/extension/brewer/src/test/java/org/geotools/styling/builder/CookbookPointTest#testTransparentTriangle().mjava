    @Test
    public void testTransparentTriangle() {
        MarkBuilder mb = new GraphicBuilder().size(12).mark().name("triangle");
        mb.fill().color(Color.RED).opacity(0.2);
        mb.stroke().color(Color.BLUE).width(2);
        Style style = mb.buildStyle();
        // print(style);

        // round up the basic elements and check its simple
        StyleCollector collector = new StyleCollector();
        style.accept(collector);
        assertSimpleStyle(collector);

        // check the size and rotation
        PointSymbolizer ps = (PointSymbolizer) collector.symbolizers.get(0);
        Graphic graphic = ps.getGraphic();
        assertEquals(12, (int) graphic.getSize().evaluate(null, Integer.class));

        // check the mark
        List<GraphicalSymbol> symbols = graphic.graphicalSymbols();
        assertEquals(1, symbols.size());
        Mark mark = (Mark) symbols.get(0);
        assertEquals("triangle", mark.getWellKnownName().evaluate(null));
        Fill fill = mark.getFill();
        assertEquals(Color.RED, fill.getColor().evaluate(null, Color.class));
        assertEquals(0.2, fill.getOpacity().evaluate(null, Double.class), 0);
        Stroke stroke = mark.getStroke();
        assertEquals(Color.BLUE, stroke.getColor().evaluate(null, Color.class));
        assertEquals(2, (int) stroke.getWidth().evaluate(null, Integer.class));
    }

