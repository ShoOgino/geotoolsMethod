        /**
         * Implementation of encode.
         *
         * @param obj An object to encode as a filter.
         * @return String the XML encoding
         * @throws ValidationException DOCUMENT ME!
         * @throws NullPointerException DOCUMENT ME!
         * @throws ClassCastException when obj is not of type Filter
         * @see org.geotools.validation.xml.ArgHelper.Mapping#encode(java.lang.Object)
         */
        public String encode(Object obj) throws ValidationException {
            Filter f = null;

            if (obj == null) {
                throw new NullPointerException("Cannot encode a null Filter.");
            }

            if (!(obj instanceof Filter)) {
                throw new ClassCastException(
                        "Cannot cast " + obj.getClass().toString() + " to a Filter.");
            }

            f = (Filter) obj;

            StringWriter sw = new StringWriter();

            try {
                sw.write((new FilterTransformer()).transform(f));
            } catch (TransformerException e) {
                throw new ValidationException(e);
            }

            return "<filter>\n" + sw.toString() + "</filter>\n";
        }

