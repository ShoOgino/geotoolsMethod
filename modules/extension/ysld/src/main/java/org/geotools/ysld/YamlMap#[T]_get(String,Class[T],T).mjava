    /**
     * Typed access
     *
     * @param key
     * @param def default if value not provided
     * @return Typed access, converting if necessary.
     */
    <T> T get(String key, Class<T> clazz, T def) {
        if (!raw.containsKey(key)) {
            return def;
        }
        Object obj = raw.get(key);
        if (obj == null) {
            return def; // consider returning null
        }
        return convert(obj, clazz);
    }

