    /**
     * Matches a function with the given name and a parameter list matching the given matcher.
     *
     * @param name
     * @param parameters
     * @return
     */
    @SuppressWarnings({"unchecked", "rawtypes"})
    public static Matcher<Expression> function(
            String name, Matcher<? extends Iterable<Expression>> parameters) {
        return (Matcher)
                allOf(
                        instanceOf(Function.class),
                        hasProperty("functionName", hasProperty("name", equalTo(name))),
                        hasProperty("parameters", parameters));
    }

