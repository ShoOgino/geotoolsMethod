    private void setHttpClientCredentials(HttpClient client) {
        client.getState().clearCredentials();
        if (this.getHTTPClient().getUser() != null && this.getHTTPClient().getPassword() != null) {
            AuthScope authscope = AuthScope.ANY;
            Credentials credentials =
                    new UsernamePasswordCredentials(
                            this.getHTTPClient().getUser(), this.getHTTPClient().getPassword());

            client.getParams().setAuthenticationPreemptive(true);
            client.getState().setCredentials(authscope, credentials);
        } else {
            client.getParams().setAuthenticationPreemptive(false);
        }
    }

