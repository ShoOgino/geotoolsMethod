    /** @return */
    public GetTileRequest createGetTileRequest() {

        URL url;
        OperationType getTile = getCapabilities().getRequest().getGetTile();
        if (getTile == null) {
            type = WMTSServiceType.REST;
        }
        if (WMTSServiceType.KVP.equals(type)) {
            url = findURL(getTile);
        } else {
            type = WMTSServiceType.REST;
            url = serverURL;
        }
        Properties props = new Properties();
        props.put("type", type.name());
        GetTileRequest request =
                ((WMTSSpecification) specification)
                        .createGetTileRequest(url, props, capabilities, this.getHTTPClient());

        if (headers != null) {
            request.getHeaders().putAll(headers);
        }
        return request;
    }

