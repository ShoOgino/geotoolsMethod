    public WMTSGetCapabilitiesResponse(HTTPResponse response, Map<String, Object> hints) throws ServiceException, IOException {
        super(response);

        try {

            Object object;
            InputStream inputStream = null;
            try {
                inputStream = response.getResponseStream();
                Parser parser = new Parser(new WMTSConfiguration());

                object = parser.parse(new InputSource(inputStream));

            } catch (SAXException |ParserConfigurationException e) {
                throw (ServiceException) new ServiceException("Error while parsing XML.")
                        .initCause(e);
            } finally {
                IOUtils.closeQuietly(inputStream);
            }

            if (object instanceof ServiceException) {
                throw (ServiceException) object;
            }

            this.capabilities = new WMTSCapabilities( (CapabilitiesType)object);
        } finally {
            response.dispose();
        }
    }

