    /**
     * Checks if a referenced envelope has EAST_NORTH axis order and if not creates a copy with
     * EAST_NORTH axis order.
     *
     * @param envelope The referenced envelope.
     * @return The referenced envelope eith EAST_NORTH axis order.
     * @throws FactoryException
     * @throws TransformException
     */
    private ReferencedEnvelope toEastNorthAxisOrder(ReferencedEnvelope envelope)
            throws FactoryException, TransformException {
        CoordinateReferenceSystem crsExtent = envelope.getCoordinateReferenceSystem();
        if (CRS.getAxisOrder(crsExtent) == CRS.AxisOrder.NORTH_EAST) {
            String srsExtent = CRS.toSRS(crsExtent);
            crsExtent = CRS.decode(srsExtent, true);
            envelope = envelope.transform(crsExtent, false);
        }
        return envelope;
    }

