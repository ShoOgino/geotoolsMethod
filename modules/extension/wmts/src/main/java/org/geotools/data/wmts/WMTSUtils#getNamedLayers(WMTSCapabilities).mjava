    /**
     * Utility method to return each layer that has a name. This method maintains no hierarchy at all.
     *
     * @return An array of Layers, each value has a it's name property set or an empty array if there are none. It will return null if there is no capabilities document
     *
     */
    public static WMTSLayer[] getNamedLayers(WMTSCapabilities capabilities) {

    	if (capabilities == null) {
    		return null;
    	}

        List<WMTSLayer> namedLayersList = new ArrayList<>();

        List<Layer> layers = capabilities.getLayerList();

        for( Layer l:layers) {
            if ((l.getName() != null) && (!l.getName().isEmpty())) {
                namedLayersList.add((WMTSLayer) l);
            }
        }

        return namedLayersList.toArray(new WMTSLayer[] {});
    }

