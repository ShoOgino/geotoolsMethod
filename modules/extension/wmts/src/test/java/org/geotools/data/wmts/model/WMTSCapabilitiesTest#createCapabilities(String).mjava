    protected WMTSCapabilities createCapabilities(String capFile) throws Exception {
        try {
            File getCaps = TestData.file(null, capFile);
            assertNotNull(getCaps);

            Parser parser = new Parser(new WMTSConfiguration());

            Object object = parser.parse(new FileReader(getCaps));
            assertTrue("Capabilities failed to parse " + object.getClass(), object instanceof CapabilitiesType);

            WMTSCapabilities capabilities = new WMTSCapabilities((CapabilitiesType) object);
            return capabilities;
        } catch (java.net.ConnectException ce) {
            if (ce.getMessage().indexOf("timed out") > 0) {
                System.err.println("Unable to test - timed out: " + ce);
                return null;
            } else {
                throw (ce);
            }
        }
    }

