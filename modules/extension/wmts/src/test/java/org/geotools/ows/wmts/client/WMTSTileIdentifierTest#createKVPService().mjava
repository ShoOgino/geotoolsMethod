    private WMTSTileService createKVPService() throws Exception {
        try {
            URL capaKvp = getClass().getClassLoader().getResource("test-data/getcapa_kvp.xml");
            assertNotNull(capaKvp);
            File capaFile = new File(capaKvp.toURI());
            WMTSCapabilities capa = WMTSTileFactory4326Test.createCapabilities(capaFile);

            String baseURL =
                    "http://demo.geo-solutions.it/geoserver/gwc/service/wmts?REQUEST=getcapabilities";

            WMTSLayer layer = capa.getLayer("spearfish");
            TileMatrixSet matrixSet = capa.getMatrixSet("EPSG:4326");
            assertNotNull(layer);
            assertNotNull(matrixSet);

            return new WMTSTileService(baseURL, WMTSServiceType.KVP, layer, null, matrixSet);
        } catch (URISyntaxException ex) {
            fail(ex.getMessage());
            return null;
        }
    }

