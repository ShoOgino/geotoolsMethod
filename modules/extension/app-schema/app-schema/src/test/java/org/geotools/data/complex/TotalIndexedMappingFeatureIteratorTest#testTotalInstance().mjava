    @Test
    public void testTotalInstance() throws IOException {
        try (TestFeatureSource fsource =
                new TestFeatureSource(
                        "/test-data/index/",
                        "stationsIndexed.xml",
                        "http://www.stations.org/1.0",
                        "stationsIndexed")) {
            FeatureCollection<FeatureType, Feature> fcoll =
                    fsource.getMappedSource().getFeatures(this.totalIndexedFilterCase());
            try (FeatureIterator<Feature> iterator = fcoll.features()) {
                assertTrue(iterator instanceof TotalIndexedMappingFeatureIterator);
                List<Feature> features =
                        FeatureStreams.toFeatureStream(fcoll).collect(Collectors.toList());
                assertEquals(features.size(), 4);
                assertTrue(checkExists(features, "st.1"));
                assertTrue(checkExists(features, "st.2"));
                assertTrue(checkExists(features, "st.10"));
                assertTrue(checkExists(features, "st.11"));
            }
        }
    }

