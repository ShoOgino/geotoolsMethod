    @Test
    public void testDataStore() throws Exception {
        FeatureSource<FeatureType, Feature> fSource = mappingDataStore.getFeatureSource(typeName);

        // make a getFeatures request with a nested properties filter.
        // note that the expected result count is set to 65 since that's the
        // number
        // of results I get from a sql select on min_time_d = 'carnian'
        final int EXPECTED_RESULT_COUNT = 20;

        FeatureCollection<FeatureType, Feature> features = fSource.getFeatures();

        int resultCount = size(features);
        String msg =
                "be sure difference in result count is not due to different dataset."
                        + " Query used should be min_time_d = 'carnian'";
        assertEquals(msg, EXPECTED_RESULT_COUNT, resultCount);

        int count = 0;
        try (FeatureIterator<Feature> it = features.features()) {
            while (it.hasNext()) {
                it.next();
                count++;
            }
            assertEquals(EXPECTED_RESULT_COUNT, count);
        }
    }

