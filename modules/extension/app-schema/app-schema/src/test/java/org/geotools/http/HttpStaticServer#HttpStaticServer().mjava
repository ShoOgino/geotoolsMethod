    HttpStaticServer() {
        server = new Server(new QueuedThreadPool(6));
        connector = new ServerConnector(server);
        server.addConnector(connector);
        server.setHandler(
                new AbstractHandler() {
                    @Override
                    public void handle(
                            String target,
                            Request baseRequest,
                            HttpServletRequest request,
                            HttpServletResponse response) {
                        for (Map.Entry<String, String> resource : resources.entrySet()) {
                            if (target != null
                                    && target.equalsIgnoreCase("/" + resource.getKey())) {
                                // we found the resource we where looking for
                                response.setContentType("text/xml");
                                response.setStatus(HttpServletResponse.SC_OK);
                                baseRequest.setHandled(true);
                                try (InputStream input =
                                        new ByteArrayInputStream(resource.getValue().getBytes())) {
                                    // write the resource content to the HTTP response output stream
                                    IOUtils.copy(input, response.getOutputStream());
                                    // we are done
                                    return;
                                } catch (Exception exception) {
                                    throw new RuntimeException(
                                            "Error writing HTTP response.", exception);
                                }
                            }
                        }
                        // request not handled
                        response.setStatus(HttpServletResponse.SC_NOT_FOUND);
                        baseRequest.setHandled(true);
                    }
                });
    }

