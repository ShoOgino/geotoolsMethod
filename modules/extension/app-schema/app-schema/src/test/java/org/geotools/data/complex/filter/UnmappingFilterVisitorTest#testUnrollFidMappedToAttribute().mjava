    /**
     * Mapping specifies station_no --> wq_plus/@id. A FidFilter over wq_plus type should result in
     * a compare equals filter over the station_no attribute of wq_ir_results simple type.
     */
    @Test
    @SuppressWarnings("unchecked")
    public void testUnrollFidMappedToAttribute() throws Exception {
        String fid = "station_no.1";
        Id fidFilter = ff.id(Collections.singleton(ff.featureId(fid)));

        Filter unrolled = (Filter) fidFilter.accept(visitor, null);
        assertNotNull(unrolled);

        FeatureCollection results = mapping.getSource().getFeatures(unrolled);
        assertEquals(1, DataUtilities.count(results));

        try (FeatureIterator features = results.features()) {
            Feature unmappedFeature = features.next();

            assertNotNull(unmappedFeature);
            Object object = unmappedFeature.getProperty("station_no").getValue();
            assertEquals(fid, object);
        }
    }

