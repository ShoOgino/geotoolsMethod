    @Test
    public void testVisitor() {
        try (TestFeatureSource fsource =
                new TestFeatureSource(
                        "/test-data/index/",
                        "stationsIndexed.xml",
                        "http://www.stations.org/1.0",
                        "stationsIndexed")) {
            Filter filter = partialIndexedFilter_2idxfilterResults();
            List<Filter> indexedFilters =
                    Arrays.asList(new Filter[] {totallyIndexedFilter(), totallyIndexedFilter2()});
            IndexCombinedFilterTransformerVisitor visitor =
                    new IndexCombinedFilterTransformerVisitor(
                            (BinaryLogicOperator) partialIndexedFilter_2idxfilterResults(),
                            indexedFilters,
                            buildIdInExpression(
                                    Arrays.asList(new String[] {"st.3", "st.2"}),
                                    fsource.getMappedSource().getMapping()));
            Filter ultimateFilter = (Filter) filter.accept(visitor, ff);
            assertNotEquals(filter, ultimateFilter);
            assertTrue(ultimateFilter instanceof And);
            And mainAnd = (And) ultimateFilter;
            assertEquals(
                    mainAnd.getChildren().get(0),
                    buildIdInExpression(
                            Arrays.asList(new String[] {"st.3", "st.2"}),
                            fsource.getMappedSource().getMapping()));
        }
    }

