    private AttributeDescriptor createAttributeDescriptor(AttributeType type,
            CoordinateReferenceSystem crs, Name elemName, int minOccurs, int maxOccurs,
            boolean nillable, Object defaultValue) {
        AttributeDescriptor descriptor = null;
        try {
            if (!(type instanceof AttributeTypeProxy)
                    && Geometry.class.isAssignableFrom(type.getBinding())) {
                // create geometry descriptor with the simple feature type CRS
                GeometryType geomType = new GeometryTypeImpl(type.getName(), type.getBinding(),
                        crs, type.isIdentified(), type.isAbstract(), type.getRestrictions(),
                        type.getSuper(), type.getDescription());
                descriptor = typeFactory.createGeometryDescriptor(geomType, elemName, minOccurs,
                        maxOccurs, nillable, defaultValue);
            } else {
                descriptor = typeFactory.createAttributeDescriptor(type, elemName, minOccurs,
                        maxOccurs, nillable, defaultValue);
            }
        } catch (Exception e) {
            LOGGER.log(Level.WARNING, "Could not create substitution descriptor: " + e.getMessage());
        }
        return descriptor;
    }

