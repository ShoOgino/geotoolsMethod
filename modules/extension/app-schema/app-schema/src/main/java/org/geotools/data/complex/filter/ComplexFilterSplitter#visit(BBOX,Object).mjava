    @Override
    public Object visit(BBOX filter, Object notUsed) {
        nestedAttributes.clear();
        int i = preStack.size();
        if (filter.getExpression1() instanceof PropertyName) {
            PropertyName bboxProperty = (PropertyName) filter.getExpression1();
            if (!bboxProperty.getPropertyName().isEmpty()) {
                Object ret = this.visit(bboxProperty, notUsed);
                if (preStack.size() == i + 1) {
                    preStack.pop();
                }
                if (nestedAttributes.size() == 1) {
                    nestedAttributeSanityCheck(filter);
                } else if (nestedAttributes.size() > 1) {
                    // encoding bbox on multiple nested attributes is not supported
                    postStack.push(filter);
                    return ret;
                }
            }
        }
        return super.visit(filter, notUsed);
    }

