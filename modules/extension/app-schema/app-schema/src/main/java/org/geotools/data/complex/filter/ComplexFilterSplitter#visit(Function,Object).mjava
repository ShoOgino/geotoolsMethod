    @Override
    public Object visit(Function expression, Object notUsed) {
        nestedAttributes.clear();
        int i = preStack.size();
        Object data = super.visit(expression, notUsed);
        // encoding of functions with nested attributes as  arguments is not supported
        if (nestedAttributes.size() > 0 && preStack.size() == i + 1) {
            Object o = preStack.pop();
            postStack.push(o);
        }
        return data;
    }

