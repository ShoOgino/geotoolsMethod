    /**
     * Return true if there are more features.
     *
     * @see java.util.Iterator#hasNext()
     */
    @Override
    public boolean hasNext() {
        if (isHasNextCalled()) {
            return !isNextSourceFeatureNull();
        }

        if (featureCounter >= requestMaxFeatures) {
            return false;
        }
        if (isSourceFeatureIteratorNull()) {
            return false;
        }
        // make sure features are unique by mapped id
        boolean exists = unprocessedFeatureExists();

        if (!exists) {
            LOGGER.finest("no more features, produced " + featureCounter);
            close();
        }

        setHasNextCalled(true);

        return exists;
    }

