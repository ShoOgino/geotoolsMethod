        @Override
        public int compare(Object o1, Object o2) {
            if (o1 == null) {
                if (o2 == null) {
                    return 0;
                } else {
                    return -1;
                }
            }
            if (o2 == null) {
                return 1;
            }

            String string1 = o1.toString();
            String string2 = o2.toString();

            // in case numbers are stored as string, make sure the order is correct
            if (NumberUtils.isNumber(string1) && NumberUtils.isNumber(string2)) {
                return Double.valueOf(string1).compareTo(Double.valueOf(string2));
            }

            if (o1 instanceof Comparable) {
                return ((Comparable) o1).compareTo(o2);
            }
            return string1.compareTo(string2);
        }

