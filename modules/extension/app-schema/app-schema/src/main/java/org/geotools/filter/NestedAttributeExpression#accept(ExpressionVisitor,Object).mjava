    public Object accept(ExpressionVisitor visitor, Object extraData) {
        // Workaround for GEOT-4981: NestedAttributeExpresionImpl is incompatible with
        // DuplicatingFilterVisitor
        if (visitor instanceof DuplicatingFilterVisitor
                && !(visitor instanceof NamespaceAwareAttributeRenameVisitor)) {
            return new NestedAttributeExpression(fullSteps, rootMapping);
        }
        return visitor.visit(this, extraData);
    }

