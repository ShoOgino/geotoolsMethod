    private boolean buildFiterBasedOnSortBy(
            JoiningQuery query,
            FilterToSQL toSQL,
            Filter filter,
            SortBy[] lastSortBy,
            String lastTableName,
            String lastTableAlias,
            Collection<String> ids,
            StringBuffer sortBySQL,
            boolean hasSortBy)
            throws SQLException, FilterToSQLException {
        for (int i = 0; i < lastSortBy.length; i++) {
            if (!ids.contains(lastSortBy[i].getPropertyName().toString())) {
                hasSortBy =
                        processSortByKey(
                                query,
                                toSQL,
                                filter,
                                lastSortBy,
                                lastTableName,
                                lastTableAlias,
                                sortBySQL,
                                i);
            }
        }
        return hasSortBy;
    }

