    public AttributeMapping(
            Expression idExpression,
            Expression sourceExpression,
            String sourceIndex,
            StepList targetXPath,
            AttributeType targetNodeInstance,
            boolean isMultiValued,
            Map<Name, Expression> clientProperties,
            MultipleValue multipleValue,
            String indexField) {

        this.identifierExpression = idExpression == null ? Expression.NIL : idExpression;
        this.sourceExpression = sourceExpression == null ? Expression.NIL : sourceExpression;
        this.isMultiValued = isMultiValued;
        if (this.sourceExpression == null) {
            this.sourceExpression = Expression.NIL;
        }
        this.sourceIndex = sourceIndex;
        this.targetXPath = targetXPath;
        this.targetNodeInstance = targetNodeInstance;
        this.clientProperties =
                clientProperties == null ? Collections.emptyMap() : clientProperties;
        this.multipleValue = multipleValue;
        if (multipleValue != null) {
            this.isMultiValued = true;
            this.sourceExpression = multipleValue;
        }
        this.indexField = indexField;
    }

