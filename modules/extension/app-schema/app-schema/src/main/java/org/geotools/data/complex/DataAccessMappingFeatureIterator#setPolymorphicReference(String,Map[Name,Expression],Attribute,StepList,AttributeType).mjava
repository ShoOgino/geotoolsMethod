    /**
     * Special handling for polymorphic mapping where the value of the attribute determines that
     * this attribute should be a placeholder for an xlink:href.
     *
     * @param uri the xlink:href URI
     * @param clientPropsMappings client properties
     * @param target the complex feature being built
     * @param xpath the xpath of attribute
     * @param targetNodeType the type of the attribute to be cast to, if any
     */
    private Attribute setPolymorphicReference(
            String uri,
            Map<Name, Expression> clientPropsMappings,
            Attribute target,
            StepList xpath,
            AttributeType targetNodeType) {

        if (uri != null) {
            Attribute instance =
                    xpathAttributeBuilder.set(target, xpath, null, "", targetNodeType, true, null);
            Map<Name, Expression> newClientProps = new HashMap<>();
            newClientProps.putAll(clientPropsMappings);
            newClientProps.put(XLINK_HREF_NAME, namespaceAwareFilterFactory.literal(uri));
            setClientProperties(instance, null, newClientProps);
            return instance;
        }
        return null;
    }

