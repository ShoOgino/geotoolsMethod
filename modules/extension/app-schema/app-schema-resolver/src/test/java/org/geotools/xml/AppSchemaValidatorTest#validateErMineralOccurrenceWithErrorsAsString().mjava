    /**
     * Test that validation fails with an expected error message for a known-invalid XML instance
     * document. This version converts the resource to a string and back before validation.
     */
    @Test
    public void validateErMineralOccurrenceWithErrorsAsString() {
        try {
            validateResourceAsString("/test-data/er_MineralOccurrence_with_errors.xml");
            Assert.fail("Unexpected schema validation success for known-invalid XML instance document");
        } catch (Exception e) {
            Assert.assertTrue(
                    e.getMessage(),
                    e.getMessage().startsWith(
                            "Schema validation failures: 2" + System.getProperty("line.separator")));
        }
    }

