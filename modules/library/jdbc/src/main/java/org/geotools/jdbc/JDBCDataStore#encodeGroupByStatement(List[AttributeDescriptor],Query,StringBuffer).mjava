    /**
     * Helper method that adds a group by statement to the SQL query. If the list of group by attributes
     * is empty or NULL no group by statement is add.
     *
     * @param attributes the group by attributes to be encoded
     * @param query      the query information
     * @param sql        the sql query buffer
     */
    protected void encodeGroupByStatement(List<AttributeDescriptor> attributes, Query query, StringBuffer sql) {
        if (attributes == null || attributes.isEmpty()) {
            // there is not group by attributes to encode so nothing to do
            return;
        }
        sql.append(" GROUP BY ");
        encodeGroupByAttributes(attributes, query, sql);
    }

