    protected void encodeFunction(String function,  AttributeDescriptor att, Expression expression, Query query,
            StringBuffer sql) {
        if (expression instanceof PropertyName) {
            encodeFunction (function, att, query, sql);
        } else {
            sql.append(function).append("(");
            if (expression instanceof FunctionExpression) {
                dialect.encodeAggregateFunction(getFunctionName(((FunctionExpression) expression).getName()),
                        att.getLocalName(), sql);
            } else {
                sql.append("*");
            }

            sql.append(")");
        }
    }

