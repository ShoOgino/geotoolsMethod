    /**
     * Surrounds a name with the SQL escape string.
     *
     * <p>If the name contains the SQL escape string, the SQL escape string is duplicated.
     *
     * @param name
     */
    public String escapeName(String name) {
        String nameEscape = getNameEscape();
        if (nameEscape.isEmpty()) return name;
        StringBuilder sb = new StringBuilder();
        sb.append(nameEscape);
        int offset = 0;
        int escapeOffset;
        while ((escapeOffset = name.indexOf(nameEscape, offset)) != -1) {
            sb.append(name.substring(offset, escapeOffset));
            sb.append(nameEscape);
            sb.append(nameEscape);
            offset = escapeOffset + nameEscape.length();
        }
        sb.append(name.substring(offset));
        sb.append(nameEscape);
        return sb.toString();
    }

