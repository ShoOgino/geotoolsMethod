    /**
     * Checks if the query needs limit/offset treatment
     * @param query
     * @return true if the query needs limit/offset treatment and if the sql dialect can do that natively
     */
    boolean checkLimitOffset(Query query) {
        // if we cannot, don't bother checking the query
        if(!dialect.isLimitOffsetSupported())
            return false;
        
        // the check the query has at least a non default value for limit/offset
        final Integer offset = query.getStartIndex();
        final int limit = query.getMaxFeatures();
        return limit != Integer.MAX_VALUE || (offset != null && offset > 0);
    }

