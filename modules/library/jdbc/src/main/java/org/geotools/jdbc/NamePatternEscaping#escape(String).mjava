    public String escape(String name) {
        if (needsEscaping(name)) {
            return replacementPattern.matcher(name).replaceAll(quotedReplacement + "$1");
        } else {
            return name;
        }
    }

