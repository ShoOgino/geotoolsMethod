    /** Gets a ConnectionPool for a ConnectionPoolDataSource.
     * 
     *  <p>This method will return a connection pool that contains
     *  the ConnectionPoolDataSource.  If a ConnectionPool exists that
     *  already contains the ConnectionPoolDataSource, it will be returned,
     *  otherwise a ConnectionPool will be created for the ConnectionPoolDataSource.
     * 
     * @param cpds The ConnectionPoolDataSource to get a ConnectionPool for.
     * @return The ConnectionPool.
     */
    public synchronized ConnectionPool getConnectionPool(final ConnectionPoolDataSource cpds) {
        ConnectionPool connectionPool = (ConnectionPool) connectionPools.get(cpds);
        
        if (connectionPool == null){
            connectionPool = new ConnectionPool(cpds);
            connectionPools.put(cpds, connectionPool);
        }
        
        return connectionPool;
    }

