    /**
     * Helper method that extract the attribute that will be used by the aggregate function.
     *
     * @param visitor the feature visitor
     * @param featureType the feature type
     * @return the aggregate attribute or NULL if the visitor don't contains an aggregate attribute
     */
    protected AttributeDescriptor extractAggregateAttribute(FeatureVisitor visitor,
            SimpleFeatureType featureType) {
        Expression expression = getAggregateExpression(visitor);
        Object result = expression.evaluate(featureType);
        if (result instanceof AttributeDescriptor) {
            return (AttributeDescriptor) result;
        }
        return null;
    }

