    public String encodeInComparison(
            String functionName, boolean equality, String literal, Object... valueList)
            throws FilterToSQLException {
        FilterToSQL encoder = new FilterToSQL(output);

        Function function = buildInFunction(functionName, valueList);
        Filter filter;
        if (equality) {
            filter = ff.equal(function, ff.literal(literal), true);
        } else {
            filter = ff.notEqual(function, ff.literal(literal), true);
        }
        encoder.encode(filter);

        String result = output.getBuffer().toString();
        output.getBuffer().setLength(0);
        return result;
    }

