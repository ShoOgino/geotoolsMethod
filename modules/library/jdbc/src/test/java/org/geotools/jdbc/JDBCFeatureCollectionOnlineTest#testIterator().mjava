    public void testIterator() throws Exception {
        try (FeatureIterator<SimpleFeature> i = collection.features()) {
            assertNotNull(i);
            assertFeatureIterator(
                    0,
                    3,
                    i,
                    new SimpleFeatureAssertion() {

                        @Override
                        public int toIndex(SimpleFeature feature) {
                            return ((Number) feature.getAttribute(aname("intProperty"))).intValue();
                        }

                        @Override
                        public void check(int index, SimpleFeature feature) {
                            assertNotNull(feature);

                            String fid = feature.getID();

                            int id = Integer.parseInt(fid.substring(fid.indexOf('.') + 1));

                            assertEquals(index, id);
                        }
                    });
        }
    }

