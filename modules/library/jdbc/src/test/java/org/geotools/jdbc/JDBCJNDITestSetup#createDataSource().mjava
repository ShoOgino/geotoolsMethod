    @Override
    protected DataSource createDataSource() throws IOException {
        setupJNDIEnvironment();
        
        DataSource ds = null;
        try {
            //JD: we need to "reset" the naming context because if there is a 
            // context that already exists (this mostly happens due to the epsg
            // hsql database), then it will not have been affected by our special
            // jndi environment variables
            GeoTools.init( new InitialContext() );
            Context ctx = GeoTools.getInitialContext(GeoTools.getDefaultHints());
            ds = (DataSource) ctx.lookup("ds");
        } 
        catch (NamingException e) {
            e.printStackTrace();
        }
        
        return ds;
    }

