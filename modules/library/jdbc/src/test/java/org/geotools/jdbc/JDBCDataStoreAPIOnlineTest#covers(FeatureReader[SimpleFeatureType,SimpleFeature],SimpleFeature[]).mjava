    /**
     * Ensure that FeatureReader<SimpleFeatureType, SimpleFeature> reader contains exactly the
     * contents of array.
     *
     * @param reader DOCUMENT ME!
     * @param array DOCUMENT ME!
     * @return DOCUMENT ME!
     * @throws NoSuchElementException DOCUMENT ME!
     * @throws IOException DOCUMENT ME!
     * @throws IllegalAttributeException DOCUMENT ME!
     */
    boolean covers(FeatureReader<SimpleFeatureType, SimpleFeature> reader, SimpleFeature[] array)
            throws NoSuchElementException, IOException, IllegalAttributeException {
        SimpleFeature feature;
        int count = 0;

        try {
            while (reader.hasNext()) {
                feature = (SimpleFeature) reader.next();

                assertContains(array, feature);
                //                if (!contains(array, feature)) {
                //                    return false;
                //                }
                count++;
            }
        } finally {
            reader.close();
        }

        return count == array.length;
    }

