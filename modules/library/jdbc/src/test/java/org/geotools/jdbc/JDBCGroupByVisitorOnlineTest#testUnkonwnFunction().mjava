    public void testUnkonwnFunction() throws Exception {
        // use a made up function that cannot be possibly known by JDBCDataStore,
        // and is not subject to cloning or modifications of any kind 
        Function aggregateFunction = new InternalVolatileFunction() {

            @Override
            public Object evaluate(Object object) {
                return ((SimpleFeature) object).getAttribute(aname("building_type")) + "_foo";
            }
        };

        List<Object[]> value  = genericGroupByTestTest(Query.ALL, Aggregate.MAX, false, aggregateFunction);
        assertNotNull(value);

        assertTrue(value.size() == 3);
        checkValueContains(value, "HOUSE_foo", "6.0");
        checkValueContains(value, "FABRIC_foo", "500.0");
        checkValueContains(value, "SCHOOL_foo", "60.0");
    }

