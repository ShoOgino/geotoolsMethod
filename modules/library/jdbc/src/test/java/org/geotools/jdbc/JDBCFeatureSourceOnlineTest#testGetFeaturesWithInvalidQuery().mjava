    public void testGetFeaturesWithInvalidQuery() {
        FilterFactory ff = CommonFactoryFinder.getFilterFactory(null);
        PropertyIsEqualTo f = ff.equals(ff.property("invalidAttribute"), ff.literal(5));

        // make sure a complaint related to the invalid filter is thrown here
        SimpleFeatureIterator fi = null;
        try { 
            fi = featureSource.getFeatures(new Query("ft1", f)).features();
            fi.close();
            fail("This query should have failed, it contains an invalid filter");
        } catch(Exception e) {
            //e.printStackTrace();
            // fine
        } finally {
            //make sure the iterator is closed.
            if(fi!=null)
                fi.close();
        }
    }

