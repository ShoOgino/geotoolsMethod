    /**
     * Ensure readers contents equal those in the feature array
     *
     * @param features DOCUMENT ME!
     * @param reader DOCUMENT ME!
     * @throws NoSuchElementException DOCUMENT ME!
     * @throws IOException DOCUMENT ME!
     * @throws IllegalAttributeException DOCUMENT ME!
     */
    void assertCovered(
            SimpleFeature[] features, FeatureReader<SimpleFeatureType, SimpleFeature> reader)
            throws NoSuchElementException, IOException, IllegalAttributeException {
        int count = 0;

        try {
            while (reader.hasNext()) {
                assertContains(features, reader.next());
                count++;
            }
        } finally {
            reader.close();
        }

        assertEquals(features.length, count);
    }

