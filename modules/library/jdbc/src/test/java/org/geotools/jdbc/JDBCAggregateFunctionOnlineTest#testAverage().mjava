    public void testAverage() throws Exception {
        FilterFactory ff = dataStore.getFilterFactory();
        PropertyName p = ff.property(aname("doubleProperty"));

        MyAverageVisitor v = new MyAverageVisitor(p);
        dataStore.getFeatureSource(tname("ft1")).accepts(Query.ALL, v, null);
        assertFalse(visited);
        assertEquals(1.1, v.getResult().toDouble(), 0.01);
    }

