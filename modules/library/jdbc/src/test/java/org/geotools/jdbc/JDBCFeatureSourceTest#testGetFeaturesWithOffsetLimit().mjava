    public void testGetFeaturesWithOffsetLimit() throws Exception {
        DefaultQuery q = new DefaultQuery(featureSource.getSchema().getTypeName());
        // no sorting, let's see if the database can use native one
        q.setStartIndex(1);
        q.setMaxFeatures(1);
        SimpleFeatureCollection features = featureSource.getFeatures(q);
        
        // check size
        assertEquals(1, features.size());
        
        // check actual iteration
        Iterator<SimpleFeature> it = features.iterator();
        assertTrue(it.hasNext());
        SimpleFeature f = it.next();
        ReferencedEnvelope fe = ReferencedEnvelope.reference(f.getBounds());
        assertEquals(1, ((Number) f.getAttribute(aname("intProperty"))).intValue());
        assertFalse(it.hasNext());
        features.close(it);
        //assertEquals(fe, features.getBounds());
        assertTrue(areReferencedEnvelopesEuqal(fe, features.getBounds()));
    }

