    @Test
    public void testRepeatedMixedOr() {
        PropertyName spp = ff.property("sp");
        PropertyName ipp = ff.property("ip");
        PropertyName dpp = ff.property("dp");
        Or orFilter =
                ff.or(
                        Arrays.asList(
                                ff.equal(spp, ff.literal("zero"), true),
                                ff.equal(ipp, ff.literal(1), true),
                                ff.equal(dpp, ff.literal(0d), true),
                                ff.equal(spp, ff.literal("two"), true),
                                ff.equal(ipp, ff.literal(2), true)));
        NullHandlingVisitor nh = new NullHandlingVisitor();
        Filter nhResult = (Filter) orFilter.accept(nh, null);
        Filter expected =
                ff.or(
                        Arrays.asList(
                                ff.and(
                                        ff.or(
                                                ff.equal(spp, ff.literal("zero"), true),
                                                ff.equal(spp, ff.literal("two"), true)),
                                        ff.not(ff.isNull(spp))),
                                ff.and(
                                        ff.or(
                                                ff.equal(ipp, ff.literal(1), true),
                                                ff.equal(ipp, ff.literal(2), true)),
                                        ff.not(ff.isNull(ipp))),
                                ff.and(
                                        ff.equal(dpp, ff.literal(0d), true),
                                        ff.not(ff.isNull(dpp)))));
        assertEquals(expected, nhResult);
    }

