    public void testGetFeaturesWithOffset() throws Exception {
        Query q = new Query(featureSource.getSchema().getTypeName());
        q.setSortBy(new SortBy[] {dataStore.getFilterFactory().sort(aname("intProperty"), SortOrder.ASCENDING)});
        q.setStartIndex(2);
        SimpleFeatureCollection features = featureSource.getFeatures(q);
        
        // check size
        assertEquals(1, features.size());
        
        // check actual iteration
        SimpleFeatureIterator it = features.features();
        try {
            assertTrue(it.hasNext());
            SimpleFeature f = it.next();
            ReferencedEnvelope fe = ReferencedEnvelope.reference(f.getBounds());
            assertEquals(2, ((Number) f.getAttribute(aname("intProperty"))).intValue());
            assertFalse(it.hasNext());
            //assertEquals(fe, features.getBounds());
            it.close();
            it=null;
            assertTrue(areReferencedEnvelopesEqual(fe, features.getBounds()));
        } finally {
            if(it!=null)
                it.close();
        }
    }

