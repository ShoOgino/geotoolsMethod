    public void testSumAreaWithGroupBy() throws Exception {
        FilterFactory ff = dataStore.getFilterFactory();
        PropertyName p = ff.property( aname("geom") );
        
        GroupByVisitor v =new GroupByVisitorBuilder()
            .withAggregateAttribute(ff.function("area2", p))
            .withAggregateVisitor("SumArea")
            .withGroupByAttributes(Collections.singleton(aname("name")), dataStore.getSchema(tname("aggregate")))
            .build();
        
        dataStore.getFeatureSource(tname("aggregate")).accepts(Query.ALL, v, null);
        if (dataStore.getSupportedFunctions().containsKey(FilterFunction_area.NAME.getName())) {
            assertFalse(visited);
        }
        List groups = v.getResult().toList();
        assertEquals( 20.0, (Double)((Object[]) groups.get(0))[1], 0.01);
        assertEquals( 10.0, (Double)((Object[]) groups.get(1))[1], 0.01);
    }

