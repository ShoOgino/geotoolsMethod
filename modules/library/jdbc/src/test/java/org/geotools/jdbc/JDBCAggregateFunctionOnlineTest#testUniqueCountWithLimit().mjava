    public void testUniqueCountWithLimit() throws Exception {
        FilterFactory ff = dataStore.getFilterFactory();
        PropertyName p = ff.property(aname("stringProperty"));

        UniqueVisitor v = new UniqueCountVisitor(p);
        v.setMaxFeatures(2);
        dataStore.getFeatureSource(tname("ft1")).accepts(Query.ALL, v, null);
        int result = v.getResult().toInt();
        assertEquals(0, v.getUnique().size());
        assertEquals(2, result);
    }

