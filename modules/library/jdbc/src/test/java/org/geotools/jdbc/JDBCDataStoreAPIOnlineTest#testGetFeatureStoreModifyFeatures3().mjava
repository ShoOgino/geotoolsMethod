    /**
     * Test with a filter that won't be matched after the modification is done, was throwing an NPE
     * before the fix
     */
    public void testGetFeatureStoreModifyFeatures3() throws IOException {
        SimpleFeatureStore road = (SimpleFeatureStore) dataStore.getFeatureSource(tname("road"));

        FilterFactory ff = CommonFactoryFinder.getFilterFactory(null);
        PropertyIsEqualTo filter = ff.equals(ff.property(aname("name")), ff.literal("r1"));

        road.modifyFeatures(
                new Name[] {
                    new NameImpl(aname("name")),
                },
                new Object[] {
                    "changed",
                },
                filter);
    }

