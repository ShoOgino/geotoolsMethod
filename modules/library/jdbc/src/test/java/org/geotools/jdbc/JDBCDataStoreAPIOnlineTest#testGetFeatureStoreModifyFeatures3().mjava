    /**
     * Test with a filter that won't be matched after the modification is done, was throwing an NPE
     * before the fix
     *
     * @throws IOException
     */
    public void testGetFeatureStoreModifyFeatures3() throws IOException {
        SimpleFeatureStore road = (SimpleFeatureStore) dataStore.getFeatureSource(tname("road"));

        FilterFactory ff = CommonFactoryFinder.getFilterFactory(null);
        PropertyIsEqualTo filter = ff.equals(ff.property(aname("name")), ff.literal("r1"));

        AttributeDescriptor name = td.roadType.getDescriptor(aname("name"));
        road.modifyFeatures(
                new AttributeDescriptor[] {
                    name,
                },
                new Object[] {
                    "changed",
                },
                filter);
    }

