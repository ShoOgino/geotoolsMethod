    /**
     * This test tests for custom unit of measurement features, where the feature size translates to
     * something 0 < size < 1. in this case, an infinite loop used to occur, see
     * https://jira.codehaus.org/browse/GEOT-4284
     *
     * @throws Exception
     */
    public void testLineLabelingUom() throws Exception {
        FeatureCollection collection = createLineFeatureCollection();
        Style style = loadStyle("LineStyleUom.sld");
        assertNotNull(style);
        MapContent map = new MapContent();
        map.addLayer(new FeatureLayer(collection, style));

        StreamingRenderer renderer = new StreamingRenderer();
        renderer.setMapContent(map);
        ReferencedEnvelope env = map.getMaxBounds();
        int boundary = 10000;
        env =
                new ReferencedEnvelope(
                        env.getMinX() - boundary,
                        env.getMaxX() + boundary,
                        env.getMinY() - boundary,
                        env.getMaxY() + boundary,
                        null);

        RendererBaseTest.showRender("testLineLabeling", renderer, timout, env);
    }

