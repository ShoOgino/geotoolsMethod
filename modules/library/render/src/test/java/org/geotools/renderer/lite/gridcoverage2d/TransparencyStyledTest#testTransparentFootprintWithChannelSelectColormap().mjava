    /**
     * Test transparency is preserved when applying a ChannelSelect and Colormap style to an
     * imageMosaic with Transparent Footprint setting.
     */
    @Test
    public void testTransparentFootprintWithChannelSelectColormap()
            throws IOException, NoSuchAuthorityCodeException, FactoryException {
        File mosaicDirectory = prepareDirectory("footprintCSCM");
        GridCoverage2D gc = readCoverage(mosaicDirectory, FootprintBehavior.Transparent, null);

        GridCoverage2D output = (GridCoverage2D) symbolizeRaster(gc, "graychannelcolormap.sld");
        RenderedImage ri = output.getRenderedImage();

        // Assert the alpha band has been preserved, even with a ChannelSelect SLD in place
        assertHasAlpha(ri);
        disposeCoverage((GridCoverage2D) output);
    }

