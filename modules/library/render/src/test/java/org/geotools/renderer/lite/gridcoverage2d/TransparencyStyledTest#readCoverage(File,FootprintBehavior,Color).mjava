    private GridCoverage2D readCoverage(
            File mosaicDirectory, FootprintBehavior fp, Color transparentColor)
            throws NoSuchAuthorityCodeException, FactoryException, IOException {

        ImageMosaicReader reader =
                (ImageMosaicReader)
                        new ImageMosaicFormatFactory().createFormat().getReader(mosaicDirectory);

        ParameterValue<String> footprintBehaviorParam =
                AbstractGridFormat.FOOTPRINT_BEHAVIOR.createValue();
        footprintBehaviorParam.setValue(fp.name());

        ParameterValue<Color> inputTransparentColor =
                AbstractGridFormat.INPUT_TRANSPARENT_COLOR.createValue();
        inputTransparentColor.setValue(transparentColor);

        GeneralParameterValue[] readParams = {footprintBehaviorParam, inputTransparentColor};
        GridCoverage2D coverage = reader.read(readParams);

        reader.dispose();
        assertNotNull(coverage);
        return coverage;
    }

