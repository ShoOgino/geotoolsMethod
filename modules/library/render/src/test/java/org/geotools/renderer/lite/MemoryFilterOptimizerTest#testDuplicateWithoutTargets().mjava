    @Test
    public void testDuplicateWithoutTargets() {
        MemoryFilterOptimizer optimizer =
                new MemoryFilterOptimizer(roadType, Collections.emptySet());

        final And copy = (And) and.accept(optimizer, null);

        // filters are not memoized, but property accesses should be indexed now
        List<Filter> children = copy.getChildren();
        PropertyIsEqualTo equalNameCopy = (PropertyIsEqualTo) children.get(0);
        PropertyIsEqualTo equalIdCopy = (PropertyIsEqualTo) children.get(1);

        assertFalse(Proxy.isProxyClass(equalNameCopy.getClass()));
        assertFalse(Proxy.isProxyClass(equalIdCopy.getClass()));

        checkPropertiesIndexed(equalNameCopy, equalIdCopy);
    }

