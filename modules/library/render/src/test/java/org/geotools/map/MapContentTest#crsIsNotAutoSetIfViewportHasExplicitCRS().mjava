    @Test
    public void crsIsNotAutoSetIfViewportHasExplicitCRS() {
        MapContent map = new MapContent();
        MapViewport viewport = new MapViewport();
        
        // Explicitly set the CRS. Even though it is the default viewport CRS
        // it will be treated as an explicit (user-set) value
        viewport.setCoordinateReferenceSystem(MapViewport.DEFAULT_CRS);

        map.setViewport(viewport);
        
        Layer layerWithCRS = new MockLayer(WORLD_ENV);
        map.addLayer(layerWithCRS);

        assertTrue(viewport.isEditable());
        
        assertEquals(MapViewport.DEFAULT_CRS, map.getCoordinateReferenceSystem());

        assertFalse(WORLD_ENV.getCoordinateReferenceSystem().equals(
                map.getCoordinateReferenceSystem()));
    }

