    /**
     * Test transparency is preserved when applying an RGB ChannelSelect and ContrastEnhancement style 
     * to an imageMosaic with transparent color being set
     */
    @Test
    public void testRGBAWithContrastEnhancementInChannelSelect()
            throws IOException, NoSuchAuthorityCodeException, FactoryException {
        GeoTiffReader reader = new GeoTiffReader(TestData.file(this, "map.tif"));
        GridCoverage2D gc = reader.read(null);

        RenderedImage ri = gc.getRenderedImage();
        GridCoverage2D output = (GridCoverage2D) symbolizeRaster(gc, "ce_cs.sld");
        ri = output.getRenderedImage();

        // Assert the alpha band has been preserved, even with a CS+CE SLD in place
        assertHasAlpha(ri);
       
        disposeCoverage(output);
    }

