    @Test
    public void testOversamplingOnLayoutHelperArithmetic() throws Exception {

        URL coverageFile =
                org.geotools.test.TestData.url(GridCoverageRendererTest.class, "arithmetic.tif");
        GeoTiffReader reader = new GeoTiffReader(coverageFile);
        GridCoverage2D coverage = reader.read(null);
        CoordinateReferenceSystem crs = reader.getCoordinateReferenceSystem();

        // Setup params for a tiny bbox and oversampling
        ReferencedEnvelope mapExtent =
                new ReferencedEnvelope(
                        244897.2157599071,
                        244897.2203125144,
                        202588.4763366661,
                        202588.4808892734,
                        crs);
        Rectangle screenSize = new Rectangle(0, 0, 200, 200);
        AffineTransform w2s =
                new AffineTransform(
                        43930.870040629205,
                        0.0,
                        0.0,
                        -43930.870040629205,
                        -1.0758547758860409E10,
                        8.899888225675163E9);
        GridCoverageRenderer renderer = new GridCoverageRenderer(crs, mapExtent, screenSize, w2s);

        RasterSymbolizer rasterSymbolizer = new RasterSymbolizerImpl();

        RenderedImage rendered =
                renderer.renderImage(
                        coverage,
                        rasterSymbolizer,
                        Interpolation.getInstance(Interpolation.INTERP_NEAREST),
                        Color.RED,
                        200,
                        200);
        // No java.lang.ArithmeticException: / by zero occurred
        assertTrue(rendered.getWidth() > 0);
        assertTrue(rendered.getHeight() > 0);

        coverage.dispose(true);
    }

