    @Test
    public void testMemoizeDefaultGeometry() {
        PropertyName property = ff.property("");

        MemoryFilterOptimizer optimizer =
                new MemoryFilterOptimizer(roadType, Collections.singleton(property));
        PropertyName memoized = (PropertyName) property.accept(optimizer, null);

        SimpleFeature spy = Mockito.spy(roadFeatures[0]);
        assertSame(roadFeatures[0].getDefaultGeometry(), memoized.evaluate(spy));
        assertSame(roadFeatures[0].getDefaultGeometry(), memoized.evaluate(spy));

        // check the default geometry property has been called once only
        Mockito.verify(spy, Mockito.times(1)).getDefaultGeometry();
    }

