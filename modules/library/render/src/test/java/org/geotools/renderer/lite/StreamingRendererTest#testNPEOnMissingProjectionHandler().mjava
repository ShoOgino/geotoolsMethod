    @Test
    public void testNPEOnMissingProjectionHandler() throws FactoryException, TransformException {
        StreamingRendererTester tester = new StreamingRendererTester();
        String wkt =
                "PROJCS[\"World_Eckert_IV\",GEOGCS[\"WGS_1984\",DATUM[\"WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Eckert_IV\"],PARAMETER[\"Central_Meridian\",0.0],UNIT[\"Meter\",1.0]]";
        CoordinateReferenceSystem eckert = CRS.parseWKT(wkt);
        ReferencedEnvelope re = new ReferencedEnvelope(-100, 100, -100, 100, eckert);

        // this call used to throw a NPE
        ReferencedEnvelope reprojected = tester.transformEnvelope(re, DefaultGeographicCRS.WGS84);
        assertFalse(reprojected.isNull());
    }

