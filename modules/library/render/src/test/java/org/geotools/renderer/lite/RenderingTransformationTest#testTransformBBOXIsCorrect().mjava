    @Test
    public void testTransformBBOXIsCorrect() throws Exception {
        Style style = RendererBaseTest.loadStyle(this, "noop_colormap.sld");
        GeoTiffReader reader = new GeoTiffReader(TestData.file(this, "watertemp.tiff"));
        MapContent mc = new MapContent();
        mc.addLayer(new GridReaderLayer(reader, style));

        StreamingRenderer renderer = new StreamingRenderer();
        renderer.setMapContent(mc);

        CRSAuthorityFactory factory = CRS.getAuthorityFactory(true);
        CoordinateReferenceSystem crs = factory.createCoordinateReferenceSystem("EPSG:4326");

        ReferencedEnvelope reWgs84 = new ReferencedEnvelope(
            9.848993475036622,
            11.958867853088378,
            40.74254816253662,
            41.64941961090088,
            crs);

        BufferedImage image = RendererBaseTest.showRender("Transform BBOX", renderer,  4000, reWgs84);
        //last pixel is white when doing a transformation and the rendering transform BBOX transforms are
        //incorrect, it shouldn't be
        assertNotEquals(Color.WHITE, getPixelColor(image, 299, 0));
        assertEquals(new Color(133, 130, 188), getPixelColor(image, 299, 0));
    }

