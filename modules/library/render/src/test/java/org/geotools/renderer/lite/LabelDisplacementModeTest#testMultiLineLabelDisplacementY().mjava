    // https://osgeo-org.atlassian.net/browse/GEOS-8975
    // https://osgeo-org.atlassian.net/projects/GEOT/issues/GEOT-6253
    @Test
    public void testMultiLineLabelDisplacementY() throws Exception {
        GeometryFactory gf = new GeometryFactory();

        SimpleFeatureTypeBuilder builder = new SimpleFeatureTypeBuilder();
        builder.add("the_geom", LineString.class);
        builder.add("TEXTSTRING", String.class);
        builder.add("FONTNAME", String.class);
        builder.add("FONTSIZE", Integer.class);
        builder.add("FONTSTYLE", String.class);
        builder.add("ANGLE", Integer.class);
        builder.add("ANCHORY", Integer.class);
        builder.setName("geos8975");
        SimpleFeatureType type = builder.buildFeatureType();

        // a horizontal line with label with line breaks
        // Formata-CondensedMedium(windows) ,// Formata-Condensed(other OS) was reported.
        SimpleFeature f11 =
                SimpleFeatureBuilder.build(
                        type,
                        new Object[] {
                            gf.createLineString( // straight line
                                    new Coordinate[] {
                                        new Coordinate(2, 5),
                                        new Coordinate(3, 5),
                                        new Coordinate(4, 5),
                                        new Coordinate(5, 5),
                                        new Coordinate(6, 5),
                                        new Coordinate(7, 5),
                                        new Coordinate(8, 5)
                                    }),
                            "Espace\nPierrey\nBetazg", // label with decender and line breaks
                            "Bitstream Vera Sans",
                            10,
                            "Bold",
                            0,
                            0 // anchorY
                        },
                        null);
        SimpleFeature f12 =
                SimpleFeatureBuilder.build(
                        type,
                        new Object[] {
                            gf.createLineString( // straight line
                                    new Coordinate[] {
                                        new Coordinate(2, 3),
                                        new Coordinate(3, 3),
                                        new Coordinate(4, 3),
                                        new Coordinate(5, 3),
                                        new Coordinate(6, 3),
                                        new Coordinate(7, 3),
                                        new Coordinate(8, 3)
                                    }),
                            "Liney 1\nLineg", // label with decender and line breaks
                            "Bitstream Vera Sans",
                            10,
                            "Bold",
                            0,
                            1 // anchorY
                        },
                        null);

        Style style =
                RendererBaseTest.loadStyle(
                        this, "displacementMode/testMultiLineLabelDisplacementY.sld");
        Assert.assertNotNull(style);

        MemoryDataStore data = new MemoryDataStore();

        data.addFeature(f11);
        data.addFeature(f12);

        SimpleFeatureSource fs3 = data.getFeatureSource("geos8975");

        BufferedImage image = renderLabels(fs3, style, "GEOS-8975, Multi Line Label Placement");
        //        ImageIO.write(
        //                image,
        //                "PNG",
        //                new File(
        //
        // "./src/test/resources/org/geotools/renderer/lite/test-data/displacementMode/testMultiLineLabelDisplacementY.png"));

        String refPath =
                "./src/test/resources/org/geotools/renderer/lite/test-data/displacementMode/testMultiLineLabelDisplacementY.png";
        // java 11 makes chars quite a bit bolder
        int tolerance = 2000;
        ImageAssert.assertEquals(new File(refPath), image, tolerance);
    }

