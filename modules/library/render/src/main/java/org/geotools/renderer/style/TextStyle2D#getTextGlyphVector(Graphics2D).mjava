    /** Gets the glyph vector for the main font */
    public GlyphVector getTextGlyphVector(Graphics2D graphics) {
        // arabic and hebrew are scripted and right to left, they do require full layout
        // whilst western chars are easier to deal with. Find out which case we're dealing with,
        // and create the glyph vector with the appropriate call
        final char[] chars = label.toCharArray();
        final int length = label.length();
        if (Bidi.requiresBidi(chars, 0, length)
                && new Bidi(label, Bidi.DIRECTION_DEFAULT_LEFT_TO_RIGHT).isRightToLeft()) {
            textGlyphVector =
                    getFont()
                            .layoutGlyphVector(
                                    graphics.getFontRenderContext(),
                                    chars,
                                    0,
                                    length,
                                    Font.LAYOUT_RIGHT_TO_LEFT);
        } else {
            textGlyphVector = getFont().createGlyphVector(graphics.getFontRenderContext(), chars);
        }
        return textGlyphVector;
    }

