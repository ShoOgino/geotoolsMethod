    /**
     * Builds a new transformed icon
     *
     * @param icon The icon to be rescaled
     * @param transformation The icon transformation
     */
    public TransformedIcon(Icon icon, AffineTransform at) {
        this.icon = icon;
        this.at = at;
        Rectangle2D bounds =
                new Rectangle2D.Double(0, 0, icon.getIconWidth(), icon.getIconHeight());
        bounds = at.createTransformedShape(bounds).getBounds2D();
        this.width = (int) Math.round(bounds.getWidth());
        this.height = (int) Math.round(bounds.getHeight());
    }

