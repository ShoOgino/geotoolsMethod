    private ReferencedEnvelope transformEnvelope(
            ReferencedEnvelope envelope, CoordinateReferenceSystem crs)
            throws TransformException, FactoryException {
        try {
            ProjectionHandler projectionHandler =
                    ProjectionHandlerFinder.getHandler(envelope, crs, isMapWrappingEnabled());
            return projectionHandler.transformEnvelope(envelope, crs);
        } catch (FactoryException e) {
            return envelope.transform(crs, true);
        }
    }

