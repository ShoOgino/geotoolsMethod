        public void run() {
            thread = Thread.currentThread();
            boolean done = false;
            while (!done) {
                try {
                    List<RenderingRequest> localRequests = new ArrayList<>();
                    RenderingRequest request = requests.take();

                    requests.drainTo(localRequests);
                    localRequests.add(0, request);

                    for (RenderingRequest r : localRequests) {
                        if (r instanceof EndRequest || renderingStopRequested) {
                            done = true;
                            break;
                        } else {
                            r.execute();
                        }
                    }
                } catch (InterruptedException e) {
                    // ok, we might have been interrupted to stop processing
                    if (renderingStopRequested) {
                        done = true;
                    }
                } catch (Throwable t) {
                    fireErrorEvent(t);
                }
            }
        }

