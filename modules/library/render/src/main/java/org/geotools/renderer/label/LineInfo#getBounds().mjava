    Rectangle2D getBounds() {
        Rectangle2D vb = null;
        for (LineComponent lineComponent : components) {
            Rectangle2D componentVisualBounds = lineComponent.getGlyphVector().getVisualBounds();
            Rectangle2D componentLogicalBounds = lineComponent.getGlyphVector().getLogicalBounds();
            // the logical bounds include the spaces, we want them in the horizontal direction
            // in order to compose the element in the row, but we need the visual bounds for
            // vertical alignment
            Rectangle2D componentBounds =
                    new Rectangle2D.Double(
                            componentLogicalBounds.getX(),
                            componentVisualBounds.getY(),
                            componentLogicalBounds.getWidth(),
                            componentVisualBounds.getHeight());
            if (vb == null) {
                vb = componentBounds;
            } else {
                Rectangle2D other =
                        new Rectangle2D.Double(
                                vb.getMaxX(),
                                vb.getMinY(),
                                componentBounds.getWidth(),
                                componentBounds.getHeight());
                vb = vb.createUnion(other);
            }
        }

        return vb;
    }

