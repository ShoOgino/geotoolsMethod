    Style2D createLineStyle(Object feature, LineSymbolizer symbolizer, Range scaleRange) {
        // see if we have some information about the composite
        float opacity = 1f;
        if (symbolizer.getStroke() != null) {
            opacity = evalOpacity(symbolizer.getStroke().getOpacity(), feature);
        }
        Composite composite = getComposite(symbolizer.getOptions(), opacity);
        if (composite == null) {
            composite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, opacity);
        }

        LineStyle2D style = new LineStyle2D();
        setScaleRange(style, scaleRange);
        style.setStroke(getStroke(symbolizer.getStroke(), feature));
        // if graphic stroke has a wkt marker with MarkAlongLine vendor option set to true
        // dont use graphic stroke instead configure style to drape wkt along the line
        if (!setMarkAlongLineStroke(style, symbolizer, (Feature) feature))
            style.setGraphicStroke(
                    getGraphicStroke(symbolizer, symbolizer.getStroke(), feature, scaleRange));

        style.setContour(getStrokePaint(symbolizer.getStroke(), feature));
        style.setContourComposite(composite);

        style.setPerpendicularOffset(
                evalToDouble(symbolizer.getPerpendicularOffset(), feature, 0d));

        return style;
    }

