    /**
     * Returns the definition query (filter) for this layer. If no definition query has been defined
     * {@link Query.ALL} is returned.
     *
     * @return the definition query established for this layer. If not set, just returns {@link
     *     Query.ALL}, if set, returns a copy of the actual query object to avoid external
     *     modification
     */
    public Query getQuery() {
        Query query = internal.getQuery();
        if (query == null || query == Query.ALL) {
            return Query.ALL;
        } else {
            // note query is already a copy
            return query;
        }
        //        if( internal instanceof FeatureLayer ){
        //            FeatureLayer layer = (FeatureLayer) internal;
        //            Query query = layer.getQuery();
        //            if( query == null || query == Query.ALL){
        //                return Query.ALL;
        //            }
        //            else {
        //                return new Query( query );
        //            }
        //        }
        //        return Query.ALL;
    }

