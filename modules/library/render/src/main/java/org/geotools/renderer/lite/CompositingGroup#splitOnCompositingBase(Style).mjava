    private static List<Style> splitOnCompositingBase(Style style) {
        List<Style> styles = new ArrayList<>();
        List<FeatureTypeStyle> featureTypeStyles = new ArrayList<>();
        for (FeatureTypeStyle fts : style.featureTypeStyles()) {
            if (isCompositingBase(fts)) {
                addToStyles(styles, featureTypeStyles);
            }
            featureTypeStyles.add(fts);
        }

        addToStyles(styles, featureTypeStyles);
        // move the background definition to the first element in the compositing stack
        styles.get(0).setBackground(style.getBackground());

        return styles;
    }

