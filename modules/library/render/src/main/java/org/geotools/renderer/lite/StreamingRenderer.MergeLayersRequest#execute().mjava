        @Override
        void execute() {
            if (graphics instanceof DelayedBackbufferGraphic) {
                ((DelayedBackbufferGraphic) graphics).init();
            }

            for (LiteFeatureTypeStyle currentLayer : lfts) {
                // first fts won't have an image, it's using the user provided graphics
                // straight, so we don't need to compose it back in.
                final Graphics2D ftsGraphics = currentLayer.graphics;
                if (ftsGraphics instanceof DelayedBackbufferGraphic && !(ftsGraphics == graphics)) {
                    BufferedImage image = ((DelayedBackbufferGraphic) ftsGraphics).image;
                    if (currentLayer.composite == null) {
                        graphics.setComposite(AlphaComposite.SrcOver);
                    } else {
                        // we may have not found anything to paint, in that case the delegate
                        // has not been initialized
                        if (image == null) {
                            Rectangle size = ((DelayedBackbufferGraphic) ftsGraphics).screenSize;
                            image =
                                    new BufferedImage(
                                            size.width, size.height, BufferedImage.TYPE_4BYTE_ABGR);
                        }
                        graphics.setComposite(currentLayer.composite);
                    }
                    if (image != null) {
                        graphics.drawImage(image, 0, 0, null);
                        ftsGraphics.dispose();
                    }
                }
            }
        }

