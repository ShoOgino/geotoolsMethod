    /** Extract min and max parameter values from the ContrastMethod parameters map */
    private static Map<String, Object> getMinMaxParams(Map<String, Expression> parameters) {
        Expression min = parameters.get(KEY_MIN);
        Expression max = parameters.get(KEY_MAX);
        if (min == null || max == null) {
            throw new IllegalArgumentException(
                    Errors.format(ErrorKeys.ILLEGAL_ARGUMENT_PARAMETERS_$2, KEY_MIN, KEY_MAX));
        }
        Map<String, Object> params = new HashMap<>();
        Number minVal = min.evaluate(null, Double.class);
        Number maxVal = max.evaluate(null, Double.class);
        if (minVal == null || maxVal == null) {
            throw new IllegalArgumentException(
                    Errors.format(ErrorKeys.ILLEGAL_ARGUMENT_PARAMETERS_$2, KEY_MIN, KEY_MAX));
        }
        params.put(KEY_MIN, minVal.doubleValue());
        params.put(KEY_MAX, maxVal.doubleValue());
        return params;
    }

