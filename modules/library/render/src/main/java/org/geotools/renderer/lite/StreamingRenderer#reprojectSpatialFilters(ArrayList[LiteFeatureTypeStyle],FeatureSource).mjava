    /**
     * Reprojects the spatial filters in each {@link LiteFeatureTypeStyle} so that they match
     * the feature source native coordinate system
     * @param lfts
     * @param fs 
     * @throws FactoryException 
     */
    void reprojectSpatialFilters(final ArrayList<LiteFeatureTypeStyle> lfts, FeatureSource fs) throws FactoryException {
        // compute the default SRS of the feature source
        FeatureType schema = fs.getSchema();
        CoordinateReferenceSystem declaredCRS = schema.getCoordinateReferenceSystem();
        if(isEPSGAxisOrderForced()) {
            Integer code = CRS.lookupEpsgCode(declaredCRS, false);
            if(code != null) {
                declaredCRS = CRS.decode("urn:ogc:def:crs:EPSG::" + code);
            }
        }

        // reproject spatial filters in each fts
        for (LiteFeatureTypeStyle fts : lfts) {
            reprojectSpatialFilters(fts, declaredCRS, schema);
        }
    }

