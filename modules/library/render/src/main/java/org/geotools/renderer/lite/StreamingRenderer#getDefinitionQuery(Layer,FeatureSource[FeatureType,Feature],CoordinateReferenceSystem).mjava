    Query getDefinitionQuery(
            Layer currLayer,
            FeatureSource<FeatureType, Feature> source,
            CoordinateReferenceSystem featCrs)
            throws FactoryException {
        // now, if a definition query has been established for this layer, be
        // sure to respect it by combining it with the bounding box one.
        Query definitionQuery = reprojectQuery(currLayer.getQuery(), source);
        definitionQuery.setCoordinateSystem(featCrs);

        return definitionQuery;
    }

