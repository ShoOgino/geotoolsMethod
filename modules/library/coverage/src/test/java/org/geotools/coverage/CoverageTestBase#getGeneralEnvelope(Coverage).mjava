    /**
     * Returns the envelope of the given coverage as a {@link GeneralEnvelope} implementation.
     *
     * @param coverage The coverage for which to get the envelope.
     * @return The envelope of the given coverage (never {@code null}).
     */
    protected static GeneralEnvelope getGeneralEnvelope(final Coverage coverage) {
        final Envelope envelope = coverage.getEnvelope();
        assertNotNull(envelope);
        assertEquals(
                coverage.getCoordinateReferenceSystem(), envelope.getCoordinateReferenceSystem());
        if (coverage instanceof GeneralEnvelope) {
            return (GeneralEnvelope) envelope;
        } else {
            return new GeneralEnvelope(envelope);
        }
    }

