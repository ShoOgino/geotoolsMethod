    @Test
    public void testCacheCleanup() {
        // make sure the tile cache is empty
        TileCache tc = JAI.getDefaultInstance().getTileCache();
        tc.flush();
        
        testMosaicWithAnotherNoData();
        
        // the cleanup was full, no leftovers
        assertEquals(0, ((CacheDiagnostics) tc).getCacheTileCount());
        assertEquals(0, ((CacheDiagnostics) tc).getCacheMemoryUsed());
    }

