    /**
     * Creates a simple 128x128 {@link RenderedImage} for testing purposes.
     *
     * @param maximum
     * @return
     */
    private static RenderedImage getSynthetic(final double maximum) {
        final int width = 128;
        final int height = 128;
        final WritableRaster raster =
                RasterFactory.createBandedRaster(DataBuffer.TYPE_DOUBLE, width, height, 1, null);
        // random, but repeatable, by using a fixed seed value
        final Random random = new Random(1);
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                raster.setSample(x, y, 0, Math.ceil(random.nextDouble() * maximum));
            }
        }
        final ColorModel cm =
                new ComponentColorModelJAI(
                        ColorSpace.getInstance(ColorSpace.CS_GRAY),
                        false,
                        false,
                        Transparency.OPAQUE,
                        DataBuffer.TYPE_DOUBLE);
        final BufferedImage image = new BufferedImage(cm, raster, false, null);
        return image;
    }

