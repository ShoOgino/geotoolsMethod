    @Test
    public void rescaleToBytesNoData(){
        assertTrue("Assertions should be enabled.", ImageWorker.class.desiredAssertionStatus());
        
        // set up synthetic images for testing
        final RenderedImage test3 = getSynthetic(20000);
        ImageWorker worker = new ImageWorker(test3);
        Range noData = RangeFactory.convert(RangeFactory.create(-10, -10), test3.getSampleModel().getDataType());
        worker.setNoData(noData);
        worker.rescaleToBytes();
        RenderedImage image = worker.getRenderedImage();
        
        // check the nodata has been actually set
        Object property = image.getProperty(NoDataContainer.GC_NODATA);
        assertNotEquals(property, Image.UndefinedProperty);
        assertThat(property, instanceOf(NoDataContainer.class));
        NoDataContainer nd = (NoDataContainer) property;
        assertEquals(-10, nd.getAsSingleValue(), 0d);
    }

