    /**
     * Creates a grid coverage with real world coordinates x0, y0, and given width and height. The
     * raster backing it has the same dimensions, but it's always located in the origin.
     */
    public GridCoverage2D createGradientCoverage(int x0, int y0, int width, int height, ROI roi) {
        final BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
        final WritableRaster raster = (WritableRaster) image.getData();
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                raster.setSample(x, y, 0, x + y);
            }
        }
        image.setData(raster);
        PlanarImage pi = PlanarImage.wrapRenderedImage(image);
        Map<String, Object> coverageProperties = new HashMap<>();
        if (roi != null) {
            pi.setProperty("roi", roi);
            CoverageUtilities.setROIProperty(coverageProperties, roi);
        }
        return GRID_COVERAGE_FACTORY.create(
                "Test coverage",
                pi,
                new Envelope2D(DefaultEngineeringCRS.GENERIC_2D, x0, y0, width, height),
                null,
                null,
                coverageProperties);
    }

