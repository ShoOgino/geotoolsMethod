    @Test
    public void testForceComponentColorModelIncompletePalette() throws IOException {
        // small palette, but the image has values above it 
        BufferedImage bi = getSyntheticGrayIndexed(10);
        ImageWorker iw = new ImageWorker(bi);
        iw.setBackground(new double[] {255, 255, 255});
        iw.forceComponentColorModel();
        // used to crash here
        RenderedImage ri = iw.getRenderedImage();
        int[] pixel = new int[2];
        ri.getData().getPixel(256, 256, pixel);
        assertEquals(255, pixel[0]);
        assertEquals(255, pixel[1]);
    }

