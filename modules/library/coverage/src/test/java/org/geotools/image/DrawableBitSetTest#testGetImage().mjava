    @Test
    public void testGetImage() {
        DrawableBitSet bitset = new DrawableBitSet(WIDTH, HEIGHT);
        // Draw a rectangle
        Shape rectangle = new Rectangle(MIN, MIN, SIZE, SIZE);
        bitset.set(rectangle);
        BufferedImage image = bitset.getImage();
        assertNotNull(image);
        Raster raster = image.getData();
        assertNotNull(raster);
        int sample;
        int setPixel = 0;
        for (int i = 0; i < WIDTH; i++) {
            for (int j = 0; j < HEIGHT; j++) {
                sample = raster.getSample(i, j, 0);
                if ((i >= MIN && j >= MIN && i <= MAX && j <= MAX)) {
                    // Check pixels within the rectangle have been set
                    assertEquals(1, sample);
                    setPixel++;
                } else {
                    assertEquals(0, sample);
                }
            }
        }
        assertEquals(SET_PIXELS, setPixel);
    }

