    @Test
    @SuppressWarnings("PMD.SystemPrintln")
    public void testYCbCr() {
        assertTrue("Assertions should be enabled.", ImageWorker.class.desiredAssertionStatus());
        // check the presence of the PYCC.pf file that contains the profile for the YCbCr color
        // space
        if (ImageWorker.CS_PYCC == null) {
            System.out.println(
                    "testYCbCr disabled since we are unable to locate the YCbCr color profile");
            return;
        }
        // RGB component color model
        ImageWorker worker = new ImageWorker(getSyntheticRGB(false));

        RenderedImage image = worker.getRenderedImage();
        assertNoData(image, null);
        assertTrue(image.getColorModel() instanceof ComponentColorModel);
        assertFalse(image.getColorModel().hasAlpha());
        int sample = image.getTile(0, 0).getSample(0, 0, 2);
        assertEquals(0, sample);

        assertFalse(worker.isColorSpaceYCbCr());
        worker.forceColorSpaceYCbCr();
        assertTrue(worker.isColorSpaceYCbCr());
        worker.forceColorSpaceRGB();
        assertFalse(worker.isColorSpaceYCbCr());
        assertTrue(worker.isColorSpaceRGB());

        // RGB Palette
        worker.forceBitmaskIndexColorModel();
        image = worker.getRenderedImage();
        assertNoData(image, null);
        assertTrue(image.getColorModel() instanceof IndexColorModel);
        assertFalse(image.getColorModel().hasAlpha());

        assertFalse(worker.isColorSpaceYCbCr());
        worker.forceColorSpaceYCbCr();
        assertTrue(worker.isColorSpaceYCbCr());
        worker.forceColorSpaceRGB();
        assertFalse(worker.isColorSpaceYCbCr());
        assertTrue(worker.isColorSpaceRGB());

        // RGB DirectColorModel
        worker = new ImageWorker(getSyntheticRGB(true));
        image = worker.getRenderedImage();
        assertNoData(image, null);
        assertTrue(image.getColorModel() instanceof DirectColorModel);
        assertFalse(image.getColorModel().hasAlpha());
        sample = image.getTile(0, 0).getSample(0, 0, 2);
        assertEquals(0, sample);

        assertFalse(worker.isColorSpaceYCbCr());
        worker.forceColorSpaceYCbCr();
        assertTrue(worker.isColorSpaceYCbCr());
        worker.forceColorSpaceRGB();
        assertFalse(worker.isColorSpaceYCbCr());
        assertTrue(worker.isColorSpaceRGB());
    }

