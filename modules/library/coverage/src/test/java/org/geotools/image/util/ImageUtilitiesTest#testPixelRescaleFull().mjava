    @Test
    public void testPixelRescaleFull() throws Exception {
        BufferedImage bi = new BufferedImage(100, 100, BufferedImage.TYPE_BYTE_GRAY);
        bi.getRaster().getDataBuffer().setElemDouble(0, 0, 10);
        RenderedImage result =
                ImageUtilities.applyRescaling(new Double[] {10d}, new Double[] {1d}, bi, null);
        assertEquals(DataBuffer.TYPE_DOUBLE, result.getSampleModel().getDataType());
        assertThat(result.getColorModel(), CoreMatchers.instanceOf(ComponentColorModel.class));
        double[] pixel = new double[1];
        result.getData().getPixel(0, 0, pixel);
        assertEquals(101, pixel[0], 0d);
    }

