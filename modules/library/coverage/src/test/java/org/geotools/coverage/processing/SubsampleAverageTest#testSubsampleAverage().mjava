    /** Tests the "SubsampleAverage" operation. */
    @Test
    public void testSubsampleAverage() {
        final GridCoverage2D originallyIndexedCoverage = EXAMPLES.get(0);
        final GridCoverage2D indexedCoverage = EXAMPLES.get(2);
        final GridCoverage2D indexedCoverageWithTransparency = EXAMPLES.get(3);
        final GridCoverage2D floatCoverage = EXAMPLES.get(4);

        // On this one the Subsample average should do an RGB expansion.
        subsampleAverage(indexedCoverage);

        // On this one the Subsample average should do an RGB expansion preserving alpha.
        subsampleAverage(indexedCoverageWithTransparency);
        subsampleAverage(originallyIndexedCoverage);
        subsampleAverage(floatCoverage);

        // Play with a rotated coverage.
        subsampleAverage(rotate(floatCoverage, Math.PI / 4));
    }

