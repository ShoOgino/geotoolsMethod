    /**
     * Creates a raster of the given type. Because we use only one tile with one band, the code
     * below is pretty similar to the code we would have if we were just setting the values in a
     * matrix.
     */
    private static GridCoverage2D createRaster(final int type) {
        final int width = 500;
        final int height = 500;
        final WritableRaster raster =
                RasterFactory.createBandedRaster(type, width, height, 1, null);
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                // We exploit the clamping capabilities of the sample model.
                raster.setSample(x, y, 0, x + y);
            }
        }
        final CoordinateReferenceSystem crs = DefaultGeographicCRS.WGS84;
        final Envelope envelope = new Envelope2D(crs, 0, 0, 30, 30);
        final GridCoverageFactory factory = CoverageFactoryFinder.getGridCoverageFactory(null);
        return factory.create("My grayscale float coverage", raster, envelope);
    }

