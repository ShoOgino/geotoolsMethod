    @Test
    public void testWarpROITileSize() {
        assertTrue("Assertions should be enabled.", ImageWorker.class.desiredAssertionStatus());
        ImageWorker worker = new ImageWorker(gray);
        worker.setROI(new ROIShape(new Rectangle(0, 0, gray.getWidth(), gray.getHeight())));
        RenderedImage image = worker.getRenderedImage();
        assertNotEquals(java.awt.Image.UndefinedProperty, image.getProperty("ROI"));

        ImageWorker iw = new ImageWorker(image);
        iw.warp(
                new WarpAffine(AffineTransform.getScaleInstance(0.5, 0.5)),
                Interpolation.getInstance(Interpolation.INTERP_NEAREST));
        RenderedImage warped = iw.getRenderedImage();

        assertNotEquals(java.awt.Image.UndefinedProperty, warped.getProperty("ROI"));
        ROI warpedROI = (ROI) warped.getProperty("ROI");
        // turned into raster, the ROI has the same tile structure as the image
        assertEquals(ROI.class, warpedROI.getClass());
        assertEquals(warped.getTileWidth(), warpedROI.getAsImage().getTileWidth());
        assertEquals(warped.getTileHeight(), warpedROI.getAsImage().getTileHeight());
    }

