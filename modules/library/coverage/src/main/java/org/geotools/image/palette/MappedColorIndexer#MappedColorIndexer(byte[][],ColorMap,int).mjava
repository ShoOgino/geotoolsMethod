    /**
     * Builds a new {@link MappedColorIndexer}
     * 
     * @param colors The target palette
     * @param colorMap The color map used to build the palette, mapping from shifted colors to the
     *        palette index
     * @param shift The bit shift applied while building the palette
     */
    public MappedColorIndexer(byte[][] colors, ColorMap colorMap, int shift) {
        this.colors = colors;
        this.shift = shift;
        this.colorMap = colorMap;
        this.delegate = new SimpleColorIndexer(colors);
    }

