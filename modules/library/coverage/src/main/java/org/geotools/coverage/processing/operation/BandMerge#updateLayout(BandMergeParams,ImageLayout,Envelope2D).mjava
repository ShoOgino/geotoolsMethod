    /**
     * This method is used for setting the final image layout.
     *
     * @param parameters
     * @param layout
     * @param bbox
     */
    private void updateLayout(
            final BandMergeParams parameters, ImageLayout layout, Envelope2D bbox) {
        // Creation of a GridGeoemtry with the selected BBOX and the defined World2Grid
        // transformation
        GridGeometry2D gg2D =
                new GridGeometry2D(PixelInCell.CELL_CORNER, parameters.gridToCRS, bbox, null);

        // Selection of the GridEnvelope from the GridGeometry for using it as the new Layout
        GridEnvelope2D gridRange2D = gg2D.getGridRange2D();
        layout.setMinX(gridRange2D.x);
        layout.setMinY(gridRange2D.y);
        layout.setWidth(gridRange2D.width);
        layout.setHeight(gridRange2D.height);
    }

