    /**
     * Returns the range of relative or geophysics values. If the returned range is an instance of
     * {@link MeasurementRange}, then is is a {@linkplain #getGeophysicsRange geophysics range}.
     * Otherwise it is a {@linkplain #getRelativeRange relative range}.
     *
     * @param  category The {@linkplain Category#getName category name}, or
     *         {@link #ANY_QUANTITATIVE_CATEGORY} for fetching the range to
     *         apply to any quantitative category.
     * @return The relative or geophysics range, or {@code null} if none.
     */
    private NumberRange getRange(final CharSequence category) {
        if (colorRanges == null) {
            return null;
        }
        final String name = unlocalized(category);
        NumberRange range = colorRanges.get(name);
        if (range == null) {
            if (name!=null && category instanceof InternationalString) {
                // Unlocalized name not found. Search using the localized flavor.
                range = colorRanges.get(category.toString());
            }
        }
        return range;
    }

