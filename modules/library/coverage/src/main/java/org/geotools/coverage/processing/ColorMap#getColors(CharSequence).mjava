    /**
     * Returns the color ramp for the given category.
     *
     * @param  category The {@linkplain Category#getName category name}, or
     *         {@link #ANY_QUANTITATIVE_CATEGORY} for fetching the colors to
     *         apply to any quantitative category.
     * @return The color ramp, or {@code null} if none.
     */
    public Color[] getColors(final CharSequence category) {
        if (colorMap == null) {
            return null;
        }
        final String name = unlocalized(category);
        Object colors = colorMap.get(name);
        if (colors == null) {
            if (name!=null && category instanceof InternationalString) {
                // Unlocalized name not found. Search using the localized flavor.
                colors = getColors(category.toString());
                if (colors == null) {
                    return null;
                }
            } else {
                return null;
            }
        }
        if (colors instanceof Color) {
            return new Color[] {(Color) colors};
        }
        return ((Color[]) colors).clone();
    }

