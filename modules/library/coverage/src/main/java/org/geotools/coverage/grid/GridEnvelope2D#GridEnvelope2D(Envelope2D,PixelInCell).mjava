    /**
     * Casts the specified envelope into a grid envelope. This is sometime useful after an envelope
     * has been transformed from "real world" coordinates to grid coordinates using the {@linkplain
     * org.opengis.coverage.grid.GridGeometry#getGridToCRS grid to CRS} transform. The floating
     * point values are rounded toward the nearest integers.
     *
     * <p><strong>Notice that highest values are interpreted as non-inclusive</strong>
     *
     * <p><b>Anchor</b><br>
     * According OpenGIS specification, {@linkplain org.opengis.coverage.grid.GridGeometry grid
     * geometry} maps pixel's center. But envelopes typically encompass all pixels. This means that
     * grid coordinates (0,0) has an envelope starting at (-0.5, -0.5). In order to revert back such
     * envelope to a grid envelope, it is necessary to add 0.5 to every coordinates (including the
     * maximum value since it is exclusive in a grid envelope). This offset is applied only if
     * {@code anchor} is {@link PixelInCell#CELL_CENTER}. Users who don't want such offset should
     * specify {@link PixelInCell#CELL_CORNER}.
     *
     * <p>The convention is specified as a {@link PixelInCell} code instead than the more detailed
     * {@link org.opengis.metadata.spatial.PixelOrientation} because the latter is restricted to the
     * two-dimensional case while the former can be used for any number of dimensions.
     *
     * @param envelope The envelope to use for initializing this grid envelope.
     * @param anchor Whatever envelope coordinates map to pixel center or pixel corner. Should be
     *     {@link PixelInCell#CELL_CENTER} for OGC convention (an offset of 0.5 will be added to
     *     every envelope coordinate values), or {@link PixelInCell#CELL_CORNER} for Java2D/JAI
     *     convention (no offset will be added).
     * @throws IllegalArgumentException If {@code anchor} is not valid.
     */
    public GridEnvelope2D(final Envelope2D envelope, final PixelInCell anchor)
            throws IllegalArgumentException {
        this(envelope, anchor, false);
    }

