    /**
     * Returns a copy of current envelope. If no envelope has been {@linkplain #setEnvelope
     * explicitly defined}, then the default is inferred from the CRS (by default a geographic
     * envelope from 180째W to 180째E and 90째S to 90째N).
     */
    public Envelope getEnvelope() {
        if (envelope != null) {
            return envelope.clone();
        } else {
            final CoordinateReferenceSystem crs = getCoordinateReferenceSystem();
            Envelope candidate = CRS.getEnvelope(crs);
            if (candidate == null) {
                final GeneralEnvelope copy = new GeneralEnvelope(crs);
                copy.setToNull();
                candidate = copy;
            }
            return candidate;
        }
    }

