    /**
     * Returns the first implementation of {@link GridCoverageFactory} matching the specified hints.
     * If no implementation matches, a new one is created if possible or an exception is thrown
     * otherwise.
     *
     * @param  hints An optional map of hints, or {@code null} if none.
     * @return The first grid coverage factory that matches the supplied hints.
     * @throws FactoryRegistryException if no implementation was found or can be created for the
     *         {@link GridCoverageFactory} interface.
     *
     * @see Hints#DEFAULT_COORDINATE_REFERENCE_SYSTEM
     * @see Hints#TILE_ENCODING
     */
    public static GridCoverageFactory getGridCoverageFactory(Hints hints)
            throws FactoryRegistryException
    {
        if (hints != null && hints.containsKey(Hints.GRID_COVERAGE_FACTORY)) {
            GridCoverageFactory coverageFactory = (GridCoverageFactory) hints.get(Hints.GRID_COVERAGE_FACTORY);
            if (coverageFactory != null) {
                return coverageFactory;
            }
        }
        synchronized (CoverageFactoryFinder.class) {
            hints = mergeSystemHints(hints);
            return getServiceRegistry().getFactory(GridCoverageFactory.class, null, hints, null);
        }
    }

