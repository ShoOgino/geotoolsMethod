    /**
     * Workaround for RFE #4093999 ("Relax constraint on placement of this()/super() call in
     * constructors").
     */
    private static MathTransform getMathTransform(
            final Rectangle gridRange, final Rectangle2D userRange) {
        final double scaleX = userRange.getWidth() / gridRange.getWidth();
        final double scaleY = userRange.getHeight() / gridRange.getHeight();
        final double transX = userRange.getMinX() - gridRange.x * scaleX;
        final double transY = userRange.getMaxY() + gridRange.y * scaleY;
        final AffineTransform tr = new AffineTransform(scaleX, 0, 0, -scaleY, transX, transY);
        tr.translate(0.5, 0.5); // Maps to pixel center
        return ProjectiveTransform.create(tr);
    }

