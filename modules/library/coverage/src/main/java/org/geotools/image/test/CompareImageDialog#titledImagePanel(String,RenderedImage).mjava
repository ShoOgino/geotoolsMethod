    @SuppressWarnings("deprecation")
    private Component titledImagePanel(String string, RenderedImage expected) {
        JPanel panel = new JPanel(new BorderLayout());
        final JLabel title = new JLabel(string);
        title.setAlignmentX(0.5f);
        title.setBorder(new LineBorder(Color.BLACK));
        panel.add(title, BorderLayout.NORTH);
        panel.add(
                new javax.media.jai.widget.ScrollingImagePanel(
                        expected,
                        Math.min(400, expected.getWidth()),
                        Math.min(400, expected.getHeight())),
                BorderLayout.CENTER);
        return panel;
    }

