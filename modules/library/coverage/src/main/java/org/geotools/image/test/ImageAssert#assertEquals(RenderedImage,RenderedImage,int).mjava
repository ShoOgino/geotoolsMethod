    /**
     * Checks the expected image and the actual image are equals from a human perception p.o.v
     * 
     * @param expectedFile
     * @param actualImage
     * @param threshold
     */
    public static void assertEquals(RenderedImage expectedImage, RenderedImage actualImage,
            int threshold) {
        File expectedFile = new File("target/expected.png");
        try {
            ImageIO.write(expectedImage, "PNG", expectedFile);
            assertEquals(expectedFile, actualImage, threshold, false);
        } catch (IOException e) {
            throw (Error) new AssertionError("Failed to write the image to disk").initCause(e);
        } finally {
            expectedFile.delete();
        }
    }

