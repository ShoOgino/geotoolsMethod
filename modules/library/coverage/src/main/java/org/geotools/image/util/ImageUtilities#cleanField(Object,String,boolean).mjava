    /**
     * Helper that cleans up a field
     *
     * @param theObject
     * @param fieldName
     * @throws NoSuchFieldException
     * @throws IllegalAccessException
     */
    private static void cleanField(Object theObject, String fieldName, boolean superClass)
            throws NoSuchFieldException, IllegalAccessException {
        // getDeclaredField only provides access to current class,
        // not superclass.
        Class<? extends Object> theClass = theObject.getClass();
        if (superClass) {
            theClass = theClass.getSuperclass();
        }
        Field f = theClass.getDeclaredField(fieldName);
        f.setAccessible(true);
        f.set(theObject, null);
    }

