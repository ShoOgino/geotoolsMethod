    private LookupTable createGrayLookupTable(IndexColorModel icm, int numDestinationBands) {
        final int mapSize = icm.getMapSize();
        final short[][] data = new short[numDestinationBands][mapSize];
        for (int i = 0; i < mapSize; i++) {
            data[0][i] = (short) (icm.getRed(i) & 0xFF);
            if (numDestinationBands == 2) data[1][i] = (short) (icm.getAlpha(i) & 0xFF);
        }
        return LookupTableFactory.create(data, true);
    }

