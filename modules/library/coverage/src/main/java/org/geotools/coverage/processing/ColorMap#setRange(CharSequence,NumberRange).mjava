    /**
     * Sets a relative or geophysics range.
     * This method is exclusive with {@link #setGeophysicsRange}.
     *
     * @param category The {@linkplain Category#getName name of the category}
     *        for which to set the relative or geophysics range.
     * @param range The minimal and maximal values for the color ramp.
     */
    private void setRange(final CharSequence category, final NumberRange range) {
        final String name = unlocalized(category);
        if (range != null) {
            if (colorRanges == null) {
                colorRanges = new HashMap<String,NumberRange>();
            }
            colorRanges.put(name, range);
        } else if (colorRanges != null) {
            colorRanges.remove(name);
            if (colorRanges.isEmpty()) {
                colorRanges = null; // For more accurate 'equals' implementation.
            }
        }
    }

