    /**
     * Ensures that the source and target dimensions are the same. This method is for internal use
     * by {@link #resampleToCommonGeometry}.
     */
    private static void ensureStableDimensions(final DimensionFilter filter)
            throws InvalidGridGeometryException {
        final int[] source = filter.getSourceDimensions();
        Arrays.sort(source);
        final int[] target = filter.getTargetDimensions();
        Arrays.sort(target);
        if (!Arrays.equals(source, target)) {
            // TODO: localize
            throw new InvalidGridGeometryException("Unsupported math transform.");
        }
    }

