    /**
     * Sets the envelope to the specified value. If a {@linkplain #setCoordinateReferenceSystem
     * CRS was previously defined}, the envelope will be reprojected to that CRS. If no CRS was
     * previously defined, then the CRS will be set to the
     * {@linkplain Envelope#getCoordinateReferenceSystem envelope CRS}.
     *
     * @throws IllegalArgumentException if the envelope is illegal for the
     *         {@linkplain #getCoordinateReferenceSystem current CRS}.
     */
    public void setEnvelope(Envelope envelope) throws IllegalArgumentException {
        if (this.envelope != null) try {
            envelope = CRS.transform(envelope, this.envelope.getCoordinateReferenceSystem());
        } catch (TransformException exception) {
            throw new IllegalArgumentException(Errors.format(
                    ErrorKeys.ILLEGAL_COORDINATE_REFERENCE_SYSTEM), exception);
        }
        this.envelope = new GeneralEnvelope(envelope);
        coverage = null;
    }

