    /**
     * Verify the parser uses the provided FilterFactory implementation
     *
     * @throws Exception
     */
    @Test
    public void toFilterUsesProvidedFilterFactory() throws Exception {
        final boolean[] called = {false};

        FilterFactory ff =
                new FilterFactoryImpl() {
                    public PropertyName property(String propName) {
                        called[0] = true;

                        return super.property(propName);
                    }
                };

        ECQL.toFilter("attName > 20", ff);
        Assert.assertTrue("Provided FilterFactory was not called", called[0]);
    }

