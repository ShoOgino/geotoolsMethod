    public PropertyIsEqualTo buildSpatialRelateFilter() throws CQLException {

        Literal pattern = this.resultStack.popLiteral();

        Literal geometry = this.resultStack.popLiteral();

        PropertyName property = this.resultStack.popPropertyName();

        FilterFactory2 ff = (FilterFactory2) filterFactory;
        Expression[] args = {property, geometry, pattern};

        Function function = filterFactory.function("relatePattern", args);

        assert function != null : "a relatePattern function is expected";

        PropertyIsEqualTo filter = ff.equals(function, ff.literal(true));

        return filter;
    }

