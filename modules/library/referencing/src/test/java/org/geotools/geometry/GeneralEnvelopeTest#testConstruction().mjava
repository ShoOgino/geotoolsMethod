    @Test
    public void testConstruction() {
        GeneralEnvelope empty = new GeneralEnvelope(DefaultGeographicCRS.WGS84);
        assertTrue(empty.isEmpty());
        Envelope2D empty2d = new Envelope2D();
        assertTrue(empty2d.isEmpty());

        GeneralEnvelope world =
                new GeneralEnvelope(new double[] {-180, -90}, new double[] {180, 90});
        world.setCoordinateReferenceSystem(DefaultGeographicCRS.WGS84);

        GeneralEnvelope copyWorld = new GeneralEnvelope(world); // expected to work
        assertEquals(world, copyWorld);

        GeneralEnvelope copyEmpty = new GeneralEnvelope(empty); // expected to work
        assertEquals(empty, copyEmpty);

        GeneralEnvelope nil = new GeneralEnvelope(DefaultGeographicCRS.WGS84);
        nil.setToNull();

        assertTrue(nil.isNull());
        GeneralEnvelope copyNil = new GeneralEnvelope(nil); // expected to work

        assertTrue(copyNil.isNull());
        assertEquals(nil, copyNil);

        Envelope2D nil2 = new Envelope2D(nil);
        GeneralEnvelope copyNil2 = new GeneralEnvelope((Envelope) nil2); // expected to work

        assertTrue(copyNil2.isNull());

        // See http://jira.codehaus.org/browse/GEOT-3051
        GeneralEnvelope geot3045 = new GeneralEnvelope(new double[] {0, 0}, new double[] {-1, -1});
        assertTrue(geot3045.isEmpty());

        // See http://jira.codehaus.org/browse/GEOT-4261
        GeneralEnvelope geot4261 = new GeneralEnvelope(2);
        GeneralDirectPosition dp = new GeneralDirectPosition(new double[] {100.0, 200.0});
        assertTrue(geot4261.isEmpty());
        geot4261.add(dp);
        assertEquals(new GeneralEnvelope(dp, dp), geot4261);
    }

