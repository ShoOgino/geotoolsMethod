    /**
     * Returns a provider of the specified category.
     *
     * @param category The factory category.
     * @param hints An optional map of hints, or {@code null} if none.
     * @param key The hint key to use for searching an implementation.
     * @return The first factory that matches the supplied hints.
     * @throws FactoryRegistryException if no implementation was found or can be created for the
     *     specified interface.
     */
    private static synchronized <T extends Factory> T getFactory(
            final Class<T> category, Hints hints, final Hints.Key key)
            throws FactoryRegistryException {
        hints = mergeSystemHints(hints);
        return getServiceRegistry().getFactory(category, null, hints, key);
    }

