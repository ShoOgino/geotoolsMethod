    /**
     * Returns all providers of the specified category.
     *
     * @param  category The factory category.
     * @param  hints An optional map of hints, or {@code null} if none.
     * @return Set of available factory implementations.
     */
    private static synchronized <T extends Factory>
            Set<T> getFactories(final Class<T> category, Hints hints)
    {
        hints = mergeSystemHints(hints);
        return new LazySet<T>(getServiceRegistry().getServiceProviders(category, null, hints));
    }

