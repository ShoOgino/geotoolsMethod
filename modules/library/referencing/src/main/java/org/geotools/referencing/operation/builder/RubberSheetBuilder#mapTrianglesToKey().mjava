    /**
     * Calculates affine transformation parameters from the pair of triangles.
     *
     * @return The HashMap where the keys are the original triangles and values are
     *     AffineTransformation Objects.
     */
    private HashMap<TINTriangle, Object> mapTrianglesToKey() {
        AffineTransformBuilder calculator;

        @SuppressWarnings("unchecked")
        HashMap<TINTriangle, Object> trianglesToKeysMap =
                (HashMap<TINTriangle, Object>) trianglesMap.clone();

        Iterator<Map.Entry<TINTriangle, Object>> it = trianglesToKeysMap.entrySet().iterator();

        while (it.hasNext()) {

            Map.Entry<TINTriangle, Object> a = it.next();
            List<MappedPosition> pts = new ArrayList<>();

            for (int i = 1; i <= 3; i++) {
                pts.add(
                        new MappedPosition(
                                a.getKey().getPoints()[i],
                                ((TINTriangle) a.getValue()).getPoints()[i]));
            }

            try {
                calculator = new AffineTransformBuilder(pts);
                a.setValue(calculator.getMathTransform());
            } catch (Exception e) {
                // should never reach here because AffineTransformBuilder(pts)
                // should not throw any Exception.
                java.util.logging.Logger.getGlobal().log(java.util.logging.Level.INFO, "", e);
            }
        }

        return trianglesToKeysMap;
    }

