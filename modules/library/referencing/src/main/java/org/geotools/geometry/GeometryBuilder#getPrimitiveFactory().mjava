    public PrimitiveFactory getPrimitiveFactory() {
        if (primitiveFactory == null) {
            if (hints.containsKey(Hints.PRIMITIVE_FACTORY)) {
                // check the hints for something explicit
                Object factory = hints.get(Hints.PRIMITIVE_FACTORY);
                if (factory instanceof PrimitiveFactory) {
                    primitiveFactory = (PrimitiveFactory) factory;
                    return primitiveFactory;
                }
            }
            primitiveFactory = GeometryFactoryFinder.getPrimitiveFactory(hints);
        }
        return primitiveFactory;
    }

