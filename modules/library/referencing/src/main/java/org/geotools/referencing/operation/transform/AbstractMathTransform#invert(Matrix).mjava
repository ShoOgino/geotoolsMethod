    /**
     * Inverts the specified matrix in place. If the matrix can't be inverted (for example because
     * of a {@link SingularMatrixException}), then the exception is wrapped into a {@link
     * NoninvertibleTransformException}.
     */
    static Matrix invert(final Matrix matrix) throws NoninvertibleTransformException {
        try {
            final XMatrix m = toXMatrix(matrix);
            m.invert();
            return m;
        } catch (SingularMatrixException exception) {
            NoninvertibleTransformException e =
                    new NoninvertibleTransformException(
                            Errors.format(ErrorKeys.NONINVERTIBLE_TRANSFORM));
            e.initCause(exception);
            throw e;
        }
    }

