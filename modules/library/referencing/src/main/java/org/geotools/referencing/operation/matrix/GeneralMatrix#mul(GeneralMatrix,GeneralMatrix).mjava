    /**
     * In-place update from matrix1 * matrix2.
     * @param matrix1
     * @param matrix2
     */
    public void mul(GeneralMatrix matrix1, GeneralMatrix matrix2) {
        if (mat.numRows == matrix1.mat.numRows && mat.numCols == matrix2.mat.numCols) {
            DenseMatrix64F ret = new DenseMatrix64F(mat.getNumRows(), mat.getNumCols());
            CommonOps.mult(matrix1.mat, matrix2.mat, ret);
            mat = ret;
        } else {
            DenseMatrix64F ret = new DenseMatrix64F(matrix1.mat.numRows, matrix2.mat.numCols);
            CommonOps.mult(matrix1.mat, matrix2.mat, ret);
            mat = ret;
        }
    }

