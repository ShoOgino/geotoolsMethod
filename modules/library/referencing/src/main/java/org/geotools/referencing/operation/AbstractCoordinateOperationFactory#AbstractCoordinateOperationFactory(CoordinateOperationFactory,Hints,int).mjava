    /**
     * If the specified factory is an instance of {@code AbstractCoordinateOperationFactory}, fetch
     * the {@link FactoryGroup} from this instance instead of from the hints. This constructor is
     * strictly reserved for factory subclasses that are wrapper around an other factory, like
     * {@link BufferedCoordinateOperationFactory}.
     */
    AbstractCoordinateOperationFactory(
            final CoordinateOperationFactory factory, final Hints hints, final int priority) {
        super(priority);
        if (factory instanceof AbstractCoordinateOperationFactory) {
            factories = ((AbstractCoordinateOperationFactory) factory).getFactoryContainer();
        } else {
            factories = ReferencingFactoryContainer.instance(hints);
        }
        mtFactory = factories.getMathTransformFactory();
    }

