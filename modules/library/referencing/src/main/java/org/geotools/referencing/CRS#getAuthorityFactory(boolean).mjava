    /**
     * Returns the CRS authority factory used by the {@link #decode(String,boolean) decode} methods.
     * This factory is {@linkplain org.geotools.referencing.factory.BufferedAuthorityFactory
     * buffered}, scans over {@linkplain org.geotools.referencing.factory.AllAuthoritiesFactory all
     * factories} and uses additional factories as {@linkplain
     * org.geotools.referencing.factory.FallbackAuthorityFactory fallbacks} if there is more than
     * one {@linkplain ReferencingFactoryFinder#getCRSAuthorityFactories registered factory} for the
     * same authority.
     *
     * <p>This factory can be used as a kind of <cite>system-wide</cite> factory for all
     * authorities. However for more determinist behavior, consider using a more specific factory
     * (as returned by {@link ReferencingFactoryFinder#getCRSAuthorityFactory} when the authority in
     * known.
     *
     * @param longitudeFirst {@code true} if axis order should be forced to
     *     (<var>longitude</var>,<var>latitude</var>). Note that {@code false} means "<cite>use
     *     default</cite>", <strong>not</strong> "<cite>latitude first</cite>".
     * @return The CRS authority factory.
     * @throws FactoryRegistryException if the factory can't be created.
     * @since 2.3
     */
    public static synchronized CRSAuthorityFactory getAuthorityFactory(final boolean longitudeFirst)
            throws FactoryRegistryException {
        CRSAuthorityFactory factory = (longitudeFirst) ? xyFactory : defaultFactory;
        if (factory == null)
            try {
                // what matters is the value of the flag when the factories are created,. do updated
                updateForcedLonLat();
                factory = new DefaultAuthorityFactory(longitudeFirst);
                if (longitudeFirst) {
                    xyFactory = factory;
                } else {
                    defaultFactory = factory;
                }
            } catch (NoSuchElementException exception) {
                // No factory registered in FactoryFinder.
                throw new FactoryNotFoundException(null, exception);
            }
        return factory;
    }

