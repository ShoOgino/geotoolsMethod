    /**
     * Returns {@code true} if the specified object is also an {@linkplain Envelope envelope} with
     * equals coordinates and {@linkplain #getCoordinateReferenceSystem CRS}.
     *
     * @param object The object to compare with this envelope.
     * @return {@code true} if the given object is equals to this envelope.
     * @todo Current implementation requires that {@code object} is of the same class. We can not
     *     relax this rule before we ensure that every implementations in the Geotools code base
     *     follow the same contract.
     */
    @Override
    public boolean equals(final Object object) {
        if (object != null && object.getClass().equals(getClass())) {
            final Envelope that = (Envelope) object;
            final int dimension = getDimension();
            if (dimension == that.getDimension()) {
                for (int i = 0; i < dimension; i++) {
                    if (!Utilities.equals(this.getMinimum(i), that.getMinimum(i))
                            || !Utilities.equals(this.getMaximum(i), that.getMaximum(i))) {
                        return false;
                    }
                }
                if (Utilities.equals(
                        this.getCoordinateReferenceSystem(), that.getCoordinateReferenceSystem())) {
                    assert hashCode() == that.hashCode() : this;
                    return true;
                }
            }
        }
        return false;
    }

