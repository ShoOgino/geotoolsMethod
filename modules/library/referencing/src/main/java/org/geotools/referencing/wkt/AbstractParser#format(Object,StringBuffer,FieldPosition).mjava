    /**
     * Format the specified object as a Well Know Text. Formatting will uses the same set of symbols
     * than the one used for parsing.
     *
     * @param object The object to format.
     * @param toAppendTo Where the text is to be appended.
     * @param pos An identification of a field in the formatted text.
     * @see #getWarning
     */
    @Override
    public StringBuffer format(
            final Object object, final StringBuffer toAppendTo, final FieldPosition pos) {
        final Formatter formatter = getFormatter();
        try {
            formatter.clear();
            formatter.buffer = toAppendTo;
            formatter.bufferBase = toAppendTo.length();
            if (object instanceof MathTransform) {
                formatter.append((MathTransform) object);
            } else if (object instanceof GeneralParameterValue) {
                // Special processing for parameter values, which is formatted
                // directly in 'Formatter'. Note that in GeoAPI, this interface
                // doesn't share the same parent interface than other interfaces.
                formatter.append((GeneralParameterValue) object);
            } else {
                formatter.append((IdentifiedObject) object);
            }
            return toAppendTo;
        } finally {
            formatter.buffer = null;
        }
    }

