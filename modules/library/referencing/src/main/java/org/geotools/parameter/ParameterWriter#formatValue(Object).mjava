    /**
     * Format the specified value as a string. This method is automatically invoked by {@code
     * format(...)} methods. The default implementation format {@link Number}, {@link Date} and
     * {@link Angle} object according the {@linkplain #getLocale current locale}. This method can
     * been overridden if more objects need to be formatted in a special way.
     *
     * @param value the value to format.
     * @return The value formatted as a string.
     */
    protected String formatValue(final Object value) {
        if (value instanceof Number) {
            if (numberFormat == null) {
                numberFormat = NumberFormat.getNumberInstance(locale);
            }
            return numberFormat.format(value);
        }
        if (value instanceof Date) {
            if (dateFormat == null) {
                dateFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, locale);
            }
            return dateFormat.format(value);
        }
        if (value instanceof Angle) {
            if (angleFormat == null) {
                angleFormat = AngleFormat.getInstance(locale);
            }
            return angleFormat.format(value);
        }
        return String.valueOf(value);
    }

