    /**
     * Appends a unit in WKT form. For example, {@code append(SI.KILOMETER)}
     * can append "<code>UNIT["km", 1000]</code>" to the WKT.
     *
     * @param unit The unit to append.
     * @throws IllegalArgumentException if the provided unit is not  
     */
    public void append(final Unit<?> unit) {
        if (unit != null) {
            try {
                appendSeparator(lineChanged);
                buffer.append("UNIT").append(symbols.open);
                setColor(UNIT_COLOR);
                buffer.append(symbols.quote);
                unitFormat.format(unit, buffer);
                buffer.append(symbols.quote);
                resetColor();
                Unit<?> base = null;
                if (SI.METRE.isCompatible(unit)) {
                    base = SI.METRE;
                } else if (SI.SECOND.isCompatible(unit)) {
                    base = SI.SECOND;
                } else if (SI.RADIAN.isCompatible(unit)) {
                    if (!AbstractUnit.ONE.equals(unit)) {
                        base = SI.RADIAN;
                    }
                }
                if (base != null) {
                    append(unit.getConverterToAny(base).convert(1));
                }
            } catch (IOException | UnconvertibleException | IncommensurableException e) {
                throw new IllegalArgumentException("The provided unit is not compatible", e);
            }
            buffer.append(symbols.close);
        }
    }

