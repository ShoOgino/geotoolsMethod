    /**
     * Adds a feature to the buffer
     *
     * @param f Feature to add
     * @return false if unable to add the feature
     */
    protected boolean addFeature(SimpleFeature f) {
        if (ft == null) {
            ft = f.getFeatureType();
        }

        if (size >= features.length) {
            return false;
        }

        synchronized (this) {
            notify();

            features[end] = f;
            end++;

            if (end == features.length) {
                end = 0;
            }

            size++;
        }
        return true;
    }

