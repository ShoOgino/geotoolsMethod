    /**
     * Gets the fid filter that contains all the fids.
     *
     * @return the fid filter that contains all the fids.
     */
    public Id getFidFilter() {
        if (current.isEmpty()) {
            Set<FeatureId> empty = Collections.emptySet();
            return ff.id(empty);
        }
        Data data = current.peek();
        if (!data.fids.isEmpty()) {
            Set<FeatureId> set = new HashSet<>();
            Set<String> fids = data.fids;
            for (String fid : fids) {
                set.add(ff.featureId(fid));
            }
            return ff.id(set);
        } else {
            Set<FeatureId> empty = Collections.emptySet();
            return ff.id(empty);
        }
    }

