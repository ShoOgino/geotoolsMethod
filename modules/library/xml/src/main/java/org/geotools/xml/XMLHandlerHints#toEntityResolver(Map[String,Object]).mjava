    /**
     * Looks up {@link #ENTITY_RESOLVER} instance in provided hints, defaulting to setting provided
     * by {@link GeoTools#getEntityResolver(org.geotools.util.factory.Hints)} (usually {@link
     * PreventLocalEntityResolver} unless otherwise configured).
     *
     * @return EntityResolver provided by hints, or non-null default provided by {@link
     *     Hints#ENTITY_RESOLVER}.
     */
    public static EntityResolver toEntityResolver(Map<String, Object> hints) {
        if (hints != null && hints.containsKey(GeoTools.ENTITY_RESOLVER)) {
            Object resolver = hints.get(GeoTools.ENTITY_RESOLVER);
            if (resolver == null) { // use null instance rather than check each time
                return NullEntityResolver.INSTANCE;
            } else if (resolver instanceof EntityResolver) {
                return (EntityResolver) resolver;
            }
        }
        return GeoTools.getEntityResolver(null);
    }

