    /**
     * Helper that builds a schema cache if a system property "schema.cache.dir" was set.
     *
     * @return a schema cache, or NULL if no schema cache location was provided
     */
    private static SchemaCache getProvidedSchemaCache() {
        String directory = System.getProperty(PROVIDED_CACHE_LOCATION_KEY);
        if (directory == null) {
            return null;
        }
        // let's try to use the provided cache location
        File cacheDirectory = new File(directory);
        if (cacheDirectory.exists() && cacheDirectory.isFile()) {
            // there is nothing we can do, let's abort the instantiation
            throw new RuntimeException(
                    String.format(
                            "Provided schema cache directory '%s' already exists but it's a file.",
                            cacheDirectory.getAbsolutePath()));
        }
        if (!cacheDirectory.exists()) {
            // create the schema cache directory
            cacheDirectory.mkdir();
        }
        // looks like we are fine
        LOGGER.fine(
                String.format(
                        "Using provided schema cache directory '%s'.",
                        cacheDirectory.getAbsolutePath()));
        return new SchemaCache(cacheDirectory, true, DEFAULT_KEEP_QUERY);
    }

