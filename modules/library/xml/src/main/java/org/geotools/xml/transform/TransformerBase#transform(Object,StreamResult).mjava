    /**
     * Perform the XML encoding on the given object to the given OutputStream. Calls
     * createTransformer(),createXMLReader() and Transformer.transform().
     */
    public void transform(Object object, StreamResult result) throws TransformerException {

        Task t = createTransformTask(object, result);
        t.run();
        if (t.checkError()) {
            Exception e = t.getError();
            if (!TransformerException.class.isAssignableFrom(e.getClass())) {
                e = new TransformerException("Translator error", e);
            }
            throw (TransformerException) e;
        }
    }

