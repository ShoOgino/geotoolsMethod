    /**
     * @see org.geotools.xml.schema.Type#canEncode(org.geotools.xml.schema.Element,
     *     java.lang.Object, java.util.Map)
     */
    public boolean canEncode(Element element, Object value, Map<String, Object> hints) {
        if (value == null) {
            return false;
        }

        if (type == UNION) {
            for (int i = 0; i < parents.length; i++) {
                // finds first that works
                // TODO check that 'equals' works here
                if (parents[i].equals(element.getType())
                        && parents[i].canEncode(element, value, hints)) {
                    return true;
                }
            }

            return false;
        }

        if (type == LIST) {
            return parents[0].canEncode(element, value, hints);
        }

        return parents[0].canEncode(element, value, hints);
    }

