    /** @throws IOException */
    public static void writeSchema(Schema schema, Writer w, Map<String, Object> hints)
            throws IOException {
        WriterContentHandler wch =
                new WriterContentHandler(schema, w, hints); // should deal with xmlns declarations
        Element[] elems = schema.getElements();

        if (elems == null) {
            throw new IOException("Cannot write for Schema " + schema.getTargetNamespace());
        }

        wch.startDocument();

        writeSchema(schema, wch, hints);

        wch.endDocument();
    }

