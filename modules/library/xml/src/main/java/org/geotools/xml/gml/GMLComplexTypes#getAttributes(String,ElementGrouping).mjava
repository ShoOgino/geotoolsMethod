    private static List<AttributeDescriptor> getAttributes(String name, ElementGrouping eg) {
        List<AttributeDescriptor> attributes = new LinkedList<>();
        AttributeDescriptor t = null;
        switch (eg.getGrouping()) {
            case ElementGrouping.CHOICE:
                t = getAttribute(name, (Choice) eg);
                if (t != null) attributes.add(t);
                break;
            case ElementGrouping.GROUP:
                attributes.addAll(getAttributes(name, ((Group) eg).getChild()));
                break;
            case ElementGrouping.ELEMENT:
                t = getAttribute((Element) eg);
                if (t != null) attributes.add(t);
                return attributes;

            case ElementGrouping.ALL:
                Element[] elems = ((All) eg).getElements();
                if (elems != null) for (Element elem : elems) attributes.add(getAttribute(elem));
                break;
            case ElementGrouping.SEQUENCE:
                ElementGrouping[] children = ((Sequence) eg).getChildren();
                if (children != null)
                    for (ElementGrouping child : children)
                        attributes.addAll(getAttributes(name, child));
                break;
        }
        return attributes;
    }

