    public SLDInlineFeatureParser(Node root) throws Exception {
        // handle SimpleFeatureCollection or Feature Tag

        boolean isFeatureCollection = false;

        if (!(isSimple(root))) // make sure this isnt too complex to parse easily.
        {
            throw new Exception("couldnt parse the SLD Inline features!"); // shouldnt get here
        }
        Node fc = getNode(root, "FeatureCollection");
        if (fc != null) {
            isFeatureCollection = true;
            root = fc; // decend down one level
        }

        featureType = makeFeatureType(root, isFeatureCollection);
        if (featureType == null)
            throw new Exception(
                    "SLD InlineFeature Parser - couldnt determine a FeatureType.  See help for whats supported."); // shouldnt get here

        makeFeatures(root, isFeatureCollection);
        if (features.isEmpty())
            throw new Exception("SLD InlineFeature Parser - didnt find any features!");

        buildStore();
    }

