    /**
     * Adds the given file / location to the list of files in download.
     * 
     * @param location
     * @param file
     */
    private void startDownload(String location, File file, boolean isTemp) {
        if(!isTemp) {
            synchronized(locationsInDownload) {
                locationsInDownload.add(location);
                try {
                    // we create an empty placeholder to be sure the file exists
                    // for other threads to check
                    file.getParentFile().mkdirs();
                    file.createNewFile();
                } catch (IOException e) {
                    locationsInDownload.remove(location);
                    LOGGER.severe("Can't create cache file: "+file.getAbsolutePath());
                    throw new RuntimeException(e);
                }
            }
        }
    }

