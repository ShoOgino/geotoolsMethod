    @Test
    public void testFormatting() throws Exception {
        CoordinateSequence coords =
                new CoordinateArraySequence(
                        coords3DDouble(new double[] {1, 1, 3, 4.5, 4, 2, 0, 4, 2, 1, 1, 3.582}));

        CoordinateWriter writer = new CoordinateWriter(2, true, true, " ", ",", true, 0.0, 2);
        CoordinateHandler output = new CoordinateHandler();

        output.startDocument();
        writer.writeCoordinates(coords, output);
        output.endDocument();

        Assert.assertEquals(
                "<coordinates>1.00,1.00,3.00 4.50,4.00,2.00 0.00,4.00,2.00 1.00,1.00,3"
                        + ".58</coordinates>",
                output.received);
    }

