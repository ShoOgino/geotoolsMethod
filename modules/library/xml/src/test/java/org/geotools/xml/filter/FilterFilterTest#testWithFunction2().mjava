    @Test
    public void testWithFunction2() throws Exception {
        String filter =
                "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
                        + "<sld:StyledLayerDescriptor xmlns:sld=\"http://www.opengis.net/sld\" xmlns:ogc=\"http://www.opengis.net/ogc\" xmlns:gml=\"http://www.opengis.net/gml\" version=\"1.0.0\">"
                        + "<sld:UserLayer>"
                        + "<sld:LayerFeatureConstraints>"
                        + "<sld:FeatureTypeConstraint/>"
                        + "</sld:LayerFeatureConstraints>"
                        + "<sld:UserStyle>"
                        + "<sld:FeatureTypeStyle>"
                        + "<sld:FeatureTypeName>Feature</sld:FeatureTypeName>"
                        + "<sld:Rule>"
                        + "<ogc:Filter>"
                        + "<ogc:PropertyIsEqualTo>"
                        + "<ogc:Function name=\"geometryType\">"
                        + "<ogc:PropertyName>the_geom</ogc:PropertyName>"
                        + "</ogc:Function>"
                        + "<ogc:Literal>Point</ogc:Literal>"
                        + "</ogc:PropertyIsEqualTo>"
                        + "</ogc:Filter>"
                        + "<sld:PointSymbolizer>"
                        + "</sld:PointSymbolizer>"
                        + "</sld:Rule>"
                        + "<sld:Rule>"
                        + "<ogc:Filter>"
                        + "<ogc:PropertyIsEqualTo>"
                        + "<ogc:Function name=\"geometryType\">"
                        + "<ogc:PropertyName>the_geom</ogc:PropertyName>"
                        + "</ogc:Function>"
                        + "<ogc:Literal>MultiPoint</ogc:Literal>"
                        + "</ogc:PropertyIsEqualTo>"
                        + "</ogc:Filter>"
                        + "<sld:PointSymbolizer>"
                        + "</sld:PointSymbolizer>"
                        + "</sld:Rule>"
                        + "</sld:FeatureTypeStyle>"
                        + "</sld:UserStyle>"
                        + "</sld:UserLayer>"
                        + "</sld:StyledLayerDescriptor>";

        StringReader reader = new StringReader(filter);

        InputSource requestSource = new InputSource(reader);

        //		 instantiante parsers and content handlers
        MyHandler contentHandler = new MyHandler();
        FilterFilter filterParser = new FilterFilter(contentHandler, null);
        GMLFilterGeometry geometryFilter = new GMLFilterGeometry(filterParser);
        GMLFilterDocument documentFilter = new GMLFilterDocument(geometryFilter);

        //        Logger logger = Logging.getLogger(FilterFilterTest.class);
        //        logger.setLevel(Level.ALL);
        //        ConsoleHandler consoleHandler = new ConsoleHandler();
        //        consoleHandler.setLevel(Level.ALL);
        //		logger.addHandler(consoleHandler);
        // read in XML file and parse to content handler
        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser parser = factory.newSAXParser();
        ParserAdapter adapter = new ParserAdapter(parser.getParser());
        adapter.setContentHandler(documentFilter);
        adapter.parse(requestSource);

        //        assertEquals(contentHandler.filters.size(),1);
    }

