    @Test
    public void test() throws TransformerException, SAXException, IOException {

        final String gml = createTestGMLInput();
        // System.out.format("%s\n", gml);
        final DefaultFeatureCollection featureCollection = new DefaultFeatureCollection();
        class Handler extends XMLFilterImpl implements GMLHandlerFeature {
            @Override
            public void feature(final SimpleFeature feature) {
                featureCollection.add(feature);
            }
        }
        final Handler handler = new Handler();
        final GMLFilterFeature filterFeature = new GMLFilterFeature(handler);
        final GMLFilterGeometry filterGeometry = new GMLFilterGeometry(filterFeature);
        final GMLFilterDocument filterDocument = new GMLFilterDocument(filterGeometry);
        final XMLReader reader = XMLReaderFactory.createXMLReader();
        reader.setContentHandler(filterDocument);
        reader.parse(new InputSource(new StringReader(gml)));
        assertTrue(featureCollection.size() == 2);
        final Iterator<SimpleFeature> it = featureCollection.iterator();
        {
            final SimpleFeature feature = it.next();
            final Polygon polygon = (Polygon) feature.getAttribute("geometry");
            final String a = polygon.toString();
            final String b = polygonA().toString();
            assertTrue(a.equals(b));
            final String value = (String) feature.getAttribute("my_string_attribute");
            assertTrue(value.equals(helloWorldA));
        }
        {
            final SimpleFeature feature = it.next();
            final Polygon polygon = (Polygon) feature.getAttribute("geometry");
            final String a = polygon.toString();
            final String b = polygonB().toString();
            assertTrue(a.equals(b));
            final String value = (String) feature.getAttribute("my_string_attribute");
            assertTrue(value.equals(helloWorldB));
        }
    }

