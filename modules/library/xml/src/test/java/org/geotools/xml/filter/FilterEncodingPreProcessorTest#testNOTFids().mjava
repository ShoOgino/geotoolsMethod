    public void testNOTFids() throws Exception {
        FilterFactory2 factory = CommonFactoryFinder.getFilterFactory2(null);
        String fid1 = "FID.1";
        // not id filter does not actually have a valid encoding 
        Filter filter = factory.not( factory.id( Collections.singleton( factory.featureId(fid1) ) ) );

        FilterEncodingPreProcessor visitor = new FilterEncodingPreProcessor(XMLHandlerHints.VALUE_FILTER_COMPLIANCE_LOW);
        Filters.accept(filter, visitor);

        assertEquals(filter, visitor.getFilter());
        
        assertTrue(visitor.getFidFilter().getIdentifiers().isEmpty());

        //Test MEDIUM compliance
        visitor = new FilterEncodingPreProcessor(XMLHandlerHints.VALUE_FILTER_COMPLIANCE_MEDIUM);
        Filters.accept(filter, visitor);
        
        assertEquals(Filter.INCLUDE, visitor.getFilter());
        assertTrue(visitor.getFidFilter().getIdentifiers().isEmpty());
        assertTrue(visitor.requiresPostProcessing());

        //Test HIGH compliance
        visitor = new FilterEncodingPreProcessor(XMLHandlerHints.VALUE_FILTER_COMPLIANCE_HIGH);
        Filters.accept(filter, visitor);

        assertEquals(Filter.INCLUDE, visitor.getFilter());
        assertTrue(visitor.getFidFilter().getIdentifiers().isEmpty());
        assertTrue(visitor.requiresPostProcessing());
    }

