    @Test
    public void testLocalizedAbstract() throws Exception {
        RuleImpl rule = (RuleImpl) CommonFactoryFinder.getStyleFactory().createRule();
        GrowableInternationalString intString =
                new GrowableInternationalString("title") {

                    @Override
                    public String toString() {
                        return super.toString(null);
                    }
                };
        intString.add(Locale.ITALIAN, "titolo");
        intString.add(Locale.FRENCH, "titre");
        intString.add(Locale.CANADA_FRENCH, "titre");
        rule.getDescription().setAbstract(intString);
        String xml = transformer.transform(rule);
        Document doc = buildTestDocument(xml);
        assertXpathEvaluatesTo("title", "normalize-space(//sld:Abstract/text()[1])", doc);
        assertXpathEvaluatesTo(
                "titolo",
                "//sld:Abstract/sld:Localized[@lang='" + Locale.ITALIAN.toString() + "']",
                doc);
        assertXpathEvaluatesTo(
                "titre",
                "//sld:Abstract/sld:Localized[@lang='" + Locale.FRENCH.toString() + "']",
                doc);
        assertXpathEvaluatesTo(
                "titre",
                "//sld:Abstract/sld:Localized[@lang='" + Locale.CANADA_FRENCH.toString() + "']",
                doc);
    }

