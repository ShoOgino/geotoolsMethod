    @Test
    public void testMailWrite() {

        try {
            String path = "xml/mails.xml";

            File f = TestData.copy(this, path);
            TestData.copy(this, "xml/mails.xsd");

            Object doc = DocumentFactory.getInstance(f.toURI(), null, Level.WARNING);
            Assert.assertNotNull("Document missing", doc);

            Schema s = SchemaFactory.getInstance(new URI("http://mails/refractions/net"));

            path = "mails_out.xml";
            f = TestData.temp(this, path);
            if (f.exists()) f.delete();
            f.createNewFile();

            DocumentWriter.writeDocument(doc, s, f, null);

            doc = DocumentFactory.getInstance(f.toURI(), null, Level.WARNING);
            Assert.assertNotNull("New Document missing", doc);

            Assert.assertTrue("file was not created +f", f.exists());
            // System.out.println(f);
        } catch (SAXException e) {
            java.util.logging.Logger.getGlobal().log(java.util.logging.Level.INFO, "", e);
            Assert.fail(e.toString());
        } catch (Throwable e) {
            Assert.assertTrue(e instanceof OperationNotSupportedException);
            //            e.printStackTrace();
            //            fail(e.toString()); Operation not supported yet
        }
    }

