    @Override
    public final HTTPClient createClient(
            Hints hints, List<Class<? extends HTTPBehavior>> behaviors) {
        HTTPClient client = createClient(behaviors);
        Set<Class<? extends HTTPBehavior>> missingBehaviors =
                behaviors
                        .stream()
                        .filter(behavior -> !behavior.isInstance(client))
                        .collect(Collectors.toSet());
        if (!missingBehaviors.isEmpty()) {
            throw new RuntimeException(
                    String.format(
                            "HTTP client %s doesn't support behaviors: %s",
                            client.getClass().getName(),
                            missingBehaviors
                                    .stream()
                                    .map(behavior -> behavior.getSimpleName())
                                    .collect(Collectors.joining(", "))));
        }
        if (hints.containsKey(Hints.HTTP_LOGGING)) {
            return applyLogging(client, hints);
        } else {
            return client;
        }
    }

