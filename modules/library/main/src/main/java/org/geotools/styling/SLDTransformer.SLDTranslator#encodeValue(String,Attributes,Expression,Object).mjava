        void encodeValue(String elementName, Attributes atts, Expression expression,
                Object defaultValue) {
            if (expression == null) {
                return; // protect ourselves from things like a null Stroke Color
            }
            
            if (!isExportDefaultValues()) {
                // skip encoding if we are using the default value
                if (expression instanceof Literal && defaultValue != null) {
                    Object value = expression.evaluate(null, defaultValue.getClass());
                    if (value != null && value.equals(defaultValue)) {
                        return;
                    }
                }
            }
            if (atts == null) {
                atts = NULL_ATTS;
            }
            if (expression instanceof Literal) {
                // use more compact encoding
                element(elementName, expression.evaluate(null, String.class), atts);
            } else {
                start(elementName, atts);
                filterTranslator.encode(expression);
                end(elementName);
            }
        }

