    /**
     * Manually count the number of features from the provided FeatureIterator. This implementation
     * is intended for FeatureCollection implementors and test case verification. Client code should
     * always call {@link FeatureCollection#size()}
     *
     * @return number of featuers in feature collection
     */
    public static int count(FeatureIterator<?> iterator) {
        int count = 0;
        if (iterator != null) {
            try {
                while (iterator.hasNext()) {
                    iterator.next();
                    count++;
                }
                return count;
            } finally {
                iterator.close();
            }
        }
        return count;
    }

