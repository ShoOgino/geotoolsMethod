    /**
     * Wraps a collection in an umodifiable collection based on the interface the collection
     * implements.
     *
     * <p>A list will result in an umodifiable list, a set in an unmodifiable set, etc..
     */
    public static Collection unmodifiable(Collection original) {

        if (original instanceof Set) {
            if (original instanceof SortedSet) {
                return Collections.unmodifiableSortedSet((SortedSet) original);
            }

            return Collections.unmodifiableSet((Set) original);
        } else if (original instanceof List) {
            return Collections.unmodifiableList((List) original);
        }

        return Collections.unmodifiableCollection(original);
    }

