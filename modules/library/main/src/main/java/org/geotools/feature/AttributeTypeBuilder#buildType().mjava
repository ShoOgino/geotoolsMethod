    /**
     * Builds the attribute type.
     *
     * <p>This method resets all state after the attribute is built.
     */
    public AttributeType buildType() {
        if (length != null) {
            Filter lengthRestriction = lengthRestriction(length);
            restrictions().add(lengthRestriction);
        }

        if (options != null && !options.isEmpty()) {
            Filter optionsRestriction = FeatureTypes.createFieldOptions(options);
            restrictions().add(optionsRestriction);
        }

        AttributeType type =
                factory.createAttributeType(
                        name(),
                        binding,
                        isIdentifiable,
                        isAbstract,
                        restrictions(),
                        superType,
                        description());
        resetTypeState();

        return type;
    }

