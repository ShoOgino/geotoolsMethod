    private Class getTargetType(Expression... expressions) {
        Class result = null;
        for (Expression expression : expressions) {
            if (!(expression instanceof Literal)) {
                Class target = (Class) expression.accept(expressionTypeVisitor, null);
                if (target == null) {
                    // could not find a target type, let the evaluation be dynamic
                    return target;
                } else if (result == null) {
                    result = target;
                } else if (!target.equals(result)) {
                    // if we have two inconsistent properties being
                    // compared, give up and handle this dynamically
                    return null;
                }
            }
        }

        return result;
    }

