    /**
     * Creates the filter held in the parser.
     *
     * @return The current filter to be created by this parser.
     * @throws IllegalFilterException If called before the filter is in a complete state.
     */
    public Filter create() throws IllegalFilterException {
        if (isComplete()) {
            LOGGER.finer("complete called, state = " + curState);
            curState = "complete"; // added by cholmes fid bug.

            return curFilter;
        } else {
            throw new IllegalFilterException(
                    "Got to the end state of an incomplete filter, current"
                            + " state is "
                            + curState);
        }
    }

