    private Filter override(Filter filter, Filter override) {
        if (isNOP(override)) {
            // no override is needed
            return filter;
        } else if (isNOP(filter)) {
            return override;
        } else {
            return ff.and(filter, override);
        }
    }

