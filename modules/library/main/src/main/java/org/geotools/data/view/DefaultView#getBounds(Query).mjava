    /**
     * Retrive the extent of the Query.
     *
     * <p>This method provides access to an optimized getBounds opperation. If no optimized
     * opperation is available <code>null</code> will be returned.
     *
     * <p>You may still make use of getFeatures( Query ).getCount() which will return the correct
     * answer (even if it has to itterate through all the results to do so.
     *
     * @param query User's query
     * @return Extend of Query or <code>null</code> if no optimization is available
     * @throws IOException If a problem is encountered with source
     */
    @Override
    public ReferencedEnvelope getBounds(Query query) throws IOException {
        if (constraintQuery.getCoordinateSystemReproject() == null) {
            try {
                query = makeDefinitionQuery(query);
            } catch (IOException ex) {
                return null;
            }

            return source.getBounds(query);
        }
        // this will create a feature results that can reproject the
        // features, and will
        // properly compute the bouds
        return getFeatures(query).getBounds();
    }

