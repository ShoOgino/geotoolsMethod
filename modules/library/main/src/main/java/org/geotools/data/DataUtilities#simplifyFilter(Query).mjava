    /**
     * This method changes the query object by simplifying the filter using SimplifyingFilterVisitor
     */
    public static Query simplifyFilter(Query query) {
        if (query == null || query == Query.ALL) {
            return query;
        }
        Filter filter = SimplifyingFilterVisitor.simplify(query.getFilter());
        if (filter.equals(query.getFilter())) {
            return query;
        }
        Query result = new Query(query);
        result.setFilter(filter);
        return result;
    }

