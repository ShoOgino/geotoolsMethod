    public SimpleFeatureCollection collection() throws IOException {
        try {
            SimpleFeatureCollection collection = FeatureCollections.newCollection();
            //Feature feature;
             FeatureReader<SimpleFeatureType, SimpleFeature> reader = reader();
            //SimpleFeatureType type = reader.getFeatureType();
             try {
            	 while (reader.hasNext()) {
            		 collection.add(reader.next());
            	 }
             } finally {
            	 reader.close();
             }

            return collection;
        } catch (IllegalAttributeException e) {
            throw new DataSourceException("Could not read feature ", e);
        }
    }

