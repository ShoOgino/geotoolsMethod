    public <T> T[] toArray(T[] array) {
        List<T> list = new ArrayList<>();
        Iterator<SimpleFeature> i = iterator();
        try {
            while (i.hasNext()) {
                @SuppressWarnings("unchecked")
                T next = (T) i.next();
                list.add(next);
            }
        } finally {
            close(i);
        }
        return list.toArray(array);
    }

