    /**
     * Returns the service registry. The registry will be created the first time this method is
     * invoked.
     */
    private static FactoryRegistry getServiceRegistry() {
        assert Thread.holdsLock(JTSFactoryFinder.class);
        if (registry == null) {
            synchronized (JTSFactoryFinder.class) {
                if (registry == null) {
                    FactoryRegistry temp =
                            new FactoryCreator(
                                    Arrays.asList(new Class<?>[] {GeometryFactory.class}));
                    temp.registerFactory(new GeometryFactory(), GeometryFactory.class);
                    registry = temp;
                }
            }
        }
        return registry;
    }

