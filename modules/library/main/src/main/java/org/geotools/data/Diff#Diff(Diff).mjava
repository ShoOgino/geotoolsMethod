    /** Diff copy. */
    public Diff(Diff other) {
        // copy data
        modifiedFeatures = new ConcurrentHashMap<>(other.modifiedFeatures);
        addedFeatures = new ConcurrentHashMap<>(other.addedFeatures);
        addedFidList = new CopyOnWriteArrayList<>(other.addedFidList);

        // create public "views"
        modified2 = Collections.unmodifiableMap(modifiedFeatures);
        added = Collections.unmodifiableMap(addedFeatures);

        spatialIndex = copySTRtreeFrom(other);
        nextFID = other.nextFID;
        mutex = this;
    }

