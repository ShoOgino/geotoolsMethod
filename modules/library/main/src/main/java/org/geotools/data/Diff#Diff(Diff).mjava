    /**
     * Diff copy.
     * @param other
     */
    public Diff(Diff other){
        // copy data
        modifiedFeatures=new ConcurrentHashMap<String, SimpleFeature>(other.modifiedFeatures);
        addedFeatures=new ConcurrentHashMap<String, SimpleFeature>(other.addedFeatures);
        addedFidList=new CopyOnWriteArrayList<String>(other.addedFidList);
        
        // create public "views"
        modified2=Collections.unmodifiableMap(modifiedFeatures);
        added=Collections.unmodifiableMap(addedFeatures);
        order = Collections.unmodifiableList(addedFidList);

        spatialIndex=copySTRtreeFrom(other);
        nextFID=other.nextFID;
        mutex=this;
    }

