    @Override
    public List toList() {
        Object value = getValue();

        if (value == null) {
            return null;
        }

        if (value instanceof List) {
            List list = (List) value;

            return list;
        }

        if (value.getClass().isArray()) {
            return Arrays.asList((Object[]) value);
        }

        if (value instanceof HashSet) {
            Set set = (HashSet) value;
            // Object[] values = set.toArray();
            return Arrays.asList(set.toArray());
            // List list = new ArrayList();
            // for (int i = 0; i < values.length; i++)
            // list.add(values[i]);
            // return list;
        }

        if (value instanceof Collection) {
            @SuppressWarnings("unchecked")
            Collection<Object> cast = (Collection<Object>) value;
            return new ArrayList<>(cast);
        }

        return null;
    }

