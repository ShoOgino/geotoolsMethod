    /**
     * Builds a data store wrapper on top of a feature collection
     *
     * @param collection
     */
    public CollectionDataStore(FeatureCollection<SimpleFeatureType,SimpleFeature> collection) {
        this.collection = collection;
        if (collection.size() == 0) {
            this.featureType = FeatureTypes.EMPTY;
        } else {
            this.featureType = collection.getSchema();
//            Iterator iter = null;
//            try {
//                iter = collection.iterator();
//                this.featureType = ((SimpleFeature) iter.next()).getFeatureType();
//            } finally {
//                if (iter != null)
//                    collection.close(iter);
//            }
        }
        //collection.addListener(new FeatureCollectionListener());
    }

