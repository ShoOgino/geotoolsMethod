    @Override
    @SuppressWarnings("PMD.CloseResource")
    public SimpleFeatureIterator features() {
        try {
            SimpleFeatureIterator features = delegate.features();
            // sort if necessary
            if (sort != null) {
                features =
                        new SortedFeatureIterator(features, getSchema(), sort, maxMemoryFeatures);
            }
            return features;
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

