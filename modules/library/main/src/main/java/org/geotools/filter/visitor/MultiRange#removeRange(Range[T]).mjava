    public void removeRange(Range<T> range) {
        List<Range<T>> overlapping = getOverlappingRanges(range);

        if (overlapping != null) {
            ranges.removeAll(overlapping);
            List<Range<?>> removed = new ArrayList<>();
            for (Range<T> r : overlapping) {
                Range<?>[] difference = r.subtract(range);
                for (Range<?> d : difference) {
                    if (!d.isEmpty()) {
                        removed.add(d);
                    }
                }
            }
            for (Range<?> r : removed) {
                ranges.add((Range<T>) r);
            }
        }
    }

