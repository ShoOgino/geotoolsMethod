    public void removeRange(Range<T> range) {
        List<Range<T>> overlapping = getOverlappingRanges(range);

        if (overlapping != null) {
            ranges.removeAll(overlapping);
            List<Range<T>> removed = new ArrayList<>();
            for (Range<T> r : overlapping) {
                @SuppressWarnings("unchecked")
                Range<T>[] difference = (Range<T>[]) r.subtract(range);
                for (Range<T> d : difference) {
                    if (!d.isEmpty()) {
                        removed.add(d);
                    }
                }
            }
            for (Range<T> r : removed) {
                ranges.add(r);
            }
        }
    }

