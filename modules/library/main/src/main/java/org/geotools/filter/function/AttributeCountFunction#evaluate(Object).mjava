    /*
     * (non-Javadoc)
     *
     * @see org.geotools.filter.Expression#getValue(org.geotools.feature.Feature)
     */
    @Override
    public Object evaluate(Object feature) {
        Expression ae = getParameters().get(0);
        Object value = ae.evaluate(feature);
        if (value == null) {
            return 0;
        } else if (value instanceof Collection) {
            return ((Collection<?>) value).size();
        } else {
            return 1;
        }
    }

