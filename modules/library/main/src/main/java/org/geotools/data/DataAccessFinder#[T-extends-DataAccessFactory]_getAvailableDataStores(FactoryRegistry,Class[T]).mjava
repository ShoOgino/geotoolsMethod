    static synchronized <T extends DataAccessFactory> Set<T> getAvailableDataStores(
            FactoryRegistry registry, Class<T> targetClass) {
        return registry
                .getFactories(targetClass, null, null)
                .filter(DataAccessFactory::isAvailable)
                .collect(toSet());
    }

