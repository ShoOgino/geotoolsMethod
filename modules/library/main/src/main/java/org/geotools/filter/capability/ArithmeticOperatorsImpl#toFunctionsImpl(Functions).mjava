    private static FunctionsImpl toFunctionsImpl(Functions functions) {
        if (functions == null) {
            return new FunctionsImpl();
        }
        if (functions instanceof FunctionsImpl) {
            return (FunctionsImpl) functions;
        } else {
            return new FunctionsImpl(functions);
        }
    }

