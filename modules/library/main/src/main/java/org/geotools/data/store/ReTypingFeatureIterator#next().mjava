    @Override
    public SimpleFeature next() {
        SimpleFeature next = delegate.next();
        String id = next.getID();

        try {
            for (AttributeDescriptor type : types) {
                final String xpath = type.getLocalName();
                builder.add(next.getAttribute(xpath));
            }
            builder.featureUserData(next);

            return builder.buildFeature(id);
        } catch (IllegalAttributeException e) {
            throw new RuntimeException(e);
        }
    }

