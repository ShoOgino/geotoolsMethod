    /**
     * Variant to URL.getQuery() that won't balk at having # in the query (e.g., a color in a
     * parametric SVG reference), e.g. <code>firestation.svg?fill=#FF0000</code>
     */
    private String getQueryPart(URL url) {
        String external = url.toExternalForm();
        int idx = external.indexOf('?');
        if (idx == -1 || idx == external.length() - 1) {
            return null;
        } else {
            return external.substring(idx + 1);
        }
    }

