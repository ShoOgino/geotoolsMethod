    @Override
    public Object evaluate(Object object) {
        Color reference = (Color) getParameterValue(object, 0);
        Color color1 = (Color) getParameterValue(object, 1, Color.BLACK);
        Color color2 = (Color) getParameterValue(object, 2, Color.WHITE);
        double threshold = (Double) getParameterValue(object, 3, 0.43);

        double luma1 = luma(color1);
        double luma2 = luma(color2);
        Color light, dark;
        if (luma1 > luma2) {
            light = color1;
            dark = color2;
        } else {
            light = color2;
            dark = color1;
        }

        if (luma(reference) < threshold) {
            return light;
        } else {
            return dark;
        }
    }

