    /**
     * Retrieves all rules defined in a style
     *
     * @param style the style
     * @return an array of unique rules
     */
    public static Rule[] rules(Style style) {
        Set<Rule> ruleSet = new HashSet<>();
        for (FeatureTypeStyle fts : style.featureTypeStyles()) {
            ruleSet.addAll(fts.rules());
        }

        if (ruleSet.isEmpty()) {
            return new Rule[0];
        } else {
            return ruleSet.toArray(new Rule[0]);
        }
    }

