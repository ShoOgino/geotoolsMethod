    /**
     * Produce an ReferencedEnvelope from the provided data parameter.
     *
     * @return ReferencedEnvelope
     */
    private ReferencedEnvelope bbox(Object data) {
        if (data == null) {
            return null;
        } else if (data instanceof ReferencedEnvelope) {
            return (ReferencedEnvelope) data;
        } else if (data instanceof Envelope) {
            return new ReferencedEnvelope((Envelope) data, null);
        } else if (data instanceof CoordinateReferenceSystem) {
            return new ReferencedEnvelope((CoordinateReferenceSystem) data);
        }
        throw new ClassCastException("Could not cast data to ReferencedEnvelope");
    }

