    public static SimpleFeatureType retype(SimpleFeatureType original, Query query) {
        CoordinateReferenceSystem crs = null;
        if (query.getCoordinateSystem() != null) {
            crs = query.getCoordinateSystem();
        }
        if (query.getCoordinateSystemReproject() != null) {
            crs = query.getCoordinateSystemReproject();
        }
        return retype(original, query.getPropertyNames(), crs);
    }

