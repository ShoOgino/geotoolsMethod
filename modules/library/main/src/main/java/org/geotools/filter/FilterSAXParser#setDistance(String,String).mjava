    /**
     * This sets the distance for a GeometryDistanceFilter. It currently ignores the units, and
     * attempts to convert the distance to a double.
     *
     * @param distance the distance - should be a string of a double.
     * @param units a reference to a units dictionary.
     * @throws IllegalFilterException if the distance string can not be converted to a double.
     * @task TODO: Implement units, probably with org.geotools.units package and a special distance
     *     class in the filter package. It would be nice if the distance class could get any type of
     *     units, like it would handle the conversion.
     */
    public void setDistance(String distance, String units) throws IllegalFilterException {
        LOGGER.finer("set distance called, current state is " + curState);

        if (curState.equals("distance")) {
            try {
                double distDouble = Double.parseDouble(distance);
                ((CartesianDistanceFilter) curFilter).setDistance(distDouble);
                curState = "complete";
            } catch (NumberFormatException nfe) {
                throw new IllegalFilterException(
                        "could not parse distance: " + distance + " to a double");
            }
        } else {
            throw new IllegalFilterException(
                    "Got distance for Geometry Distance Filter in illegal state: "
                            + curState
                            + ", geometry and property should be set first");
        }
    }

