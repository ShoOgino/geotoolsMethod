    /**
     * Initializes the state of the builder based on a previously built attribute.
     *
     * <p>This method is useful when copying another attribute.
     */
    public void init(Attribute attribute) {
        init();

        descriptor = attribute.getDescriptor();
        type = attribute.getType();

        if (attribute instanceof ComplexAttribute) {
            ComplexAttribute complex = (ComplexAttribute) attribute;
            for (Property property : toPropertyCollection(complex.getValue())) {
                if (property instanceof Attribute) {
                    Attribute att = (Attribute) property;
                    add(
                            att.getIdentifier() == null ? null : att.getIdentifier().toString(),
                            att.getValue(),
                            att.getName());
                } else if (property instanceof Association) {
                    Association assoc = (Association) property;
                    associate(assoc.getValue(), assoc.getName());
                }
            }
        }

        if (attribute instanceof Feature) {
            Feature feature = (Feature) attribute;

            if (feature.getDefaultGeometryProperty() != null) {
                if (crs == null) {
                    crs =
                            feature.getDefaultGeometryProperty()
                                    .getType()
                                    .getCoordinateReferenceSystem();
                }
                defaultGeometry = feature.getDefaultGeometryProperty().getValue();
            }
        }
    }

