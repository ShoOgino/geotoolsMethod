    /**
     * Builds the name -> descriptor index used by simple features for fast attribute lookup
     *
     * @param featureType
     * @return
     */
    static Map<String, AttributeDescriptor> buildDescriptorIndex(SimpleFeatureType featureType) {
        // build an index of attribute name to index
        Map<String, AttributeDescriptor> index = new HashMap<>();
        int i = 0;
        for (AttributeDescriptor ad : featureType.getAttributeDescriptors()) {
            index.put(ad.getLocalName(), ad);
        }
        if (featureType.getGeometryDescriptor() != null) {
            index.put(null, featureType.getGeometryDescriptor());
        }
        return index;
    }

