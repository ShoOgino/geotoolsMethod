    /**
     * Tries to simplify the filter if it's not already a simple one
     * 
     * @param filter
     * @return
     */
    public static Filter simplify(Filter filter, FeatureType featureType) {
        // if already as simple as possible, or cannot be simplified anyways
        if (filter == Filter.INCLUDE || filter == Filter.EXCLUDE || filter == null) {
            return filter;
        }
        SimplifyingFilterVisitor visitor = new SimplifyingFilterVisitor();
        visitor.setFeatureType(featureType);
        return (Filter) filter.accept(visitor, null);
    }

