    /**
     * Compares this filter to the specified object.  Returns true  if the
     * passed in object is the same as this filter.  Checks  to make sure the
     * filter types are the same as well as both of the values.
     *
     * @param obj - the object to compare this CompareFilter against.
     *
     * @return true if specified object is equal to this filter; false
     *         otherwise.
     */
    public boolean equals(Object obj) {
        if (obj instanceof CompareFilterImpl) {
            CompareFilterImpl cFilter = (CompareFilterImpl) obj;

            // todo - check for nulls here, or make immutable.
            //
            int filterType = Filters.getFilterType(this);
            return filterType == Filters.getFilterType(cFilter)
                    && (expression1 == cFilter.getExpression1() || (expression1 != null && expression1
                            .equals(cFilter.getExpression1())))
                    && (expression2 == cFilter.getExpression2() || (expression2 != null && expression2
                            .equals(cFilter.getExpression2())));
        } else {
            return false;
        }
    }

