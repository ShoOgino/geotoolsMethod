    /**
     * Null safe map copy, used for external graphic custom properties.
     *
     * @return copy of map
     */
    @SuppressWarnings("unchecked")
    protected <K, V> Map<K, V> copy(Map<K, V> customProperties) {
        if (customProperties == null) return null;
        return new HashMap<K, V>(customProperties);
    }

