    /**
     * Format year number consistent with W3C XML Schema definitions, using a minimum of four digits
     * padded with zeros if necessary. A leading minus sign is included for years prior to 1 C.E.
     *
     * @param year number to be formatted
     * @param buff text formatting buffer
     */
    protected static void formatYearNumber(long year, StringBuffer buff) {
        // start with minus sign for dates prior to 1 C.E.
        if (year <= 0) {
            buff.append('-');
            year = -(year - 1);
        }

        // add padding if needed to bring to length of four
        if (year < 1000) {
            buff.append('0');

            if (year < 100) {
                buff.append('0');

                if (year < 10) {
                    buff.append('0');
                }
            }
        }

        // finish by converting the actual year number
        buff.append(year);
    }

