    /**
     * Array of all the elements.
     *
     * @return an array containing all of the elements in this collection.
     */
    public Object[] toArray() {
        // code based on AbstractFeatureCollection
        // TODO: base this on reader
        ArrayList<SimpleFeature> array = new ArrayList<>();
        FeatureIterator<SimpleFeature> e = null;
        try {
            e = features();
            while (e.hasNext()) {
                array.add(e.next());
            }
            return array.toArray(new SimpleFeature[array.size()]);
        } finally {
            if (e != null) {
                e.close();
            }
        }
    }

