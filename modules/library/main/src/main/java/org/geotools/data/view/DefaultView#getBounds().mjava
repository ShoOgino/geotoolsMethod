    /**
     * Retrieves the total extent of this FeatureSource.
     *
     * <p>Please note this extent will reflect the provided definitionQuery.
     *
     * @return Extent of this FeatureSource, or <code>null</code> if no optimizations exist.
     * @throws IOException If bounds of definitionQuery
     */
    @Override
    public ReferencedEnvelope getBounds() throws IOException {
        if (constraintQuery.getCoordinateSystemReproject() == null) {
            if (constraintQuery.getFilter() == null
                    || constraintQuery.getFilter() == Filter.INCLUDE
                    || Filter.INCLUDE.equals(constraintQuery.getFilter())) {
                return source.getBounds();
            }
            return source.getBounds(constraintQuery);
        }
        // this will create a feature results that can reproject the
        // features, and will
        // properly compute the bouds
        return getFeatures().getBounds();
    }

