    @Override
    public ProjectionHandler getHandler(
            ReferencedEnvelope renderingEnvelope,
            CoordinateReferenceSystem sourceCrs,
            boolean wrap,
            int maxWraps)
            throws FactoryException {
        if (renderingEnvelope == null) {
            return null;
        }

        MapProjection mapProjection =
                CRS.getMapProjection(renderingEnvelope.getCoordinateReferenceSystem());
        if (mapProjection instanceof Homolosine) {
            final double[] MASK_COORDS = {
                // north side
                -180,
                -90,
                -180,
                90,
                -40 - EPS,
                90,
                -40 - EPS,
                0,
                -40 + EPS,
                0,
                -40 + EPS,
                90,
                180,
                90,
                // south side
                180,
                -90,
                80 + EPS,
                -90,
                80 + EPS,
                0,
                80 - EPS,
                0,
                80 - EPS,
                -90,
                -20 + EPS,
                -90,
                -20 + EPS,
                0,
                -20 - EPS,
                0,
                -20 - EPS,
                -90,
                -100 + EPS,
                -90,
                -100 + EPS,
                0,
                -100 - EPS,
                0,
                -100 - EPS,
                -90,
                -180,
                -90
            };
            LiteCoordinateSequence cs = new LiteCoordinateSequence(MASK_COORDS, 2);
            GeometryFactory gf = new GeometryFactory();
            LinearRing shell = gf.createLinearRing(cs);
            Polygon mask = gf.createPolygon(shell);

            return new ProjectionHandler(sourceCrs, mask, renderingEnvelope);
        }

        return null;
    }

