    public AttributeDescriptor buildDescriptor(Name name, AttributeType type) {

        // build the descriptor
        AttributeDescriptor descriptor =
                factory.createAttributeDescriptor(
                        type, name, minOccurs(), maxOccurs(), isNillable, defaultValue());

        // set the user data
        descriptor.getUserData().putAll(userData);
        resetDescriptorState();
        return descriptor;
    }

