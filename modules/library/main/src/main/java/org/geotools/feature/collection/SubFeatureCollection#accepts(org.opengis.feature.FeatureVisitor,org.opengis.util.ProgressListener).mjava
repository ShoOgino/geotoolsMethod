	public void accepts(org.opengis.feature.FeatureVisitor visitor, org.opengis.util.ProgressListener progress) {
	    if( progress == null ) {
                progress = new NullProgressListener();
            }
	    SimpleFeatureIterator iterator = features();
            
        try{
            float size = size();
            float position = 0;            
            progress.started();
            while( !progress.isCanceled() && iterator.hasNext()){
                try {
                    SimpleFeature feature = (SimpleFeature) iterator.next();
                    visitor.visit(feature);
                }
                catch( Exception erp ){
                    progress.exceptionOccurred( erp );
                }
                progress.progress( position++/size );
            }            
        }
        finally {
            progress.complete();            
            iterator.close();
        }
	}	

