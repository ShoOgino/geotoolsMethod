    /**
     * Densifies the given geometry using the current densification configuration.
     *
     * <p>It returns the original geometry if densification is not enabled.
     */
    protected Geometry densify(Geometry geometry, boolean validate) {
        if (geometry != null && densify > 0.0) {
            try {
                // disable validation, it runs an expensive buffer operation that
                // can bring the VM to an OOM when run on large geometries.
                Densifier densifier = new Densifier(geometry);
                densifier.setDistanceTolerance(densify);
                densifier.setValidate(validate);
                return densifier.getResultGeometry();
            } catch (Throwable t) {
                LOGGER.warning("Cannot densify geometry");
            }
        }
        return geometry;
    }

