    /**
     * Tolerant map comparison. Two maps are considered to be equal if they express the same
     * content. So for example two null maps are equal, but also a null and an empty one are
     */
    static boolean equals(Map a, Map b) {
        if (a == b) return true;

        // null == null handled above
        if (a == null || b == null) return false;

        if (a != null && a.size() == 0 && b == null) return true;

        if (b != null && b.size() == 0 && a == null) return true;

        return a.equals(b);
    }

