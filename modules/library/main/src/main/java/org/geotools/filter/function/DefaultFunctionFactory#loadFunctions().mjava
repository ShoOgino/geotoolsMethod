    private void loadFunctions() {
        functionCache = new HashMap();
        
        // Get all the GeoTools FunctionExpression implementations
        // and store in functionExpressionCache
        // (these are implementations of the legacy GeoTools FunctionExpression
        // interface)
        Set functions = CommonFactoryFinder.getFunctionExpressions(null);
        for (Iterator it = functions.iterator(); it.hasNext();) {
            FunctionExpression function = (FunctionExpression) it.next();
            FunctionDescriptor fd = new FunctionDescriptor(
                filterFactory.functionName(function.getName(), function.getArgCount()), 
                function.getClass()); 
            
            functionCache.put(functionName(function.getName()), fd);
        }
        
        // Get all the GeoAPI Function implementations
        functions = CommonFactoryFinder.getFunctions(null);
        for (Iterator i = functions.iterator(); i.hasNext();) {
            Function function = (Function) i.next();
            int argc = function instanceof FunctionExpression ? 
                ((FunctionExpression)function).getArgCount() : function.getParameters().size();
            
            FunctionDescriptor fd = new FunctionDescriptor(
                filterFactory.functionName(function.getName(), argc), function.getClass());
            functionCache.put(functionName(function.getName()), fd);
        }
    }

