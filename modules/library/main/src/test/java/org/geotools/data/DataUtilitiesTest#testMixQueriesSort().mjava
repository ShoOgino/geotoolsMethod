    public void testMixQueriesSort() {
        // simple merge, no conflict
        Query q1 = new Query();
        Query q2 = new Query();
        q2.setSortBy(new SortBy[] {SortBy.NATURAL_ORDER});
        assertThat(
                DataUtilities.mixQueries(q1, q2, null).getSortBy(),
                arrayContaining(SortBy.NATURAL_ORDER));
        assertThat(
                DataUtilities.mixQueries(q2, q1, null).getSortBy(),
                arrayContaining(SortBy.NATURAL_ORDER));

        // more complex, override (the second wins)
        Query q3 = new Query();
        q3.setSortBy(new SortBy[] {SortBy.REVERSE_ORDER});
        assertThat(
                DataUtilities.mixQueries(q2, q3, null).getSortBy(),
                arrayContaining(SortBy.REVERSE_ORDER));
        assertThat(
                DataUtilities.mixQueries(q3, q2, null).getSortBy(),
                arrayContaining(SortBy.NATURAL_ORDER));
    }

