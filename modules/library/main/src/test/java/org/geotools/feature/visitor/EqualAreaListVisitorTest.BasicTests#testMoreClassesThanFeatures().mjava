        @Test
        public void testMoreClassesThanFeatures() throws SchemaException, IOException {
            ListFeatureCollection fc = getSimplifiedStatesCollection();
            Expression areaFunction = EqualAreaFunction.getCartesianAreaFunction();

            // twice as many classes
            EqualAreaListVisitor visitor =
                    new EqualAreaListVisitor(PERSONS, areaFunction, fc.size() * 2);
            fc.accepts(visitor, null);
            List<Double>[] result = (List<Double>[]) visitor.getResult().getValue();

            // check the number of classes has been reduced (43 not 49, not always possible to
            // fill all bins when there are so many classes)
            assertEquals(result.length, 43);
        }

