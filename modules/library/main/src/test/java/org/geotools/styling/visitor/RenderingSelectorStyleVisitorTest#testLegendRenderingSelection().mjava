    @Test
    public void testLegendRenderingSelection() {

        Style noOption = buildStyleWithInclusionOption(null);

        RenderingSelectorStyleVisitor selectorStyleVisitor =
                new LegendRenderingSelectorStyleVisitor();

        selectorStyleVisitor.visit(noOption);
        assertEquals(noOption, selectorStyleVisitor.getCopy());

        Style normal = buildStyleWithInclusionOption(NORMAL.getOption());

        selectorStyleVisitor = new LegendRenderingSelectorStyleVisitor();
        selectorStyleVisitor.visit(normal);
        assertEquals(normal, selectorStyleVisitor.getCopy());

        Style legendOnly = buildStyleWithInclusionOption(LEGENDONLY.getOption());

        selectorStyleVisitor = new LegendRenderingSelectorStyleVisitor();

        selectorStyleVisitor.visit(legendOnly);
        assertEquals(legendOnly, selectorStyleVisitor.getCopy());

        Style mapOnly = buildStyleWithInclusionOption(MAPONLY.getOption());

        selectorStyleVisitor = new LegendRenderingSelectorStyleVisitor();

        selectorStyleVisitor.visit(mapOnly);

        Style renderingSelected = (Style) selectorStyleVisitor.getCopy();
        assertNotEquals(mapOnly, renderingSelected);

        List<FeatureTypeStyle> featureTypeStyles = renderingSelected.featureTypeStyles();
        // original had 2
        assertEquals(1, featureTypeStyles.size());

        List<Rule> rules = featureTypeStyles.get(0).rules();
        // original had 2
        assertEquals(1, rules.size());

        List<Symbolizer> symbolizers = rules.get(0).symbolizers();
        // original had 2
        assertEquals(symbolizers.size(), 1);
    }

