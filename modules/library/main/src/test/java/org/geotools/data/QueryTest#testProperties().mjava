    /** Test of set/getProperties method, of class org.geotools.data.Query. */
    @Test
    public void testProperties() {
        final FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2(null);

        // System.out.println("testProperties");
        Query query = new Query();
        Assert.assertNull(query.getProperties());
        List<PropertyName> properties = new ArrayList<>();

        NamespaceSupport nsContext = new NamespaceSupport();
        nsContext.declarePrefix("foo", "FooNamespace");

        PropertyName fooProp = ff.property("foo", nsContext);
        PropertyName barProp = ff.property("bar", nsContext);
        properties.add(fooProp);
        properties.add(barProp);

        query.setProperties(properties);

        List<PropertyName> properties2 = query.getProperties();
        Assert.assertNotNull(properties);
        Assert.assertEquals(fooProp, properties2.get(0));
        Assert.assertEquals(barProp, properties2.get(1));
        Assert.assertEquals(nsContext, properties2.get(0).getNamespaceContext());

        // test compatibility with getPropertyNames method
        String[] names = query.getPropertyNames();
        Assert.assertEquals("foo", names[0]);
        Assert.assertEquals("bar", names[1]);

        query.setProperties(Query.ALL_PROPERTIES);
        Assert.assertNull(query.getProperties());

        query = new Query("Test", Filter.INCLUDE, properties);
        Assert.assertNotNull(query.getProperties());
    }

