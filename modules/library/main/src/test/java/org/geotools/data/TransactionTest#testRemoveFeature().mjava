    @Test
    public void testRemoveFeature() throws Exception {
        SimpleFeature f1 = SimpleFeatureBuilder.build(type, new Object[] {"one", geom}, null);

        SimpleFeatureStore store = (SimpleFeatureStore) ds.getFeatureSource("default");
        store.setTransaction(new DefaultTransaction());
        List<FeatureId> fid = store.addFeatures(DataUtilities.collection(f1));

        count(store, 2);
        FeatureId identifier = fid.iterator().next();
        String next = identifier.getID();
        FilterFactory filterFactory = CommonFactoryFinder.getFilterFactory(null);
        Filter f = filterFactory.id(Collections.singleton(filterFactory.featureId(next)));
        store.removeFeatures(f);

        count(store, 1);
        //        assertEquals("Number of known feature as obtained from getCount",3,
        // store.getCount(Query.ALL));
    }

