    @Test
    public void testSequence() throws Exception {
        ServiceException exception =
                ServiceExceptionParser.parse(
                        mockStream(
                                "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n"
                                        + "<ServiceExceptionReport>\n"
                                        + "  <ServiceException code=\"42\">test</ServiceException>\n"
                                        + "  <ServiceException code=\"20\">another test</ServiceException>\n"
                                        + "  <ServiceException code=\"60\">yet another test</ServiceException>\n"
                                        + "</ServiceExceptionReport>"));

        assertThat(
                exception,
                both(hasProperty("message", equalTo("test")))
                        .and(hasProperty("code", equalTo("42"))));
        assertThat(
                exception.getNext(),
                both(hasProperty("message", equalTo("another test")))
                        .and(hasProperty("code", equalTo("20"))));
        assertThat(
                exception.getNext().getNext(),
                both(hasProperty("message", equalTo("yet another test")))
                        .and(hasProperty("code", equalTo("60"))));
        assertThat(exception.getNext().getNext().getNext(), nullValue());
    }

