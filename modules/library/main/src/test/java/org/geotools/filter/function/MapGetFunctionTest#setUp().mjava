    @Before
    public void setUp() throws Exception {
        SimpleFeatureTypeBuilder builder = new SimpleFeatureTypeBuilder();
        builder.setName("map");
        builder.setNamespaceURI(namespace);

        builder.add(createAttribute("id", String.class));
        builder.add(createAttribute("geom", LineString.class));
        builder.setDefaultGeometry("geom");
        builder.add(createAttribute("name", String.class));
        builder.add(createAttribute("attributes", Map.class));
        sampleDataType = builder.buildFeatureType();

        gf = new GeometryFactory();

        features = new SimpleFeature[3];
        features[0] =
                SimpleFeatureBuilder.build(
                        sampleDataType,
                        new Object[] {
                            Integer.valueOf(1),
                            line(new int[] {1, 1, 2, 2, 4, 2, 5, 1}),
                            "object1",
                            new HashMap<String, Object>() {
                                {
                                    put("name", "firstObject");
                                    put("valid", false);
                                    put("score", 100);
                                    put("key1", "value1");
                                }
                            }
                        },
                        "sample.s1");

        features[1] =
                SimpleFeatureBuilder.build(
                        sampleDataType,
                        new Object[] {
                            Integer.valueOf(2),
                            line(new int[] {3, 0, 3, 2, 3, 3, 3, 4}),
                            "object2",
                            new HashMap<String, Object>() {
                                {
                                    put("name", "secondObject");
                                    put("valid", true);
                                    put("score", 50);
                                    put("key1", 10);
                                }
                            }
                        },
                        "sample.s2");

        features[2] =
                SimpleFeatureBuilder.build(
                        sampleDataType,
                        new Object[] {
                            Integer.valueOf(2),
                            line(new int[] {3, 2, 4, 2, 5, 3}),
                            "object3",
                            new HashMap<String, Object>() {
                                {
                                    put("name", "thirdObject");
                                    put("score", 70);
                                    put("key1", true);
                                }
                            }
                        },
                        "sample.s3");
    }

