    /** Test for ticket GEOT-5684 Bounds cache was wrong after features were removed from list */
    @Test
    public void removeAndAddFeatureBounds() {
        // create test points
        createPointFeatures(WORLD, 3);
        // remove last feature in collection
        List<SimpleFeature> copy = new ArrayList<>(featureList);
        SimpleFeature f = copy.get(2);
        featureCollection.remove(f);
        // get the new bounds (removed feature)
        ReferencedEnvelope postRemoveFeatureBounds = featureCollection.getBounds();
        // add new feature
        SimpleFeature newFeature = createPointFeature(10, 4);
        featureCollection.add(newFeature);
        // get new bounds
        ReferencedEnvelope newFeatureBounds = featureCollection.getBounds();
        // compare new bounds with old
        boolean isContained = newFeatureBounds.contains((Envelope) postRemoveFeatureBounds);
        assertTrue(isContained);
        // ensure new point bounds don't equal over-all bounds
        assertNotEquals(newFeatureBounds, newFeature.getBounds());
    }

