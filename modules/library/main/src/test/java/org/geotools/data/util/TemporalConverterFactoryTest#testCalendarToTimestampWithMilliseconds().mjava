    /** Make sure that milliseconds do not get lost after conversion */
    @Test
    public void testCalendarToTimestampWithMilliseconds() throws Exception {
        Calendar calendar = Calendar.getInstance();
        long offset = 123;

        calendar.set(Calendar.MILLISECOND, (int) offset);
        Assert.assertNotNull(factory.createConverter(Calendar.class, Timestamp.class, null));
        Calendar calWithMs = (Calendar) calendar.clone();

        Timestamp timeStamp =
                factory.createConverter(Calendar.class, Timestamp.class, null)
                        .convert(calendar, Timestamp.class);
        Assert.assertNotNull(timeStamp);
        Assert.assertEquals(new Timestamp(calWithMs.getTime().getTime()), timeStamp);
        Assert.assertEquals(new Timestamp(calendar.getTime().getTime()), timeStamp);
    }

