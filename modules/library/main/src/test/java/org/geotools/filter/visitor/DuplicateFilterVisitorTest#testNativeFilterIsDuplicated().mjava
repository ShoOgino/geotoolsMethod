    public void testNativeFilterIsDuplicated() {
        // build a filter that uses a native filter
        BBOX boundingBoxFilter =
                fac.bbox("geometry", -5, -5, 5, 5, DefaultGeographicCRS.WGS84.toString());
        NativeFilter nativeFilter = fac.nativeFilter("SOME NATIVE FILTER");
        Filter filter = fac.and(boundingBoxFilter, nativeFilter);
        // duplicate the filter
        DuplicatingFilterVisitor visitor = new DuplicatingFilterVisitor(fac);
        Filter duplicated = (Filter) filter.accept(visitor, null);
        // let's see if the native filter was correctly duplicated
        assertThat(duplicated, instanceOf(And.class));
        And andFilter = (And) duplicated;
        assertThat(andFilter.getChildren().size(), is(2));
        List<Filter> found =
                andFilter
                        .getChildren()
                        .stream()
                        .filter(child -> child instanceof NativeFilter)
                        .collect(Collectors.toList());
        assertThat(found.size(), is(1));
        assertThat(((NativeFilter) found.get(0)).getNative(), is("SOME NATIVE FILTER"));
    }

