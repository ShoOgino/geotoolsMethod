    @Test
    public void testGetLocalValues() {
        final String varName = "foo";
        final String varValue = "clearLocal";

        EnvFunction.setLocalValue(varName, varValue);
        Map<String, Object> localValues = EnvFunction.getLocalValues();
        assertEquals(localValues, Collections.singletonMap(varName.toUpperCase(), varValue));

        try {
            localValues.put(varName, "fooBar");
            fail("Should have been read only");
        } catch (UnsupportedOperationException e) {
            // as expected
        }
    }

