    /**
     * Test method for {@link
     * org.geotools.data.collection.SpatialIndexFeatureCollection#subCollection(org.opengis.filter.Filter)}.
     */
    @Test
    public void testSimpleSubCollection() {
        // delegate has 5 points running diagonally from -140,45 -> -136,49
        ReferencedEnvelope bbox =
                new ReferencedEnvelope(-145, -139.5, 44, 47, DefaultGeographicCRS.WGS84);

        Filter filter =
                ff.bbox(
                        ff.property(delegate.getSchema().getGeometryDescriptor().getLocalName()),
                        bbox);
        SpatialIndexFeatureCollection collection = null;
        try {
            collection = new SpatialIndexFeatureCollection(delegate);
        } catch (IOException e) {
            LOGGER.log(Level.FINER, e.getMessage(), e);
        }
        SimpleFeatureCollection sub = collection.subCollection(filter);
        assertEquals(1, sub.size());
    }

