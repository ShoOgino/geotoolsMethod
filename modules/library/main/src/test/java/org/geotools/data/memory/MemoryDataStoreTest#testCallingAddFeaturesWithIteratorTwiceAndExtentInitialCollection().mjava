    @Test
    public void testCallingAddFeaturesWithIteratorTwiceAndExtentInitialCollection()
            throws IOException {
        try (FeatureReader<SimpleFeatureType, SimpleFeature> reader =
                DataUtilities.reader(roadFeatures)) {
            MemoryDataStore mds = new MemoryDataStore(reader);

            Assert.assertEquals(
                    roadFeatures.length, mds.entry(roadType.getTypeName()).getMemory().size());

            try (SimpleFeatureIterator featureIterator =
                    DataUtilities.collection(
                                    new SimpleFeature[] {
                                        SimpleFeatureBuilder.template(roadType, null)
                                    })
                            .features()) {

                mds.addFeatures(featureIterator);

                Assert.assertEquals(roadFeatures.length + 1, mds.entry("road").getMemory().size());
            }
        }
    }

