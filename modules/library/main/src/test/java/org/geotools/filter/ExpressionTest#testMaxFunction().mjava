    /**
     * Tests the max function expression.
     *
     * @throws IllegalFilterException if filter problems
     */
    @Test
    public void testMaxFunction() throws IllegalFilterException {
        org.opengis.filter.expression.Expression a, b;
        a = new AttributeExpressionImpl(testSchema, "testInteger");
        b = new LiteralExpressionImpl(Double.valueOf(1004));

        Function max = ff.function("max", a, b);
        Assert.assertEquals(1004d, ((Double) max.evaluate(testFeature)).doubleValue(), 0);

        b = new LiteralExpressionImpl(Double.valueOf(-100.001));
        max = ff.function("max", a, b);
        Assert.assertEquals(1002d, ((Double) max.evaluate(testFeature)).doubleValue(), 0);
    }

