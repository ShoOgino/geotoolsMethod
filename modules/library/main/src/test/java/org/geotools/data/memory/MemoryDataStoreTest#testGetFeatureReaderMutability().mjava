    @Test
    public void testGetFeatureReaderMutability() throws IOException {
        try (FeatureReader<SimpleFeatureType, SimpleFeature> reader =
                data.getFeatureSource("road").getReader()) {
            SimpleFeature feature;

            while (reader.hasNext()) {
                feature = reader.next();
                feature.setAttribute("name", null);
            }
        }

        @SuppressWarnings("PMD.CloseResource") // need to test behavior after close
        FeatureReader<SimpleFeatureType, SimpleFeature> reader =
                data.getFeatureSource("road").getReader();
        while (reader.hasNext()) {
            SimpleFeature feature = reader.next();
            assertNotNull(feature.getAttribute("name"));
        }

        reader.close();

        try {
            reader.next();
            fail("next should fail with an IOException");
        } catch (IOException expected) {
        }
    }

