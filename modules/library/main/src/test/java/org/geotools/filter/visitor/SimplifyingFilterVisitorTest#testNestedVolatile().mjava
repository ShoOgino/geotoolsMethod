    @Test
    public void testNestedVolatile() {
        EnvFunction.setLocalValue("power", 3);
        Function f =
                ff.function("pow", ff.function("random"), ff.function("env", ff.literal("power")));

        Function result = (Function) f.accept(simpleVisitor, null);
        // main function not simplified out
        Assert.assertEquals("pow", result.getName());
        // first argument not simplified out
        Function param1 = (Function) result.getParameters().get(0);
        Assert.assertEquals("random", param1.getName());
        // second argument simplified out
        Expression param2 = result.getParameters().get(1);
        Assert.assertTrue(param2 instanceof Literal);
        Assert.assertEquals(Integer.valueOf(3), param2.evaluate(null, Integer.class));
    }

