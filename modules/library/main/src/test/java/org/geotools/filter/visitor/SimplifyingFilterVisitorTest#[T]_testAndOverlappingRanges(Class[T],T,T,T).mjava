    private <T> void testAndOverlappingRanges(Class<T> type, T min, T mid, T max) throws Exception {
        SimpleFeatureType schema = DataUtilities.createType("test", "a:" + type.getName());
        SimplifyingFilterVisitor visitor = new SimplifyingFilterVisitor();
        visitor.setRangeSimplicationEnabled(true);
        visitor.setFeatureType(schema);

        // excluding extrema, not possible to turn it into a between filter
        Filter original =
                ff.and(
                        Arrays.asList( //
                                ff.greater(ff.property("a"), ff.literal(min)), //
                                ff.less(ff.property("a"), ff.literal(max)), //
                                ff.less(ff.property("a"), ff.literal(mid))));

        Filter simplified = (Filter) original.accept(visitor, null);
        Assert.assertEquals(
                ff.and(
                        ff.greater(ff.property("a"), ff.literal(min)), //
                        ff.less(ff.property("a"), ff.literal(mid))),
                simplified);
    }

