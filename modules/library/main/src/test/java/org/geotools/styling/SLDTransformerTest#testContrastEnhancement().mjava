    @Test
    public void testContrastEnhancement() throws Exception {
        StyleBuilder sb = new StyleBuilder();
        
        ContrastEnhancement ce = new ContrastEnhancementImpl();
        Normalize normal = new Normalize();
        normal.setAlgorithm(ff.literal("MyTestAlgorithm"));
        normal.addParameter("p1", ff.literal(false));
        normal.addParameter("p2", ff.literal(23.5d));
        ce.setMethod(normal);
        SLDTransformer st = new SLDTransformer();     
        String xml = st.transform(ce);
    //    System.out.println(xml);
        Document doc = buildTestDocument(xml);
        assertXpathExists( "//sld:ContrastEnhancement/sld:Normalize", doc);
        assertXpathEvaluatesTo("false", "//sld:ContrastEnhancement/sld:Normalize/sld:Parameter[@name='p1']", doc);
        assertXpathEvaluatesTo("MyTestAlgorithm", "//sld:ContrastEnhancement/sld:Normalize/sld:Algorithm", doc);
        
        Histogram hist = new Histogram();
        ce.setMethod(hist);
        xml = st.transform(ce);
        String skeleton = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><sld:ContrastEnhancement xmlns=\"http://www.opengis.net/sld\" xmlns:sld=\"http://www.opengis.net/sld\" xmlns:ogc=\"http://www.opengis.net/ogc\" xmlns:gml=\"http://www.opengis.net/gml\"><sld:Histogram/></sld:ContrastEnhancement>";
  //      System.out.println(xml);
        Diff myDiff = new Diff(skeleton, xml);
        
        assertTrue("test XML matches control skeleton XML " + myDiff, myDiff.similar());
        //assertXpathNotExists("//sld:ContrastEnhancement/sld:Histogram/sld:Algorithm",doc);
    
        Logarithmic log = new Logarithmic();
        ce.setMethod(log);
        xml = st.transform(ce);
        //System.out.println(xml);
        skeleton = skeleton.replace("Histogram", "Logarithmic");
        myDiff = new Diff(skeleton, xml);
        
        assertTrue("test XML matches control skeleton XML " + myDiff, myDiff.similar());
        
        
        Exponential exp = new Exponential();
        ce.setMethod(exp);
        xml = st.transform(ce);
        //System.out.println(xml);
        skeleton = skeleton.replace("Logarithmic", "Exponential");
        myDiff = new Diff(skeleton, xml);
        
        assertTrue("test XML matches control skeleton XML " + myDiff, myDiff.similar());
    }

