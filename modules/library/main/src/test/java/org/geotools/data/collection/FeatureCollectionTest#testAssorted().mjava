    @Test
    public void testAssorted() {
        TreeSetFeatureCollection copy = new TreeSetFeatureCollection();
        copy.addAll(features);
        copy.clear();
        Assert.assertTrue(copy.isEmpty());
        copy.addAll(features);
        Assert.assertFalse(copy.isEmpty());

        List<SimpleFeature> list = DataUtilities.list(features);
        SimpleFeature[] f1 = list.toArray(new SimpleFeature[list.size()]);
        SimpleFeature[] f2 = features.toArray(new SimpleFeature[list.size()]);
        Assert.assertEquals(f1.length, f2.length);
        for (int i = 0; i < f1.length; i++) {
            Assert.assertSame(f1[i], f2[i]);
        }
        try (SimpleFeatureIterator copyIterator = copy.features();
                SimpleFeatureIterator featuresIterator = features.features()) {
            while (copyIterator.hasNext() && featuresIterator.hasNext()) {
                Assert.assertEquals(copyIterator.next(), featuresIterator.next());
            }
        }
    }

