    private void checkStringNameEncodeDecode(String name)
            throws IOException, NoSuchAuthorityCodeException, FactoryException,
                    FileNotFoundException {
        File tempFile = File.createTempFile("temp", "simpleFeatureIO");
        SimpleFeatureTypeBuilder typeBuilder = new SimpleFeatureTypeBuilder();
        typeBuilder.setName("type1");
        typeBuilder.add(NAME_FIELD, String.class);
        typeBuilder.add("location", Point.class, CRS.decode("EPSG:4326"));
        SimpleFeatureType type = typeBuilder.buildFeatureType();
        if (name.getBytes().length >= SimpleFeatureIO.MAX_BYTES_LENGTH)
            type.getDescriptor(NAME_FIELD)
                    .getUserData()
                    .put(SimpleFeatureIO.BIG_STRING, Boolean.TRUE);
        // create a feature
        SimpleFeatureBuilder fbuilder = new SimpleFeatureBuilder(type);
        fbuilder.set(NAME_FIELD, name);
        GeometryBuilder gb = new GeometryBuilder();
        fbuilder.set("location", gb.point(10, 10));
        SimpleFeature feature = fbuilder.buildFeature("1");
        // io util
        SimpleFeatureIO sfio = new SimpleFeatureIO(tempFile, type);
        sfio.write(feature);
        sfio.close(false);
        // check reading
        sfio = new SimpleFeatureIO(tempFile, type);
        SimpleFeature readFeature = sfio.read();
        assertEquals(name.length(), ((String) readFeature.getAttribute(NAME_FIELD)).length());
        assertEquals(name, (String) readFeature.getAttribute(NAME_FIELD));
        sfio.close(true);
    }

