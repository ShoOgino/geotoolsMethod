    /** Test createType and createFeature methods as per GEOT-4150 */
    @Test
    public void testCreate() throws Exception {
        SimpleFeatureType featureType =
                DataUtilities.createType(
                        "Contact", "id:Integer,party:String,geom:Geometry:srid=4326");
        SimpleFeature feature1 =
                DataUtilities.createFeature(
                        featureType, "fid1=1|Jody Garnett\\nSteering Committee|POINT(1 2)");
        SimpleFeature feature2 =
                DataUtilities.createFeature(
                        featureType, "2|John Hudson\\|Hapless Victim|POINT(6 2)");

        assertNotNull(featureType.getCoordinateReferenceSystem());

        Geometry geometry = (Geometry) feature1.getAttribute("geom");
        Assert.assertEquals("geom", 2.0, geometry.getCoordinate().y, 0d);
        Assert.assertEquals("fid preservation", "fid1", feature1.getID());

        // test escape handling
        Assert.assertEquals(
                "newline decode check",
                "Jody Garnett\nSteering Committee",
                feature1.getAttribute("party"));
        Assert.assertEquals(
                "escape check", "John Hudson|Hapless Victim", feature2.getAttribute("party"));

        // test feature id handling
        Assert.assertEquals("fid1", feature1.getID());
        assertNotNull(feature2.getID());
        Assert.assertEquals(feature2.getID(), feature2.getIdentifier().getID());

        // test geometry handling
        GeometryBuilder geomBuilder = new GeometryBuilder();
        Assert.assertEquals(geomBuilder.point(6, 2), feature2.getDefaultGeometry());
        Assert.assertEquals(geomBuilder.point(6, 2), feature2.getAttribute("geom"));
    }

