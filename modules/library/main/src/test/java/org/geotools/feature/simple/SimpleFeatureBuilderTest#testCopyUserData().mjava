    @Test
    public void testCopyUserData() throws Exception {
        SimpleFeature template = buildUserDataFeature();
        builder = new SimpleFeatureBuilder(template.getFeatureType());
        GeometryFactory gf = new GeometryFactory();
        builder.add(gf.createPoint(new Coordinate(1, 1)));
        builder.add(Integer.valueOf(2));
        builder.add(Float.valueOf(4.0f));
        builder.featureUserData(template);
        SimpleFeature feature = builder.buildFeature("myfid");

        Assert.assertEquals("bar", feature.getUserData().get("foo"));
    }

