    /** Test of evaluate method, of class FilterFunction_minimumDiameter. */
    @Test
    public void testEvaluate() throws Exception {
        SimpleFeatureCollection featureCollection = FunctionTestFixture.polygons();

        // Test the Function
        FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2(GeoTools.getDefaultHints());
        Function exp = ff.function("minimumdiameter", ff.property("geom"));
        try (SimpleFeatureIterator iter = featureCollection.features()) {
            while (iter.hasNext()) {
                SimpleFeature feature = iter.next();
                Geometry geom = (Geometry) feature.getDefaultGeometry();
                Geometry minimumDiameter = new MinimumDiameter(geom).getDiameter();
                Object value = exp.evaluate(feature);
                assertTrue(value instanceof LineString);
                assertTrue(minimumDiameter.equalsExact((Geometry) value, 0.1));
            }
        }

        // Check for null safeness
        assertNull(exp.evaluate(null));
    }

