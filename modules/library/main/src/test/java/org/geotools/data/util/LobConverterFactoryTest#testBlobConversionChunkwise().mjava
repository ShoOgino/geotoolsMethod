    public void testBlobConversionChunkwise() throws Exception {
        byte[] expected = {1, 2, 3};
        ByteArrayInputStream is = new ByteArrayInputStream(expected);

        Blob blob = EasyMock.createMock(Blob.class);
        EasyMock.expect(blob.length()).andThrow(new SQLFeatureNotSupportedException());
        EasyMock.expect(blob.getBinaryStream()).andReturn(is);
        EasyMock.replay(blob);

        byte[] actual = convert(blob);
        assertArrayEquals(expected, actual);
    }

