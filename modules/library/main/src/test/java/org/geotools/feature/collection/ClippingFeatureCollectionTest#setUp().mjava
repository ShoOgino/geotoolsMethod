    @Before
    public void setUp() throws Exception {
        SimpleFeatureTypeBuilder tb = new SimpleFeatureTypeBuilder();
        tb.setName("foo");
        tb.add("geom", Point.class);
        tb.add("name", String.class);

        SimpleFeatureType featureType = tb.buildFeatureType();

        delegate = new DefaultFeatureCollection(null, featureType);

        SimpleFeatureBuilder b = new SimpleFeatureBuilder(featureType);
        GeometryFactory factory = new GeometryFactory();
        for (int i = 0; i < 10; i++) {
            b.add(factory.createPoint(new Coordinate(i, i)));
            b.add(String.valueOf(i));
            SimpleFeature feature = b.buildFeature("fid." + i);
            if (i < 2) {
                // adding a Point that will not intersect the first
                // two features
                feature.getUserData()
                        .put(
                                Hints.GEOMETRY_CLIP,
                                factory.createPoint(new Coordinate(i + 1, i + 1)));
            }
            delegate.add(feature);
        }
    }

