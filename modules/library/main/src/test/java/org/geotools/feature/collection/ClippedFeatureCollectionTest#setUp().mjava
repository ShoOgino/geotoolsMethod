    @Before
    public void setUp() throws Exception {

        WKTReader reader = new WKTReader();

        // polygon
        SimpleFeatureTypeBuilder tb = new SimpleFeatureTypeBuilder();
        tb.setName("Polygons3D");
        tb.add("geom", Polygon.class);
        tb.add("name", String.class);
        SimpleFeatureType featureType = tb.buildFeatureType();
        delegatePolygonZ = new DefaultFeatureCollection(null, featureType);
        SimpleFeatureBuilder bPoly = new SimpleFeatureBuilder(featureType);
        Geometry geom = reader.read("POLYGON((0 0 0, 0 10000 2, 10000 10000 2, 10000 0 0, 0 0 0))");
        bPoly.add(geom);
        bPoly.add("one");
        delegatePolygonZ.add(bPoly.buildFeature("fid.1"));
        bPoly.reset();

        Geometry geom2 = reader.read("POLYGON((0 0, 0 5000, 5000 5000, 5000 0, 0 0))");
        bPoly.add(geom2);
        bPoly.add("two");
        delegatePolygonZ.add(bPoly.buildFeature("fid.2"));

        // Multi lines
        SimpleFeatureTypeBuilder tbML = new SimpleFeatureTypeBuilder();
        tbML.setName("MultiLines");
        tbML.add("geom", MultiLineString.class);
        tbML.add("name", String.class);
        SimpleFeatureType featureTypeML = tbML.buildFeatureType();
        delegateMultiLineZ = new DefaultFeatureCollection(null, featureTypeML);
        SimpleFeatureBuilder bML = new SimpleFeatureBuilder(featureTypeML);
        Geometry geomML =
                reader.read(
                        "MULTILINESTRING((1000 0 0, 1000 1000 1, 2000 1000 2, 2000 0 3), (1000 3000 0, 1000 2000 1, 2000 2000 2, 2000 3000 3))");
        bML.add(geomML);
        bML.add("one");
        delegateMultiLineZ.add(bML.buildFeature("fid.1"));

        // lines

        SimpleFeatureTypeBuilder tbL = new SimpleFeatureTypeBuilder();
        tbL.setName("Lines");
        tbL.add("geom", LineString.class);
        tbL.add("name", String.class);
        SimpleFeatureType featureTypeL = tbL.buildFeatureType();
        delegateLineZ = new DefaultFeatureCollection(null, featureTypeL);
        SimpleFeatureBuilder bL = new SimpleFeatureBuilder(featureTypeL);
        Geometry geomL = reader.read("LINESTRING(0 0 0, 10000 0 1, 10000 10000 2)");
        bL.add(geomL);
        bL.add("one");
        delegateLineZ.add(bL.buildFeature("fid.1"));
    }

