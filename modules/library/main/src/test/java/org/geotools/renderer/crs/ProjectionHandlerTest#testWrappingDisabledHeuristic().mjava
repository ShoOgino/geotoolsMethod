    @Test
    public void testWrappingDisabledHeuristic() throws Exception {
        ReferencedEnvelope world = new ReferencedEnvelope(-180, 180, -40, 40, WGS84);
        ReferencedEnvelope mercatorEnvelope = world.transform(MERCATOR, true);
        // move it so that it crosses the dateline (measures are still accurate for something
        // crossing the dateline
        mercatorEnvelope.translate(mercatorEnvelope.getWidth() / 2, 0);

        // a geometry that will cross the dateline and sitting in the same area as the
        // rendering envelope
        Geometry g = new WKTReader().read("LINESTRING(-40 20, 190 20)");
        Map<String, Object> params = new HashMap<>();
        params.put(WrappingProjectionHandler.DATELINE_WRAPPING_CHECK_ENABLED, false);

        MathTransform mt = CRS.findMathTransform(WGS84, MERCATOR, true);
        Geometry reprojected = JTS.transform(g, mt);

        ProjectionHandler handler =
                ProjectionHandlerFinder.getHandler(mercatorEnvelope, WGS84, true, params);
        Geometry processed = handler.postProcess(mt, reprojected);

        assertEquals(processed.getGeometryN(0), reprojected);

        params.put(WrappingProjectionHandler.DATELINE_WRAPPING_CHECK_ENABLED, true);
        handler = ProjectionHandlerFinder.getHandler(mercatorEnvelope, WGS84, true, params);

        processed = handler.postProcess(mt, reprojected);

        assertNotEquals(processed.getGeometryN(0), reprojected);
    }

