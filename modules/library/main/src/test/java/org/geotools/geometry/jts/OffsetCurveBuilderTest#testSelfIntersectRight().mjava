    @Test
    public void testSelfIntersectRight() throws Exception {
        Geometry geom = geometry("LINESTRING(0 0, 10 0, 10 -10, 3 -10, 3 3)");
        Geometry offset = offset(geom, -1);
        assertTrue(offset.isValid());
        assertTrue(offset.getLength() > 0);
        // the offset line intersects the original one, because it's also self intersecting, so we cannot have this test
        // assertEquals(2, offset.distance(geom), EPS);
        assertEquals(geometry("LINESTRING (0 -1, 9 -1, 9 -9, 4 -9, 4 3)"), offset);
    }

