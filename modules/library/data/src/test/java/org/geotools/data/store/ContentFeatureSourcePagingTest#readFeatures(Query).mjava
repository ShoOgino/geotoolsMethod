    /**
     * Read all the test features into a list, using the specified query.
     */
    private List<SimpleFeature> readFeatures(Query query) {
        List<SimpleFeature> features = new ArrayList<SimpleFeature>();
        DataStore store = new MockContentDataStore();
        SimpleFeatureCollection collection;
        try {
            collection = store.getFeatureSource(TYPENAME).getFeatures(query);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        for (SimpleFeatureIterator iterator = collection.features(); iterator.hasNext();) {
            features.add(iterator.next());
        }
        return features;
    }

