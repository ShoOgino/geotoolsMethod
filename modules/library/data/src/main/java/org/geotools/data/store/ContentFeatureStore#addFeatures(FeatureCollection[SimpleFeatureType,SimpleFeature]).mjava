    /**
     * Adds a collection of features to the store.
     * <p>
     * This method calls through to {@link #addFeatures(Collection)}.
     * </p>
     */
    public final List<FeatureId> addFeatures(FeatureCollection<SimpleFeatureType,SimpleFeature> collection)
        throws IOException {
        // gather up id's
        List<FeatureId> ids = new LinkedList<FeatureId>();
        
        FeatureWriter<SimpleFeatureType, SimpleFeature> writer = getWriterAppend();
        FeatureIterator<SimpleFeature> f = collection.features();
        try {
            while (f.hasNext()) {
                SimpleFeature feature = (SimpleFeature) f.next();
                FeatureId id = addFeature(feature, writer);
                ids.add( id );
            }
        } finally {
            writer.close();
            f.close();
        }        
        return ids;
    }

