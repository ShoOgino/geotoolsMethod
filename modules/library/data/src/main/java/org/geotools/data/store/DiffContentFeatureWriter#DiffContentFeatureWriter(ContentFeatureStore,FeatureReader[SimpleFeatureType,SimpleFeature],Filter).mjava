    /**
     * DiffFeatureWriter construction.
     * 
     * @param reader
     * @param diff
     * @param filter
     */
    public DiffContentFeatureWriter(ContentFeatureStore store, FeatureReader<SimpleFeatureType, SimpleFeature> reader,
            Filter filter) {
        this.reader = new DiffContentFeatureReader<SimpleFeatureType, SimpleFeature>(store, reader, filter );
        this.store = store;
        this.state = (DiffContentState) store.getState();
        this.diff = state.diff();
    }

