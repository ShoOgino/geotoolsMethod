    /**
     * Get the names of the properties that this Query will retrieve as part of the returned
     * {@linkplain org.geotools.feature.FeatureCollection}.
     *
     * @return the attributes to be used in the returned FeatureCollection.
     * @see #retrieveAllProperties()
     * @task REVISIT: make a FidProperties object, instead of an array size 0. I think Query.FIDS
     *     fills this role to some degree. Query.FIDS.equals( filter ) would meet this need?
     */
    public String[] getPropertyNames() {
        if (properties == null) {
            return null;
        }

        String[] propertyNames = new String[properties.size()];
        for (int i = 0; i < properties.size(); i++) {
            PropertyName propertyName = properties.get(i);
            if (propertyName != null) {
                String xpath = propertyName.getPropertyName();
                propertyNames[i] = xpath;
            }
        }
        return propertyNames;
    }

