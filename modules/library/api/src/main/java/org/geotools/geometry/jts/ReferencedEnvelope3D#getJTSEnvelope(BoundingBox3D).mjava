    /** Returns the specified bounding box as a JTS envelope. */
    private static ReferencedEnvelope3D getJTSEnvelope(final BoundingBox3D bbox) {
        if (bbox == null) {
            throw new NullPointerException("Provided bbox envelope was null");
        }
        if (bbox instanceof ReferencedEnvelope3D) {
            return (ReferencedEnvelope3D) bbox;
        }
        return new ReferencedEnvelope3D(bbox);
    }

