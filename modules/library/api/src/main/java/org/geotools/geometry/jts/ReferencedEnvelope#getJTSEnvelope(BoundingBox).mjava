    /**
     * Returns the specified bounding box as a JTS envelope.
     */
    private static Envelope getJTSEnvelope(final BoundingBox bbox) {
        if( bbox == null ){
            throw new NullPointerException("Provided bbox envelope was null");
        }
        if (bbox instanceof Envelope) {
            return (Envelope) bbox;
        }        
        // safe creation if empty bounds
        return ReferencedEnvelope.create(bbox, bbox.getCoordinateReferenceSystem());
    }

