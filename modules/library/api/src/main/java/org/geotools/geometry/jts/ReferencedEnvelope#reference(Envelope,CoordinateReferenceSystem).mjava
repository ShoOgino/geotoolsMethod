    /**
     * Utility method to create a ReferencedEnvelope from an JTS Envelope class,
     * supporting 2d as well as 3d envelopes (returning the right class).
     * 
     * @param env The JTS Envelope object
     * @return ReferencedEnvelope, ReferencedEnvelope3D if it is 3d
     */
    public static ReferencedEnvelope reference(Envelope env, CoordinateReferenceSystem crs) {
        if (env == null) {
            return null;
        }
        if( env instanceof ReferencedEnvelope ){
            
        }
        
        if (crs.getCoordinateSystem().getDimension() >= 3) {
            return new ReferencedEnvelope3D( env.getMinX(), env.getMaxX(), env.getMinY(), env.getMaxY(), Double.NaN, Double.NaN, crs );
        }
        
        return new ReferencedEnvelope( env, crs );
    }

