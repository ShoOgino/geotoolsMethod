    /**
     * Utility method to create a ReferencedEnvelope from an opengis Envelope class,
     * supporting 2d as well as 3d envelopes (returning the right class).
     * 
     * @param env The opgenis Envelope object
     * @return ReferencedEnvelope, ReferencedEnvelope3D if it is 3d
     */
    public static ReferencedEnvelope reference(org.opengis.geometry.Envelope env) {
    	
    	if (env == null) {
            return null;
        }
    	
    	if (env instanceof ReferencedEnvelope3D) {
            return (ReferencedEnvelope3D) env;
        }

        if (env instanceof ReferencedEnvelope) {
            return (ReferencedEnvelope) env;
        }    	
    	
    	if (env.getDimension() == 3) {
    		return new ReferencedEnvelope3D(env);
    	}
    	
    	return new ReferencedEnvelope(env);
    }

