    @Test(expected = IllegalStateException.class)
    public void testIsolatedLoop() {
        PartiallyOrderedSet<String> poset = new PartiallyOrderedSet<>();
        poset.add("a");
        poset.add("b");
        poset.add("c");
        poset.add("d");
        poset.setOrder("a", "b");
        poset.setOrder("b", "c");
        poset.setOrder("c", "a");

        // get the iterator, should throw after the first item
        Iterator<String> it = poset.iterator();
        it.next();
        it.next();
    }

