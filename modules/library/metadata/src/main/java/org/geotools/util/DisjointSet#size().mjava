    /**
     * Returns the number of elements in this set. The size of this set may change as a result of
     * adding elements to a mutually exclusive set.
     */
    public int size() {
        synchronized (map) {
            int count = 0;
            for (final Iterator it = map.values().iterator(); it.hasNext(); ) {
                if (it.next() == this) {
                    count++;
                }
            }
            return count;
        }
    }

