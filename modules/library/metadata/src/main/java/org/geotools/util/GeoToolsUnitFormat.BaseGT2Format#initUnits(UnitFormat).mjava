        protected void initUnits(UnitFormat base) {
            /**
             * Labels and alias are only defined on the DEFAULT format instance, so these
             * definitions are not inherited by subclassing DefaultFormat. Therefore, we need to
             * clone these definitions in our GT formats
             */
            try {
                HashMap<String, Unit<?>> nameToUnitMap = getNameToUnitMap(base);
                HashMap<Unit<?>, String> unitToNameMap = getUnitToNameMap(base);

                for (Map.Entry<String, Unit<?>> entry : nameToUnitMap.entrySet()) {
                    String name = entry.getKey();
                    Unit<?> unit = entry.getValue();

                    if (unitToNameMap.containsKey(unit) && name.equals(unitToNameMap.get(unit))) {
                        label(unit, name);
                        addUnit(unit);
                    } else {
                        alias(unit, name);
                    }
                }
            } catch (Throwable t) {
                throw new RuntimeException(
                        "Failed to initialize the "
                                + this.getClass().getCanonicalName()
                                + " format unit parser with the same values as "
                                + base.getClass().getCanonicalName()
                                + "  one",
                        t);
            }
        }

