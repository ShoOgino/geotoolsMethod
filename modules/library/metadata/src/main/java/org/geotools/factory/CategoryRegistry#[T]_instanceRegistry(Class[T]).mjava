	private <T> InstanceRegistry<T> instanceRegistry(final Class<T> category) {
		@SuppressWarnings("unchecked")
		InstanceRegistry<T> registry = (InstanceRegistry<T>) categories.get(category);
		if (registry == null) {
			// TODO: do something fancy like in FactoryRegistry#getServiceProvider(Class, Predicate, Hints, Hints.Key) ?
			throw new IllegalArgumentException("The category '" + category + "' is not registered");
		}
		return registry;
	}

