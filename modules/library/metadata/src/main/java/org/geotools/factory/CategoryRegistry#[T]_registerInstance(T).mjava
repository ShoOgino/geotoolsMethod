	@SuppressWarnings("unchecked")
	public <T> void registerInstance(final T instance) {
		streamCategories()
				.filter(category -> category.isAssignableFrom(instance.getClass()))
				// the cast is correct because the filter above only leaves categories that are supertypes of `instance`
				.map(category -> (InstanceRegistry<? super T>) instanceRegistry(category))
				.forEach(registry -> registry.register(instance));
	}

