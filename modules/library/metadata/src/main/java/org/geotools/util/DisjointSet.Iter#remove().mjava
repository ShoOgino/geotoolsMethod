        /** Removes from the underlying set the last element returned by the iterator. */
        public void remove() {
            if (toRemove != null) {
                if (trash != null) {
                    // Move to the trash set.
                    toRemove.setValue(trash);
                } else {
                    iterator.remove();
                }
                toRemove = null;
            } else {
                throw new IllegalStateException();
            }
        }

