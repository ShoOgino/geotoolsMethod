		public <S> Optional<S> getInstanceOfType(Class<S> type) {
			ensureArgumentNonNull("type", type);
			@SuppressWarnings("unchecked")
			S instance = (S) instancesByType.get(type);
			return Optional.ofNullable(instance);
		}

