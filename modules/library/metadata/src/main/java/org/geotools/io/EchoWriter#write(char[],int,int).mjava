    /**
     * Writes a portion of an array of characters.
     *
     * @param cbuf Buffer of characters to be written.
     * @param offset Offset from which to start reading characters.
     * @param length Number of characters to be written.
     * @throws IOException If an I/O error occurs.
     */
    @Override
    public void write(final char[] cbuf, final int offset, final int length) throws IOException {
        synchronized (lock) {
            out.write(cbuf, offset, length);
            echo.write(cbuf, offset, length);
        }
    }

