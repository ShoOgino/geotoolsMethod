    /**
     * Computes {@code numerator / denominator} and rounds the result toward nearest integer. If the
     * result is located at equal distance from the two nearest integers, then rounds to the even
     * one.
     *
     * @param numerator The numerator in the division.
     * @param denominator The denominator in the division.
     * @return {@code numerator / denominator} rounded toward nearest integer.
     */
    public static long round(final long numerator, final long denominator) {
        long n = numerator / denominator;
        long r = numerator % denominator;
        if (r != 0) {
            r = Math.abs(r << 1);
            final long d = Math.abs(denominator);
            if (r > d || (r == d && (n & 1) != 0)) {
                if ((numerator ^ denominator) >= 0) {
                    n++;
                } else {
                    n--;
                }
            }
        }
        return n;
    }

