    /**
     * Counts the fraction digits in the string representation of the specified value. This method
     * is equivalent to a calling <code>{@linkplain Double#toString(double) Double.toString}(value)
     * </code> and counting the number of digits after the decimal separator.
     *
     * @param value The value for which to count the fraction digits.
     * @return The number of fraction digits.
     */
    public static int countDecimalFractionDigits(final double value) {
        final String asText = Double.toString(value);
        final int exp = asText.indexOf('E');
        int upper, power;
        if (exp >= 0) {
            upper = exp;
            power = Integer.parseInt(asText.substring(exp + 1));
        } else {
            upper = asText.length();
            power = 0;
        }
        while ((asText.charAt(--upper)) == '0') ;
        return Math.max(upper - asText.indexOf('.') - power, 0);
    }

