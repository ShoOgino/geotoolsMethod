    /**
     * Flushs both streams.
     *
     * @throws IOException If an I/O error occurs.
     */
    @Override
    public void flush() throws IOException {
        synchronized (lock) {
            out.flush();
            echo.flush();
        }
    }

