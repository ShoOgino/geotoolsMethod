    /** Ensures that the given type is compatible with the type expected by this range. */
    private void ensureCompatible(final Class<?> type) throws IllegalArgumentException {
        if (!elementClass.isAssignableFrom(type)) {
            throw new IllegalArgumentException(
                    Errors.format(ErrorKeys.ILLEGAL_CLASS_$2, type, elementClass));
        }
    }

