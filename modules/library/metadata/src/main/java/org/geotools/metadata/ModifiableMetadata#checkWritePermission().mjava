    /**
     * Checks if changes in the metadata are allowed. All {@code setFoo(...)} methods in subclasses
     * should invoke this method (directly or indirectly) before to apply any change.
     *
     * @throws UnmodifiableMetadataException if this metadata is unmodifiable.
     */
    protected void checkWritePermission() throws UnmodifiableMetadataException {
        if (!isModifiable()) {
            throw new UnmodifiableMetadataException(Errors.format(ErrorKeys.UNMODIFIABLE_METADATA));
        }
        unmodifiable = null;
    }

