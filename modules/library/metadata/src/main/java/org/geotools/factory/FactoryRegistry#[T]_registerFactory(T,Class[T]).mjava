//    @Deprecated
//    public <T> boolean registerServiceProvider(final T provider, final Class<T> category) {
//        return registerFactory(provider, category);
//    }
    /**
     * Manually register a factory.
     * <p>
     * Used to facilitate integration with other plug-in systems, such as OSGi, that
     * block classpath visibility of service provider interface registration.
     * 
     * @param factory
     * @param category
     * @return
     */
    public <T> boolean registerFactory(final T factory, final Class<T> category) {
        if (!category.isAssignableFrom(factory.getClass())) {
            throw new ClassCastException();
        }
        return registry.registerInstance(factory, category);
    }

