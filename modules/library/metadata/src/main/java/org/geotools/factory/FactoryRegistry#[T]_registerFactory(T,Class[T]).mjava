    public <T> boolean registerFactory(final T factory, final Class<T> category) {
        if (!category.isAssignableFrom(factory.getClass())) {
            throw new ClassCastException();
        }
        return registry.registerInstance(factory, category);
    }

