    /**
     * Adds the given (name, index) pair to {@link #mapping}, making sure we don't overwrite an
     * existing entry with different value.
     */
    private void addMapping(String name, final Integer index) throws IllegalArgumentException {
        name = name.trim();
        if (name.length() != 0) {
            final String lower = name.toLowerCase(LOCALE);
            final Integer old = mapping.put(lower, index);
            if (old != null && !old.equals(index)) {
                throw new IllegalArgumentException(
                        Errors.format(ErrorKeys.PARAMETER_NAME_CLASH_$4, name, index, lower, old));
            }
        }
    }

