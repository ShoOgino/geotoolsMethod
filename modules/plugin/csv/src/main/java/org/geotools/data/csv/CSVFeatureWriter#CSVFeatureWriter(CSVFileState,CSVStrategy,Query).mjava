    public CSVFeatureWriter(CSVFileState csvFileState, CSVStrategy csvStrategy, Query query)
            throws IOException {
        this.csvFileState = csvFileState;
        File file = csvFileState.getFile();
        File directory = file.getParentFile();
        String typeName = query.getTypeName();
        this.temp = File.createTempFile(typeName + System.currentTimeMillis(), ".csv", directory);
        this.temp.deleteOnExit();
        this.featureType = csvStrategy.getFeatureType();
        this.iterator = csvStrategy.iterator();
        this.csvStrategy = csvStrategy;
        this.csvWriter =
                new CSVWriter(
                        new FileWriter(this.temp),
                        csvStrategy.getSeparator(),
                        csvStrategy.getQuotechar(),
                        csvStrategy.getEscapechar(),
                        csvStrategy.getLineSeparator());
        this.csvWriter.writeNext(this.csvFileState.getCSVHeaders(), csvStrategy.isQuoteAllFields());
    }
    // docs end CSVFeatureWriter

