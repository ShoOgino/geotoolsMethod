    @Test
    public void testWithQuotes() throws IOException {
        File file2 = File.createTempFile("CSVTest", ".csv");
        Map<String, Serializable> params2 = new HashMap<String, Serializable>();
        params2.put("file", file2);

        params2.put(CSVDataStoreFactory.STRATEGYP.key, CSVDataStoreFactory.WKT_STRATEGY);
        params2.put(CSVDataStoreFactory.WKTP.key, "the_geom_wkt");
        params2.put(CSVDataStoreFactory.QUOTEALL.key, true);
        String contents = createOutputFile(file2, params2);
        BufferedReader lineReader = new BufferedReader(new CharArrayReader(contents.toCharArray()));
        String line = lineReader.readLine(); // header
        assertNotNull(line);

        assertTrue("Geom is not included", line.toLowerCase().contains("\"the_geom_wkt\""));
        line = lineReader.readLine();
        assertNotNull(line);
        assertTrue("Multipolygon is not quoted", line.toLowerCase().contains("\"multipolygon"));
        assertTrue("Missing quotes", line.contains("\"0.0\""));
        file2.delete();
    }

