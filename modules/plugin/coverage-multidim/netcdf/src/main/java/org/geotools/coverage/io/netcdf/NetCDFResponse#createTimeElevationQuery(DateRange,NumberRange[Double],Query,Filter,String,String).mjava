    /**
     * Create the query to retrive the imageIndex related to the specified time (if any) and the
     * specified elevation (if any)
     *
     * @param time
     * @param elevation
     * @param query
     * @param requestFilter
     * @param elevationFilterAttribute
     * @param timeFilterAttribute
     * @return
     */
    private void createTimeElevationQuery(
            DateRange time,
            NumberRange<Double> elevation,
            Query query,
            Filter requestFilter,
            String timeFilterAttribute,
            String elevationFilterAttribute) {
        final List<Filter> filters = new ArrayList<Filter>();

        // //
        // Setting up time filter
        // //
        if (time != null) {
            final Range range = (Range) time;
            // schema with only one time attribute. Consider adding code for schema with begin,end
            // attributes
            filters.add(
                    FeatureUtilities.DEFAULT_FILTER_FACTORY.and(
                            FeatureUtilities.DEFAULT_FILTER_FACTORY.lessOrEqual(
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.property(
                                            timeFilterAttribute),
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.literal(
                                            range.getMaxValue())),
                            FeatureUtilities.DEFAULT_FILTER_FACTORY.greaterOrEqual(
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.property(
                                            timeFilterAttribute),
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.literal(
                                            range.getMinValue()))));
        }

        // //
        // Setting up elevation filter
        // //
        if (elevation != null) {
            final Range range = (Range) elevation;
            // schema with only one elevation attribute. Consider adding code for schema with
            // begin,end attributes
            filters.add(
                    FeatureUtilities.DEFAULT_FILTER_FACTORY.and(
                            FeatureUtilities.DEFAULT_FILTER_FACTORY.lessOrEqual(
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.property(
                                            elevationFilterAttribute),
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.literal(
                                            range.getMaxValue())),
                            FeatureUtilities.DEFAULT_FILTER_FACTORY.greaterOrEqual(
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.property(
                                            elevationFilterAttribute),
                                    FeatureUtilities.DEFAULT_FILTER_FACTORY.literal(
                                            range.getMinValue()))));
        }

        if (requestFilter != null) {
            filters.add(requestFilter);
        }

        Filter filter = FeatureUtilities.DEFAULT_FILTER_FACTORY.and(filters);
        query.setFilter(filter);
    }

