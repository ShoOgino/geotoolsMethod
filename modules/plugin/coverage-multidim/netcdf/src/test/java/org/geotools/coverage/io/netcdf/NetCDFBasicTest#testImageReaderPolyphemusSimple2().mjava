    @Test
    public void testImageReaderPolyphemusSimple2() throws Exception {
        // setup repository
        ShpFileStoreFactory dialect =
                new ShpFileStoreFactory(new ShapefileDataStoreFactory(), new HashMap<>());
        File indexDirectory = new File("./target/polyphemus_simple_idx");
        FileUtils.deleteQuietly(indexDirectory);
        indexDirectory.mkdir();
        File properties = new File(indexDirectory, "test.properties");
        String theStoreName = "testStore";
        FileUtils.writeStringToFile(
                properties, NetCDFUtilities.STORE_NAME + "=" + theStoreName, "UTF-8");

        DirectoryDataStore dataStore = new DirectoryDataStore(indexDirectory, dialect);

        DefaultRepository repository = new DefaultRepository();
        repository.register(new NameImpl(theStoreName), dataStore);

        testImageReaderPolyphemusSimple(
                reader -> {
                    reader.setRepository(repository);
                    reader.setAuxiliaryDatastorePath(properties.getAbsolutePath());
                });

        // the index files have actually been created
        List<String> typeNames = Arrays.asList(dataStore.getTypeNames());
        assertEquals(2, typeNames.size());
        assertTrue(typeNames.contains("O3"));
        assertTrue(typeNames.contains("NO2"));
        dataStore.dispose();
    }

