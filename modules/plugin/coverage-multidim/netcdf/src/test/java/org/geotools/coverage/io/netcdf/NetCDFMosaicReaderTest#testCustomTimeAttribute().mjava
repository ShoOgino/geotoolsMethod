    @Test
    public void testCustomTimeAttribute() throws IOException {
        File nc1 = TestData.file(this, "polyphemus_20130301_NO2_time2.nc");
        File mosaic = new File(TestData.file(this, "."), "nc_time2");
        if (mosaic.exists()) {
            FileUtils.deleteDirectory(mosaic);
        }
        assertTrue(mosaic.mkdirs());
        FileUtils.copyFileToDirectory(nc1, mosaic);

        // The indexer
        String indexer =
                "TimeAttribute=time\n"
                        + "Schema=the_geom:Polygon,location:String,imageindex:Integer,time:java.util.Date\n";
        final String auxiliaryFilePath =
                mosaic.getAbsolutePath() + File.separatorChar + ".polyphemus_20130301_NO2_time2";
        final File auxiliaryFileDir = new File(auxiliaryFilePath);
        assertTrue(auxiliaryFileDir.mkdirs());

        File nc1Aux = TestData.file(this, "polyphemus_20130301_NO2_time2.xml");
        FileUtils.copyFileToDirectory(nc1Aux, auxiliaryFileDir);

        FileUtils.writeStringToFile(new File(mosaic, "indexer.properties"), indexer);
        File dsp = TestData.file(this, "datastore.properties");
        FileUtils.copyFileToDirectory(dsp, mosaic);

        ImageMosaicFormat format = new ImageMosaicFormat();
        ImageMosaicReader reader = format.getReader(mosaic);
        checkCustomTimeAttribute(nc1, reader);
    }

