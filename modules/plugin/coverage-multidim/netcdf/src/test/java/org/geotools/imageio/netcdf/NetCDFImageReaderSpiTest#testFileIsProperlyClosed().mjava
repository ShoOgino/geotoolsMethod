    @Test
    public void testFileIsProperlyClosed() throws Exception {
        // create a temporary file and write some random bytes on it
        Path path = Files.createTempFile(UUID.randomUUID().toString(), ".txt");
        byte[] content = new byte[100];
        Random random = new Random();
        random.nextBytes(content);
        Files.write(path, content);
        // invoking the reader that will not be able to read the file
        File file = path.toFile();
        NetCDFImageReaderSpi reader = new NetCDFImageReaderSpi();
        reader.canDecodeInput(file);
        // check if the file as some lock on it
        assertThat(file.delete(), is(true));
    }

