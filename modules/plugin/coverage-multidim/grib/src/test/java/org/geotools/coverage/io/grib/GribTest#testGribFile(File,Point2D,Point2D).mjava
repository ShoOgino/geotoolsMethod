    /**
     * Private method for checking if the selected point are nodata or not. This ensures that the
     * images are flipped vertically only if needed. If the image is not correctly flipped then,
     * validpoint and nodatapoint should be inverted.
     */
    private void testGribFile(final File inputFile, Point2D validPoint, Point2D nodataPoint)
            throws MalformedURLException, IOException {
        // Get format
        final AbstractGridFormat format =
                GridFormatFinder.findFormat(inputFile.toURI().toURL(), null);

        assertTrue(format.accepts(inputFile));

        AbstractGridCoverage2DReader reader = null;
        assertNotNull(format);
        try {

            reader = format.getReader(inputFile, null);
            assertNotNull(reader);

            // Selection of all the Coverage names
            String[] names = reader.getGridCoverageNames();
            assertNotNull(names);
            // Selections of one Coverage
            GridCoverage2D grid = reader.read(names[0], null);
            assertNotNull(grid);
            // Selection of one coordinate from the Coverage and check if the
            // value is not a NaN
            float[] result = new float[1];
            grid.evaluate(validPoint, result);
            Assert.assertTrue(!Float.isNaN(result[0]));
            // Selection of one coordinate from the Coverage and check if the
            // value is NaN
            float[] result_2 = new float[1];
            grid.evaluate(nodataPoint, result_2);
            Assert.assertTrue(Float.isNaN(result_2[0]));
        } finally {
            // Dispose
            if (reader != null) {
                try {
                    reader.dispose();
                } catch (Throwable t) {
                    // Does nothing
                }
            }
        }
    }

