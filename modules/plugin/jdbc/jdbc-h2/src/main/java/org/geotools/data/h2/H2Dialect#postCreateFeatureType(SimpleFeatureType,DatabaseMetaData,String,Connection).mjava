    @Override
    public void postCreateFeatureType(
            SimpleFeatureType featureType,
            DatabaseMetaData metadata,
            String schemaName,
            Connection cx)
            throws SQLException {
        // figure out if the table has a spatial index and mark the feature type as so
        if (featureType.getGeometryDescriptor() == null) {
            return;
        }
        String idxTableName = featureType.getTypeName() + "_HATBOX";
        ResultSet rs =
                metadata.getTables(
                        null,
                        dataStore.escapeNamePattern(metadata, schemaName),
                        dataStore.escapeNamePattern(metadata, idxTableName),
                        new String[] {"TABLE"});
        try {
            if (rs.next()) {
                featureType
                        .getGeometryDescriptor()
                        .getUserData()
                        .put(H2_SPATIAL_INDEX, idxTableName);
            }
        } finally {
            dataStore.closeSafe(rs);
        }
    }

