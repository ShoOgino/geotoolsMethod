    @Test
    public void testValidCsv() throws IOException {
        String csv = "a,\"b\",\"c\"\"d\"\n\",\",\u00e4,";
        InputStream is = new ByteArrayInputStream(csv.getBytes("UTF-8"));
        CsvReader reader = new CsvReader(is);

        List<String> row = reader.readNextRow();
        Assert.assertEquals(3, row.size());
        Assert.assertEquals("a", row.get(0));
        Assert.assertEquals("b", row.get(1));
        Assert.assertEquals("c\"d", row.get(2));

        row = reader.readNextRow();
        Assert.assertEquals(3, row.size());
        Assert.assertEquals(",", row.get(0));
        Assert.assertEquals("\u00e4", row.get(1));
        Assert.assertEquals("", row.get(2));

        row = reader.readNextRow();
        Assert.assertNull(row);
    }

