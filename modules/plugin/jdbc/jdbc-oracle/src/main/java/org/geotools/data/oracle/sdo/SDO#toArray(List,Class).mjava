    /**
     * Useful function for converting to typed arrays for JTS API.
     *
     * <p>Example:
     *
     * <pre><code>
     * new MultiPoint( toArray( list, Coordinate.class ) );
     * </code></pre>
     *
     * @param list
     * @param type
     */
    private static Object toArray(List list, Class type) {
        if (list == null) {
            return null;
        }

        Object array = Array.newInstance(type, list.size());
        int index = 0;

        for (Iterator i = list.iterator(); i.hasNext(); index++) {
            Array.set(array, index, i.next());
        }

        return array;
    }

