    private void checkTWKBGeometry(String wkbHex, String expectedWKT, int dimension)
            throws ParseException, IOException {
        GeometryFactory geomFactory = new GeometryFactory(new LiteCoordinateSequenceFactory());
        WKTReader rdr = new WKTReader(geomFactory);
        TWKBReader twkbReader = new TWKBReader(geomFactory);
        byte[] wkb = WKBReader.hexToBytes(wkbHex);
        Geometry actual = twkbReader.read(wkb);

        Geometry expected = rdr.read(expectedWKT);

        CoordinateSequenceComparator comp = null;
        switch (dimension) {
            case 2:
                comp = COMP2;
                break;
            case 3:
                comp = COMP3;
                break;
            case 4:
                comp = COMP4;
                break;

            default:
                throw new RuntimeException("Never gonna get here!");
        }

        assertEquals(
                "\nExpected:" + expected + "\nActual:  " + actual,
                0,
                expected.compareTo(actual, comp));
    }

