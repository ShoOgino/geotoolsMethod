    @Test
    public void testFunctionLike() throws Exception {
        filterToSql.setFeatureType(testSchema);
        PropertyIsLike like =
                ff.like(
                        ff.function("strToLowerCase", ff.property("testString")),
                        "a_literal",
                        "%",
                        "-",
                        "\\",
                        true);

        filterToSql.encode(like);
        String sql = writer.toString().toLowerCase().trim();
        assertEquals("where lower(teststring) like 'a_literal'", sql);
    }

