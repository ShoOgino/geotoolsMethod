    @Test
    public void testEncodeArrayAnyMatchCapabilities() throws Exception {
        filterToSql.setFeatureType(testSchema);
        PropertyIsEqualTo expr =
                ff.equals(
                        ff.function("arrayAnyMatch", ff.property("testArray"), ff.literal(5)),
                        ff.literal(true));

        FilterCapabilities caps = filterToSql.getCapabilities();
        PostPreProcessFilterSplittingVisitor splitter =
                new PostPreProcessFilterSplittingVisitor(caps, testSchema, null);
        expr.accept(splitter, null);

        Filter[] split = new Filter[2];
        split[0] = splitter.getFilterPre();
        split[1] = splitter.getFilterPost();

        assertEquals(expr, split[0]);
        assertEquals(Filter.INCLUDE, split[1]);
    }

