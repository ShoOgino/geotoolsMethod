    // write start
    public void write() throws IOException {
        if (live == null) {
            throw new IOException("No current feature to write");
        }
        if (live.equals(origional)) {
            writeImplementation(origional);
        } else {
            writeImplementation(live);
            // String typeName = live.getFeatureType().getTypeName();
            // Transaction autoCommit = Transaction.AUTO_COMMIT;
            if (origional != null) {
                ReferencedEnvelope bounds = ReferencedEnvelope.reference(live.getBounds());
                bounds.include(origional.getBounds());
                state.fireFeatureUpdated(featureSource, live, bounds);
                // store.listenerManager.fireFeaturesChanged(typeName, autoCommit, bounds, false);
            } else {
                state.fireFeatureAdded(featureSource, live);
                // store.listenerManager.fireFeaturesAdded(typeName, autoCommit,
                // ReferencedEnvelope.reference(live.getBounds()), false);
            }
        }
        origional = null;
        live = null;
    }
    // write end

