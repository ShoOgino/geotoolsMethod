    /** Used to carefully count the lines in the provided properties file */
    static int countFile(File file) {
        LineNumberReader reader = null;
        try {
            int skip=1; // header
            reader = new LineNumberReader(new FileReader(file));
            String line;
            while ((line = reader.readLine()) != null){
                if( line.startsWith("#")||line.startsWith("!")){
                    skip++; // comment
                }
                if( line.endsWith("\\") ){
                    skip++; // multiline
                }
            }
            return reader.getLineNumber() - skip;
        } catch (IOException e) {
            return -1; // could not quickly determine length
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    // we tried
                }
            }
        }
    }
    // getCount end

