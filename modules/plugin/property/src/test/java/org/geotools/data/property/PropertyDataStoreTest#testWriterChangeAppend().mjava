    @Test
    public void testWriterChangeAppend() throws Exception {
        Query query = new Query("road");
        PropertyFeatureStore featureStore = (PropertyFeatureStore) store.getFeatureSource("road");
        try (PropertyFeatureWriter writer =
                (PropertyFeatureWriter) featureStore.getWriterInternal(query, 0x01 << 0)) {

            SimpleFeature f;
            writer.next();
            writer.next();
            writer.next();
            writer.next();
            writer.next();
            Assert.assertFalse(writer.hasNext());
            f = writer.next();
            Assert.assertNotNull(f);
            f.setAttribute(0, Integer.valueOf(-1));
            f.setAttribute(1, "new");
            writer.write();
        }
        Assert.assertEquals(6, count("road"));
    }

