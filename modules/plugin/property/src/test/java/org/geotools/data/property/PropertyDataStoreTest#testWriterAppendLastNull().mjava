    @Test
    public void testWriterAppendLastNull() throws Exception {
        FeatureWriter<SimpleFeatureType, SimpleFeature> writer =
                store.getFeatureWriterAppend("road", Transaction.AUTO_COMMIT);

        SimpleFeature f;
        Assert.assertFalse(writer.hasNext());
        f = writer.next();
        Assert.assertNotNull(f);
        f.setAttribute(0, Integer.valueOf(-1));
        f.setAttribute(1, null); // this made the datastore break
        writer.write();
        writer.close();
        Assert.assertEquals(6, count("road"));
    }

