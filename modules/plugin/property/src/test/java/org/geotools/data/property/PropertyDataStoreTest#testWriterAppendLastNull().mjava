    @Test
    public void testWriterAppendLastNull() throws Exception {
        try (FeatureWriter<SimpleFeatureType, SimpleFeature> writer =
                store.getFeatureWriterAppend("road", Transaction.AUTO_COMMIT)) {

            Assert.assertFalse(writer.hasNext());
            SimpleFeature f = writer.next();
            Assert.assertNotNull(f);
            f.setAttribute(0, Integer.valueOf(-1));
            f.setAttribute(1, null); // this made the datastore break
            writer.write();
        }
        Assert.assertEquals(6, count("road"));
    }

