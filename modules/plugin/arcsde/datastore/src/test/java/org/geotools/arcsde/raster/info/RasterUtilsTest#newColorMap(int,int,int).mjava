    private DataBuffer newColorMap(int size, int numBanks, int transferType) {
        DataBuffer colorMapData;
        switch (transferType) {
        case DataBuffer.TYPE_BYTE:
            colorMapData = new DataBufferByte(size, numBanks);
            break;
        case DataBuffer.TYPE_USHORT:
            colorMapData = new DataBufferUShort(size, numBanks);
            break;
        default:
            throw new IllegalArgumentException();
        }
        for (int elem = 0; elem < size; elem++) {
            for (int bank = 0; bank < numBanks; bank++) {
                // cast to byte
                int value = elem & 0xFF;
                colorMapData.setElem(bank, elem, value);
            }
        }
        return colorMapData;
    }

