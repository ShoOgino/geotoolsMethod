        @Override
        public void setTileData(final SeRasterTile tile, final TileInfo tileInfo) {

            final int numPixelsRead = tileInfo.getNumPixelsRead();
            final short nodata = tileInfo.getNoDataValue().shortValue();

            if (numPixelsRead == 0) {
                Arrays.fill(tileInfo.getTileDataAsShorts(), nodata);
            } else {
                /*
                 * getPixelData returns the SeRasterTile internal buffer with no extra copy. It may
                 * contain extra elements for the bitmask array in case there are no-data pixels
                 */
                final byte[] pixelData = tile.getPixelData();
                final short[] tileDataShorts = tileInfo.getTileDataAsShorts();
                final byte[] bitmaskData = tileInfo.getBitmaskData();
                final boolean hasNoDataPixels = tileInfo.hasNoDataPixels();
                for (int pn = 0; pn < numPixelsRead; pn++) {
                    if (hasNoDataPixels && isNoData(pn, bitmaskData)) {
                        tileDataShorts[pn] = nodata;
                    } else {
                        tileDataShorts[pn] = (short) pixelData[pn];
                    }
                }
            }
        }

