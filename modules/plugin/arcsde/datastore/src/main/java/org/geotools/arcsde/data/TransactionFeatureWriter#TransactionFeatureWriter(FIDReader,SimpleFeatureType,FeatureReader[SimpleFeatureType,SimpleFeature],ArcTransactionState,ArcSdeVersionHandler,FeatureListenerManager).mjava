    /**
     * @param fidReader
     * @param featureType
     * @param filteredContent
     * @param listenerManager
     * @param transactionalConnection the {@link Session} to work over, with a {@link
     *     Session#isTransactionActive() transaction active}
     * @param transaction a transaction <b>already configured</b> with the {@link
     *     ArcTransactionState} needed for this writer to work.
     * @throws NoSuchElementException
     * @throws IOException
     */
    public TransactionFeatureWriter(
            final FIDReader fidReader,
            final SimpleFeatureType featureType,
            final FeatureReader<SimpleFeatureType, SimpleFeature> filteredContent,
            final ArcTransactionState state,
            final ArcSdeVersionHandler versionHandler,
            final FeatureListenerManager listenerManager)
            throws NoSuchElementException, IOException {

        super(
                fidReader,
                featureType,
                filteredContent,
                state.getConnection(),
                listenerManager,
                versionHandler);
        this.state = state;
        assert state.getConnection().isTransactionActive();
    }

