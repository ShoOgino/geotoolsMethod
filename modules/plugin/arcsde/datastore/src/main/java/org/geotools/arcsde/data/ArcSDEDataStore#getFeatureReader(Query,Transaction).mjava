    /**
     * Returns an {@link ArcSDEFeatureReader}
     *
     * <p>Preconditions:
     *
     * <ul>
     *   <li><code>query != null</code>
     *   <li><code>query.getTypeName() != null</code>
     *   <li><code>query.getFilter != null</code>
     *   <li><code>transaction != null</code>
     * </ul>
     *
     * @see DataStore#getFeatureReader(Query, Transaction)
     * @return {@link ArcSDEFeatureReader} aware of the transaction state
     */
    public FeatureReader<SimpleFeatureType, SimpleFeature> getFeatureReader(
            final Query query, final Transaction transaction) throws IOException {
        assert query != null;
        assert query.getTypeName() != null;
        assert query.getFilter() != null;
        assert transaction != null;

        final SimpleFeatureType featureType = getQueryType(query);

        return getFeatureReader(query, transaction, featureType);
    }

