    /**
     * Tests that a fetched graphic is added to the cache, and that the {@link CachingExternalGraphicFactory#clearCache()} method correctly clears the
     * cache.
     */
    public void testClearCache() throws Exception {
        SVGGraphicFactory svg = new SVGGraphicFactory();
        URL url = SVGGraphicFactory.class.getResource("gradient.svg");

        assertNotNull(url);
        Icon icon = svg.getIcon(null, ff.literal(url), "image/svg", -1);
        assertNotNull(icon);

        String evaluatedUrl = ff.literal(url).evaluate(null, String.class);
        assertTrue(svg.glyphCache.containsKey(evaluatedUrl));
        assertNotNull(svg.glyphCache.get(evaluatedUrl));

        ((CachingExternalGraphicFactory) svg).clearCache();
        assertTrue(svg.glyphCache.isEmpty());
    }

