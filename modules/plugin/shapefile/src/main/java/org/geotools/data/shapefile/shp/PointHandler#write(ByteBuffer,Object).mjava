    public void write(ByteBuffer buffer, Object geometry) {
        Point point = (Point) geometry;
        Coordinate c = point.getCoordinate();

        buffer.putDouble(c.x);
        buffer.putDouble(c.y);

        if (shapeType == ShapeType.POINTZ) {
            if (Double.isNaN(c.getZ())) { // nan means not defined
                buffer.putDouble(0.0);
            } else {
                buffer.putDouble(c.getZ());
            }
        }

        if ((shapeType == ShapeType.POINTZ) || (shapeType == ShapeType.POINTM)) {
            double m = point.getCoordinateSequence().getM(0);
            buffer.putDouble(!Double.isNaN(m) ? m : 0.0); // M
        }
    }

