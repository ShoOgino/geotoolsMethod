    static void compare(SimpleFeatureCollection one, SimpleFeatureCollection two) throws Exception {

        if (one.size() != two.size()) {
            throw new Exception("Number of Features unequal : " + one.size() + " != " + two.size());
        }

        try (SimpleFeatureIterator iterator1 = one.features();
                SimpleFeatureIterator iterator2 = two.features()) {

            while (iterator1.hasNext()) {
                SimpleFeature f1 = iterator1.next();
                SimpleFeature f2 = iterator2.next();
                compare(f1, f2);
            }
        }
    }

