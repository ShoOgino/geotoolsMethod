    /**
     * This is just another approach to open the shapefile and pass the Charset Now we open the shape with UTF8 charset and expect the attribute to be
     * correctly retuned with 4 chars and including the german special character.
     */
    @Test
    public void testLoadingAndReadingUTF8Correctly() throws Exception {
        SimpleFeatureCollection features = loadFeatures(UTF8, Charset.forName("UTF8"), null);

        SimpleFeatureIterator iterator = features.features();
        assertTrue(iterator.hasNext());
        assertEquals(4, features.size());
        SimpleFeature f = iterator.next();
        iterator.close();

        // GEOM, NAME,C,100 VISUAL,C,3 NUM1,N,5 NUM2,N,5
        assertEquals(5, f.getAttributeCount());

        String nameAttribute = (String) f.getAttribute("NAME");

        // We expect that the UTF8 is not understood here
        assertEquals("Iconfee Stra\u00dfe".length(), nameAttribute.length());
        assertEquals("Iconfee Stra\u00dfe", nameAttribute);
    }

