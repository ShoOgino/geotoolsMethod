    @Test
    public void testRemoveCounting() throws Exception {
        FidIndexer.generate(backshp.toURI().toURL());
        initWriter();
        writer.next();
        writer.remove();
        writer.next();
        writer.remove();
        writer.next();
        writer.remove();

        while (writer.hasNext()) {
            writer.next();
            writer.write();
        }

        close();
        try (IndexedFidReader reader = new IndexedFidReader(shpFiles)) {
            assertEquals(3, reader.getRemoves());
        }

        // remove some more features
        initWriter();
        writer.next();
        writer.next();
        writer.next();
        writer.remove();
        writer.next();
        writer.remove();
        writer.next();
        writer.next();
        writer.next();
        writer.remove();
        while (writer.hasNext()) {
            writer.next();
            writer.write();
        }

        close();

        try (IndexedFidReader reader = new IndexedFidReader(shpFiles)) {
            assertEquals(6, reader.getRemoves());
        }
    }

