    @Test
    public void testFindAllFids() throws Exception {
        int expectedCount = 0;
        Set<String> expectedFids = new LinkedHashSet<>();
        {
            ShapefileDataStore ds = new ShapefileDataStore(backshp.toURI().toURL());
            SimpleFeatureSource featureSource = ds.getFeatureSource();
            SimpleFeatureIterator features = featureSource.getFeatures().features();
            while (features.hasNext()) {
                SimpleFeature next = features.next();
                expectedCount++;
                expectedFids.add(next.getID());
            }
            features.close();
            ds.dispose();
        }

        assertTrue(expectedCount > 0);
        assertEquals(expectedCount, reader.getCount());

        for (String fid : expectedFids) {
            long offset = reader.findFid(fid);
            assertNotEquals(-1, offset);
        }
    }

