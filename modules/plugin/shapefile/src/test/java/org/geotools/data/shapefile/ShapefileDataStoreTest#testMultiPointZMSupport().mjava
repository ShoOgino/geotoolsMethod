    /** Tests measures (M) values on shp output for MultiPoint type */
    @Test
    public void testMultiPointZMSupport() throws Exception {
        // create feature type
        SimpleFeatureType type =
                DataUtilities.createType(
                        "junk", "a:MultiPoint,b:java.math.BigDecimal,c:java.math.BigInteger");
        DefaultFeatureCollection features = new DefaultFeatureCollection();

        BigInteger bigInteger = new BigInteger("1234567890123456789");
        BigDecimal bigDecimal = new BigDecimal(bigInteger, 2);

        SimpleFeatureBuilder build = new SimpleFeatureBuilder(type);
        GeometryFactory gf = new GeometryFactory();
        build.add(
                gf.createMultiPoint(
                        new Point[] {
                            gf.createPoint(new CoordinateXYZM(1, -1, 1, 2)),
                            gf.createPoint(new CoordinateXYZM(1, 3, 1, 4)),
                            gf.createPoint(new CoordinateXYZM(3, 4, 1, 2))
                        }));
        build.add(bigDecimal);
        build.add(bigInteger);

        SimpleFeature feature = build.buildFeature(null);
        features.add(feature);

        // store features
        File tmpFile = getTempFile();
        tmpFile.createNewFile();
        ShapefileDataStore s = new ShapefileDataStore(tmpFile.toURI().toURL());
        writeFeatures(s, features);
        File expected =
                new File(getClass().getResource("test-data/measure/multipointszm.shp").toURI());
        // compare byte stream produced in shp file
        assertTrue(FileUtils.contentEquals(tmpFile, expected));
    }

