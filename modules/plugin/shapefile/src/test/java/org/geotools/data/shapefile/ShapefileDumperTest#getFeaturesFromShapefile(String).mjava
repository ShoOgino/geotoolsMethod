    /**
     * Returns a collection from the dumper folder given a type name. The support shapefile data
     * store will be closed automatically by the test machinery during tear down
     */
    private SimpleFeatureCollection getFeaturesFromShapefile(String typeName) throws IOException {
        File shp = new File(dumperFolder, typeName + ".shp");
        if (!shp.exists()) {
            fail(
                    "Could not find expected shapefile "
                            + shp.getPath()
                            + ", available files are: "
                            + Arrays.asList(dumperFolder.listFiles()));
        }
        // check all the sidecar files are there
        final String[] extensions = new String[] {".shx", ".dbf", ".prj", ".cst"};
        for (String extension : extensions) {
            File f = new File(dumperFolder, typeName + extension);
            if (!f.exists()) {
                fail(
                        "Could not find expected shapefile sidecar "
                                + f.getPath()
                                + ", available files are: "
                                + Arrays.asList(dumperFolder.listFiles()));
            }
        }

        // extract the features
        ShapefileDataStore ds = new ShapefileDataStore(URLs.fileToUrl(shp));
        shapefileStores.add(ds);
        return ds.getFeatureSource().getFeatures();
    }

