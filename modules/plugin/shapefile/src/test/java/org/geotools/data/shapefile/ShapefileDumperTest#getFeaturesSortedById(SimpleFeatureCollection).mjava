    /**
     * Helper method that extract the features from a feature collection and sort them by their ID.
     */
    private List<SimpleFeature> getFeaturesSortedById(SimpleFeatureCollection featureCollection) {
        // extract the features
        List<SimpleFeature> features = new ArrayList<>();
        try (SimpleFeatureIterator iterator = featureCollection.features()) {
            while (iterator.hasNext()) {
                SimpleFeature feature = iterator.next();
                features.add(feature);
            }
        }
        // sort the features by their ID
        Collections.sort(
                features,
                (feature1, feature2) -> {
                    assertThat(feature1.getID(), notNullValue());
                    assertThat(feature2.getID(), notNullValue());
                    return feature1.getID().compareTo(feature2.getID());
                });
        return features;
    }

