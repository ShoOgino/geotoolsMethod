    @Test
    public void testWrite() throws Exception {
        // create feature type
        SimpleFeatureType type =
                DataUtilities.createType(
                        "junk", "a:Point,b:java.math.BigDecimal,c:java.math.BigInteger");

        BigInteger bigInteger = new BigInteger("1234567890123456789");
        BigDecimal bigDecimal = new BigDecimal(bigInteger, 2);

        SimpleFeatureBuilder builder = new SimpleFeatureBuilder(type);
        builder.add(new GeometryFactory().createPoint(new Coordinate(1, -1)));
        builder.add(bigDecimal);
        builder.add(bigInteger);

        SimpleFeature feature = builder.buildFeature(null);
        assertNotNull(feature);
        assertNotNull(feature.getID());

        // store features
        File tmpFile = getTempFile();
        tmpFile.createNewFile();
        ShapefileDataStore s = new ShapefileDataStore(tmpFile.toURI().toURL());
        s.createSchema(type);

        // was failing in GEOT-2427
        try (Transaction t = new DefaultTransaction();
                FeatureWriter<SimpleFeatureType, SimpleFeature> writer =
                        s.getFeatureWriter(s.getTypeNames()[0], t)) {
            SimpleFeature feature1 = writer.next();
            assertNotNull(feature1);
        }
        s.dispose();
    }

