    @Test
    public void testDeleteFeature() throws Exception {
        SimpleFeature feature = DataUtilities.first(featureStore.getFeatures());
        FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2(null);
        Id fidFilter = ff.id(Collections.singleton(ff.featureId(feature.getID())));

        featureStore.removeFeatures(fidFilter);
        fids.remove(feature.getID());

        assertEquals(fids.size(), featureStore.getCount(Query.ALL));

        try (SimpleFeatureIterator features = featureStore.getFeatures(fidFilter).features()) {
            assertFalse(features.hasNext());
        }

        this.assertFidsMatch();
    }

