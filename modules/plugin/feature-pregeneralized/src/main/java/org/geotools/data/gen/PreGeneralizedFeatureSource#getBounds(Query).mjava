    @Override
    public ReferencedEnvelope getBounds(Query query) throws IOException {

        // SimpleFeatureSource fs = getFeatureSourceFor(query);
        // Query newQuery=getProxyObject(query, fs);
        // return fs.getBounds(newQuery);

        Query newQuery = getProxyObject(query, getBaseFeatureSource());
        return getBaseFeatureSource().getBounds(newQuery);
    }

