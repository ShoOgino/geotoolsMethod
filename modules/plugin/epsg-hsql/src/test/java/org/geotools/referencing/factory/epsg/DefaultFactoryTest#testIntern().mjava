    /**
     * We are supposed to be able to get back identical {@link CoordinateReferenceSystem} objects
     * when we create using the same definition. This test case ensures that we do get back
     * identical objects when using an EPSG code and when using WKT.
     *
     * <p>The same definition is used in each case - will it work? Answer is no because we lost
     * metadata information in WKT formatting; however two instances created with the same wkt work
     * out okay.
     *
     * @throws FactoryException if an error occured while querying the factory.
     */
    @Test
    public void testIntern() throws FactoryException {
        final AbstractCRS epsgCrs = (AbstractCRS) CRS.decode("EPSG:4326");
        final String wkt = epsgCrs.toWKT();
        final AbstractCRS wktCrs = (AbstractCRS) CRS.parseWKT(wkt);

        assertTrue("equals ignore metadata", epsgCrs.equals(wktCrs, false));
        assertFalse("equals compare metadata", epsgCrs.equals(wktCrs, true));
        assertFalse("equals", epsgCrs.equals(wktCrs));
        assertNotSame("identity", epsgCrs, wktCrs);

        // Parsing the same thing twice?
        final AbstractCRS wktCrs2 = (AbstractCRS) CRS.parseWKT(wkt);
        assertTrue("equals ignore metadata", wktCrs.equals(wktCrs2, false));
        assertTrue("equals compare metadata", wktCrs.equals(wktCrs2, true));
        assertEquals("equals", wktCrs, wktCrs2);
        assertSame("identity", wktCrs, wktCrs2);
    }

