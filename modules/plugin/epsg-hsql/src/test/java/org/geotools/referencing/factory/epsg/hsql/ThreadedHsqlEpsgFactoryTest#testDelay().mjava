    @Test
    public void testDelay() throws Exception {
        // force a short timeout
        factory.setTimeout(200);

        // make it do some work
        factory.createCoordinateReferenceSystem("EPSG:4326");
        factory.getAuthorityCodes(CoordinateReferenceSystem.class);

        // sleep and force gc to allow the backing store to be released
        long start = System.currentTimeMillis();
        while ((System.currentTimeMillis() - start) < 4000 && factory.isConnected()) {
            Thread.currentThread().sleep(200);
            System.gc();
            System.runFinalization();
        }

        // check it has been disposed of
        assertFalse(factory.isConnected());

        // see if it's able to reconnect
        factory.createCoordinateReferenceSystem("EPSG:4327");
        factory.getAuthorityCodes(CoordinateReferenceSystem.class);
        assertTrue(factory.isConnected());
    }

