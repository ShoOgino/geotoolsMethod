    /**
     * This test is used to check backward compatibility with old imagemosaics wich does not include
     * the TypeName=MOSAICNAME into the generated MOSAICNAME.properties file
     */
    @Test
    // @Ignore
    public void testTypeNameBackwardsCompatibility() throws Exception {

        final File workDir = new File(TestData.file(this, "."), "water_temp5");
        if (!workDir.mkdir()) {
            FileUtils.deleteDirectory(workDir);
            assertTrue("Unable to create workdir:" + workDir, workDir.mkdir());
        }
        FileUtils.copyFile(
                TestData.file(this, "watertemp.zip"), new File(workDir, "watertemp.zip"));
        TestData.unzipFile(this, "water_temp5/watertemp.zip");
        final URL timeElevURL = TestData.url(this, "water_temp5");

        // place H2 file in the dir

        try (FileWriter out =
                new FileWriter(
                        new File(TestData.file(this, "."), "/water_temp5/datastore.properties"))) {
            out.write("database=imagemosaic\n");
            out.write(H2_SAMPLE_PROPERTIES);
            out.flush();
        }

        // now start the test
        AbstractGridFormat format = TestUtils.getFormat(timeElevURL);
        assertNotNull(format);
        ImageMosaicReader reader = getReader(timeElevURL, format);
        assertNotNull(reader);
        reader.dispose();
        format = null;

        // remove the TypeName=MOSAICNAME from MOSAICNAME.properties
        File mosaicFile = new File(TestData.file(this, "."), "/water_temp5/water_temp5.properties");
        Properties properties = new Properties();
        try (FileInputStream fin = new FileInputStream(mosaicFile)) {
            properties.load(fin);
        }
        assertTrue(properties.containsKey(Prop.SUGGESTED_FORMAT));
        assertTrue(
                "org.geotools.gce.geotiff.GeoTiffFormat"
                        .equalsIgnoreCase((String) properties.get(Prop.SUGGESTED_FORMAT)));

        try (FileWriter fw = new FileWriter(mosaicFile)) {
            assertNotNull(properties.remove("TypeName"));
            properties.store(fw, "");
        }

        // we should be able to load the mosaic also without the TypeName=MOSAICNAME
        format = TestUtils.getFormat(timeElevURL);
        assertNotNull(format);
        reader = getReader(timeElevURL, format);
        assertNotNull(reader);

        // clean up
        reader.dispose();
        if (!INTERACTIVE) {
            FileUtils.deleteDirectory(TestData.file(this, "water_temp5"));
        }
    }

