    @Test
    public void testMaintainNoDataIdentity() throws Exception {
        // For this test the input file has the nodata value set to 7.
        String testLocation = "nodata";
        URL storeUrl = TestData.url(this, testLocation);

        File testDataFolder = new File(storeUrl.toURI());
        ImageMosaicReader imReader = new ImageMosaicReader(testDataFolder, null);
        Assert.assertNotNull(imReader);

        // read a coverage in deferred mode, check the nodata is there
        ParameterValue<Boolean> deferredLoading =
                AbstractGridFormat.USE_JAI_IMAGEREAD.createValue();

        deferredLoading.setValue(true);
        GridCoverage2D coverage = imReader.read(new GeneralParameterValue[] {deferredLoading});
        assertNoData(coverage, 7d);
        imReader.dispose();
    }

