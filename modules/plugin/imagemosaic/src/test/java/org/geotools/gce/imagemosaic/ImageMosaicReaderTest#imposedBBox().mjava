	@Test
	public void imposedBBox() throws IOException, NoSuchAuthorityCodeException, FactoryException {
		final AbstractGridFormat format = getFormat(imposedEnvelopeURL);
		final ImageMosaicReader reader = getReader(imposedEnvelopeURL, format);
	
		
		//check envelope
		final GeneralEnvelope envelope = reader.getOriginalEnvelope();
		assertNotNull(envelope);
		
		assertEquals(envelope.getMinimum(0), -180.0,1E-6);
		assertEquals(envelope.getMinimum(1), -90.0,1E-6);
		assertEquals(envelope.getMaximum(0), 180.0,1E-6);
		assertEquals(envelope.getMaximum(1), 90.0,1E-6);
		
		// limit yourself to reading just a bit of it
		final ParameterValue<GridGeometry2D> gg =  AbstractGridFormat.READ_GRIDGEOMETRY2D.createValue();
		final Dimension dim= new Dimension();
		dim.setSize(reader.getOriginalGridRange().getSpan(0)/3.0, reader.getOriginalGridRange().getSpan(1)/3.0);
		final Rectangle rasterArea=(( GridEnvelope2D)reader.getOriginalGridRange());
		rasterArea.setSize(dim);
		final GridEnvelope2D range= new GridEnvelope2D(rasterArea);
		gg.setValue(new GridGeometry2D(range,envelope));
		
		// use imageio with defined tiles
		final ParameterValue<Boolean> useJai = AbstractGridFormat.USE_JAI_IMAGEREAD.createValue();
		useJai.setValue(false);
		
		
		// Test the output coverage
		checkCoverage(reader, new GeneralParameterValue[] {gg,useJai }, "Imposed BBox");
	}	

