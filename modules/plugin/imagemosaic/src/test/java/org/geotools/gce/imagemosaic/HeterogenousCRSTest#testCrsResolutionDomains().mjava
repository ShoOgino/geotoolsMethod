    @Test
    public void testCrsResolutionDomains() throws Exception {
        ImageMosaicReader reader = getTestMosaic("diff_crs_sorting_test");
        String coverageName = reader.getGridCoverageNames()[0];

        Map<String, DimensionDescriptor> descriptors =
                reader.getDimensionDescriptors(coverageName)
                        .stream()
                        .collect(Collectors.toMap(dd -> dd.getName(), dd -> dd));
        assertEquals(4, descriptors.size());
        DimensionDescriptor crsDescriptor = descriptors.get(DimensionDescriptor.CRS);
        assertNotNull(crsDescriptor);
        assertEquals("crs", crsDescriptor.getStartAttribute());
        DimensionDescriptor resolutionDescriptor = descriptors.get(DimensionDescriptor.RESOLUTION);
        assertNotNull(resolutionDescriptor);
        assertEquals("resolution", resolutionDescriptor.getStartAttribute());
        DimensionDescriptor resolutionXDescriptor =
                descriptors.get(DimensionDescriptor.RESOLUTION_X);
        assertNotNull(resolutionXDescriptor);
        assertEquals("resX", resolutionXDescriptor.getStartAttribute());
        DimensionDescriptor resolutionYDescriptor =
                descriptors.get(DimensionDescriptor.RESOLUTION_Y);
        assertNotNull(resolutionYDescriptor);
        assertEquals("resY", resolutionYDescriptor.getStartAttribute());

        GranuleSource granules = reader.getGranules(coverageName, true);
        SimpleFeatureCollection features = granules.getGranules(Query.ALL);
        List<SimpleFeature> featureList = DataUtilities.list(features);
        for (SimpleFeature sf : featureList) {
            String location = (String) sf.getAttribute("location");
            String crs = (String) sf.getAttribute("crs");
            assertEquals("EPSG:32610", crs);
            Double resolution = (Double) sf.getAttribute("resolution");
            Double resX = (Double) sf.getAttribute("resolution");
            Double resY = (Double) sf.getAttribute("resolution");
            // yes, weird difference between file name and resolution, resolution here comes
            // from a gdalinfo run on the files
            if (location.startsWith("32km")) {
                assertEquals(17550, resolution, 10d);
                assertEquals(17550, resX, 10d);
                assertEquals(17550, resY, 10d);
            } else if (location.startsWith("16km")) {
                assertEquals(8712, resolution, 10d);
                assertEquals(8712, resX, 10d);
                assertEquals(8712, resY, 10d);
            }
        }
        reader.dispose();
    }

