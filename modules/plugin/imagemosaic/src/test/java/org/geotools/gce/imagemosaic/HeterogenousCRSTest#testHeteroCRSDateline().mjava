    @Test
    public void testHeteroCRSDateline() throws IOException, URISyntaxException, TransformException,
            FactoryException {
        URL storeUrl = TestData.url(this, "hetero_crs_dateline");

        File testDataFolder = new File(storeUrl.toURI());
        File testDirectory = crsMosaicFolder.newFolder("hetero_crs_dateline");
        FileUtils.copyDirectory(testDataFolder, testDirectory);
        Hints creationHints = new Hints();
        ImageMosaicReader imReader = new ImageMosaicReader(testDirectory, creationHints);
        Assert.assertNotNull(imReader);
        assertEquals(CRS.toSRS(imReader.getCoordinateReferenceSystem()), "EPSG:4326");
        
        // read before dateline
        GeneralParameterValue gg1 = buildGridGeometryParameter(new ReferencedEnvelope(179, 180, 60, 62, DefaultGeographicCRS.WGS84), 128, 256);
        GridCoverage2D gcBefore = imReader.read(new GeneralParameterValue[] {gg1});
        RenderedImage riBefore = gcBefore.getRenderedImage();
        ImageAssert.assertEquals(testFile("hetero_crs_dateline_results/before.png"), riBefore, 1000);
        
        // read after the dateline
        GeneralParameterValue ggAfter = buildGridGeometryParameter(new ReferencedEnvelope(180, 181, 60, 62, DefaultGeographicCRS.WGS84), 128, 256);
        GridCoverage2D gcAfter = imReader.read(new GeneralParameterValue[] {ggAfter});
        RenderedImage riAfter = gcAfter.getRenderedImage();
        ImageAssert.assertEquals(testFile("hetero_crs_dateline_results/after.png"), riAfter, 1000);
    }

