    private WritableRaster buildSolidRaster(int tileWidth, int tileHeight, int value) {
        SampleModel sampleModel = getMPSampleModel(tileWidth, tileHeight);

        // build the raster
        WritableRaster newRaster =
                RasterFactory.createWritableRaster(sampleModel, new java.awt.Point(0, 0));

        // sanity checks
        int dataType = sampleModel.getTransferType();
        int numBands = sampleModel.getNumBands();
        if (dataType != DataBuffer.TYPE_BYTE) {
            throw new IllegalArgumentException(
                    "The code works only if the sample model data type is BYTE");
        }
        if (numBands != 1) {
            throw new IllegalArgumentException("The code works only for single band rasters!");
        }

        if (value != 0) {
            // flood fill
            int w = sampleModel.getWidth();
            int h = sampleModel.getHeight();
            int[] data = new int[w * h];

            Arrays.fill(data, value);
            newRaster.setSamples(0, 0, w, h, 0, data);
        }

        return newRaster;
    }

