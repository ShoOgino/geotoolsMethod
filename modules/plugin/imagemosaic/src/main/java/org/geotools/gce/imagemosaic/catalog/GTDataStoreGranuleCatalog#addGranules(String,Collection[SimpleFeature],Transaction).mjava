	@Override
	public void addGranules(final String typeName, final Collection<SimpleFeature> granules, final Transaction transaction) throws IOException {
		Utilities.ensureNonNull("granuleMetadata",granules);
		final Lock lock=rwLock.writeLock();
		try{
			lock.lock();
			// check if the index has been cleared
			checkStore();
			
            SimpleFeatureStore store = (SimpleFeatureStore) tileIndexStore.getFeatureSource(typeName);
            store.setTransaction(transaction);

            ListFeatureCollection featureCollection = new ListFeatureCollection(tileIndexStore.getSchema(typeName));

            // add them all
            for (SimpleFeature f : granules) {
                // Add the feature to the feature collection
                featureCollection.add(f);
            }
            store.addFeatures(featureCollection);
			
			//update bounds
			if (bounds.containsKey(typeName)) {
			    bounds.remove(typeName);
			}
		}finally{
			lock.unlock();
		}	
	}

