		public CatalogBuilderDirectoryWalker(final List<String> indexingDirectories,final FileFilter filter) throws IOException {
			super(filter,Integer.MAX_VALUE);//runConfiguration.isRecursive()?Integer.MAX_VALUE:0);
			
			this.transaction= new DefaultTransaction("MosaicCreationTransaction"+System.nanoTime());
                        indexingPreamble();

                        try {
                            // start walking directories
                            for(String indexingDirectory:indexingDirectories){
                                walk(new File(indexingDirectory), null);
                                
                                // did we cancel?
                                if(canceled)
                                    break;
                            }
                         // did we cancel?
                            if(canceled)
                                transaction.rollback();
                            else
                                transaction.commit();
                        } catch (Exception e) {
                            transaction.rollback();
                        } finally {
                            transaction.close();
                            
                            try{
                                indexingPostamble(canceled);
                            } catch (Exception e) {
                                // eat me
                            }
                        }
                        
			
		}

