    /**
     * Look for a proper sourceURL to be returned.
     *
     * @param sourceURL
     * @param datastoreFound
     * @param locationPath
     * @param defaultIndexName
     * @param emptyFile
     * @return
     */
    private static URL updateSourceURL(
            URL sourceURL,
            boolean datastoreFound,
            String locationPath,
            String defaultIndexName /*
                                    * , File emptyFile
                                    */) {
        if (!datastoreFound) {
            File shapeFile = new File(locationPath, defaultIndexName + ".shp");

            if (!Utils.checkFileReadable(shapeFile)) {
                // if (!Utils.checkFileReadable(emptyFile)) {
                sourceURL = null;
                // } else {
                // sourceURL = URLs.fileToUrl(emptyFile);
                // }
            } else {
                // now set the new source and proceed
                sourceURL = URLs.fileToUrl(shapeFile);
            }
        } else {
            File dataStoreProperties = new File(locationPath, "datastore.properties");

            // datastore.properties as the source
            if (!Utils.checkFileReadable(dataStoreProperties)) {
                sourceURL = null;
            } else {
                sourceURL = URLs.fileToUrl(dataStoreProperties);
            }
        }

        return sourceURL;
    }

