    /**
     * Finds all avalaible implementations of {@link GridFormatFactorySpi} which have registered using the services mechanism, and that have the
     * appropriate libraries on the classpath.
     *
     * @return An unmodifiable {@link Set} of all discovered datastores which have registered factories, and whose available method returns true.
     */
    public static synchronized Set<PropertiesCollectorSPI> getPropertiesCollectorSPI() {
        // get all GridFormatFactorySpi implementations
        scanForPlugins();
        final Iterator<PropertiesCollectorSPI> it = getServiceRegistry()
                .getServiceProviders(PropertiesCollectorSPI.class, true);
        final Set<PropertiesCollectorSPI> collectors = new HashSet<PropertiesCollectorSPI>();
        while (it.hasNext()) {
            final PropertiesCollectorSPI spi = (PropertiesCollectorSPI) it.next();
            if (spi.isAvailable())
                collectors.add(spi);

        }
        return Collections.unmodifiableSet(collectors);
    }

