    private static org.opengis.geometry.Envelope getCRSEnvelope(CoordinateReferenceSystem targetCRS)
            throws FactoryException, NoSuchAuthorityCodeException {
        if (targetCRS.getDomainOfValidity() == null) {
            Integer code = CRS.lookupEpsgCode(targetCRS, true);
            if (code != null) {
                CRS.decode("EPSG:" + code, CRS.getAxisOrder(targetCRS) != AxisOrder.NORTH_EAST);
            }
        }
        org.opengis.geometry.Envelope envelope = CRS.getEnvelope(targetCRS);
        return envelope;
    }

