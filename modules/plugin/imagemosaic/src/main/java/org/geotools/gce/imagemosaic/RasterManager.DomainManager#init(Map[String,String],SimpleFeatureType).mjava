        /**
         * @param additionalDomainAttributes
         * @param simpleFeatureType
         * @throws IllegalArgumentException
         */
        private void init(Map<String, String> additionalDomainAttributes,
                SimpleFeatureType simpleFeatureType) throws IllegalArgumentException {
            for(java.util.Map.Entry<String,String> entry:additionalDomainAttributes.entrySet()){
                
                final String domainName=entry.getKey();
                String propertyName=entry.getValue();
                // is the name equals to the propertyname?
                try{
                    if(simpleFeatureType.getDescriptor(propertyName) != null){
                        // add
                        addDomain(domainName,propertyName);    
                        
                        // continue
                        continue;
                    }
                    
                }catch (Exception e) {
                    if(LOGGER.isLoggable(Level.FINE)){
                        LOGGER.log(Level.FINE,e.getLocalizedMessage(),e);
                    }
                }
                
                // ok why we don't have it? Maybe shapefile name truncation?
                if(propertyName.length()>10){
                    // hakc for shapes
                    propertyName= propertyName.substring(0,10);
                    // alias in provided type
                    try{
                        if(simpleFeatureType.getDescriptor(propertyName) != null){
                            // add
                            addDomain(domainName,propertyName);    
                            
                            // continue
                            continue;
                        }
                        
                    }catch (Exception e) {
                        if(LOGGER.isLoggable(Level.FINE)){
                            LOGGER.log(Level.FINE,e.getLocalizedMessage(),e);
                        }
                    }                    
                }
                
                // if I got here, we are in trouble. No way to add this param
                throw new IllegalArgumentException("Unable to add this domain:"+domainName+"-"+propertyName);
    
            }
        }

