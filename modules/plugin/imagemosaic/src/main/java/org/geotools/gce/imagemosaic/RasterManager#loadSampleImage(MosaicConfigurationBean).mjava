    /**
     * This code tries to load the sample image from which we can extract SM and CM to use when answering to requests that falls within a hole in the
     * mosaic.
     *
     * @param configuration
     */
    private void loadSampleImage(MosaicConfigurationBean configuration) {
        if (this.parentReader.sourceURL == null) {
            // TODO: I need to define the sampleImage somehow for the ImageMosaicDescriptor case
            return;
        }

        final URL baseURL = this.parentReader.sourceURL;
        final File baseFile = DataUtilities.urlToFile(baseURL);
        // in case we do not manage to convert the source URL we leave right awaycd sr
        if (baseFile == null) {
            if (LOGGER.isLoggable(Level.FINE))
                LOGGER.fine("Unable to find sample image for path " + baseURL);
            return;
        }
        String baseName = baseFile.getParent() + "/";
        String fileName = null;
        File sampleImageFile = null;
        if (configuration != null) {
            String name = configuration.getName();
            if (name != null) {
                fileName = baseName + name + Utils.SAMPLE_IMAGE_NAME;
                sampleImageFile = new File(fileName);
                if (!sampleImageFile.exists() || !sampleImageFile.canRead()) {
                    fileName = baseName + name + Utils.SAMPLE_IMAGE_NAME_LEGACY;
                    sampleImageFile = new File(fileName);
                    if (!sampleImageFile.exists() || !sampleImageFile.canRead()) {
                        sampleImageFile = null;
                    }
                }
            }
        }

        if (sampleImageFile == null) {
            sampleImageFile = new File(baseName + Utils.SAMPLE_IMAGE_NAME);
            if(!sampleImageFile.exists()) {
                sampleImageFile = new File(baseName + Utils.SAMPLE_IMAGE_NAME_LEGACY);
            }
        }
        final RenderedImage sampleImage = Utils.loadSampleImage(sampleImageFile);
        if (sampleImage != null) {

            // load SM and CM
            defaultCM = sampleImage.getColorModel();
            defaultSM = sampleImage.getSampleModel();
            if (defaultCM instanceof IndexColorModel) {
                defaultPalette = Utils.extractPalette((IndexColorModel) defaultCM);
            }

            // default ImageLayout
            defaultImageLayout = new ImageLayout().setColorModel(defaultCM)
                    .setSampleModel(defaultSM);
        } else if (LOGGER.isLoggable(Level.WARNING))
            LOGGER.warning("Unable to find sample image for path " + baseURL);
    }

