    public void testRebuildSchemaWithAllItems() throws Exception {
        try {
            dataStore.setSchemaInitParams(MongoSchemaInitParams.builder().maxObjects(-1).build());
            clearSchemaStore(dataStore);
            dataStore.cleanEntries();
            SimpleFeatureType schema = dataStore.getSchema("ft1");
            assertNotNull(schema);
            assertNotNull(schema.getDescriptor("properties.optionalProperty"));
            assertNotNull(schema.getDescriptor("properties.optionalProperty2"));
            assertNotNull(schema.getDescriptor("properties.optionalProperty3"));
            // check inside array value (not first element)
            assertNotNull(
                    "Inside array value check (not first element) failed.",
                    schema.getDescriptor("properties.listProperty.insideArrayValue"));
        } finally {
            dataStore.setSchemaInitParams(null);
            clearSchemaStore(dataStore);
            dataStore.cleanEntries();
        }
    }

