    public void testFeatureAttributeValueIsReturnedFromJsonPath()
            throws IOException, FactoryException, TransformException {
        // test that in case of a jsonpath can be resolved against the feature,
        // the feature value is picked up instead of the one from the DBObject
        SimpleFeatureSource source = dataStore.getFeatureSource("ft3");
        try (FeatureIterator<SimpleFeature> it = source.getFeatures().features()) {
            GeometryCoordinateSequenceTransformer transformer =
                    new GeometryCoordinateSequenceTransformer();
            CoordinateReferenceSystem original = source.getSchema().getCoordinateReferenceSystem();
            CoordinateReferenceSystem target = CRS.decode("urn:x-ogc:def:crs:EPSG:6.11.2:4326");
            transformer.setMathTransform(CRS.findMathTransform(original, target, false));
            while (it.hasNext()) {
                SimpleFeature f = it.next();
                // transforming the geometry so that the SimpleFeature geometry will be different
                // from
                // the one in the DBObject
                Geometry geom = transformer.transform((Geometry) f.getDefaultGeometry());
                f.setDefaultGeometry(geom);
                Geometry geometry2 = (Geometry) MongoComplexUtilities.getValue(f, "geometry");
                assertEquals(geom, geometry2);
                MongoFeature mongoFeature = (MongoFeature) f;
                Geometry dbGeom =
                        new MongoGeometryBuilder()
                                .toGeometry(
                                        (DBObject) mongoFeature.getMongoObject().get("geometry"));
                assertFalse(geometry2.equals(dbGeom));
            }
        }
    }

