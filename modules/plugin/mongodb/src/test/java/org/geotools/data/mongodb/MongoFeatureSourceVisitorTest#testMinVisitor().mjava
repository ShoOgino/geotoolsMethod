    @Test
    public void testMinVisitor() throws Exception {
        FilterFactory ff = dataStore.getFilterFactory();
        PropertyName p = ff.property("properties.dateProperty");

        MinVisitor v = new TestMinVisitor(p);

        dataStore.getFeatureSource("ft1").accepts(Query.ALL, v, null);

        Date minDate =
                Date.from(
                        Instant.from(
                                DateTimeFormatter.ISO_DATE_TIME.parse("2015-01-01T00:00:00Z")));
        assertEquals(minDate, v.getResult().getValue());

        assertFalse(visited);
        assertTrue(valueSet);
    }

