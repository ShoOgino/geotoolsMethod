    public void testNullSortBy() throws Exception {
        SortBy[] sorts = {SortBy.NATURAL_ORDER};

        SimpleFeatureSource source = dataStore.getFeatureSource("ft1");
        Query q = new Query("ft1", Filter.INCLUDE);
        q.setSortBy(sorts);

        SimpleFeatureCollection features = source.getFeatures(q);
        try (SimpleFeatureIterator it = features.features()) {
            List<Double> doubleValues = new ArrayList<>(3);
            while (it.hasNext()) {
                SimpleFeature feature = it.next();
                doubleValues.add((Double) feature.getAttribute("properties.doubleProperty"));
            }
            assertEquals(doubleValues.size(), 3);
        }
    }

