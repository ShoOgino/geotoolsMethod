    /**
     * Finds the attribute mapping from in the provided feature type that matches the property name
     * steps. This method sticks to the feature type attributes mappings and doesn't follow the
     * nested mappings.
     */
    private AttributeMapping findAttributeMapping(
            FeatureTypeMapping featureTypeMapping,
            PropertyName propertyName,
            XPathUtil.StepList propertySteps) {
        // let's check if any of the feature type attributes matches the property name
        for (AttributeMapping attributeMapping : featureTypeMapping.getAttributeMappings()) {
            // build the attribute mapping XML path steps list
            XPathUtil.StepList attributeSteps = attributeMapping.getTargetXPath();
            if (propertySteps == null
                    // the property didn't had a valid XML path
                    ? matchProperty(propertyName.getPropertyName(), attributeSteps)
                    // the property had a valid XML path
                    : matchProperty(propertySteps, attributeSteps)) {
                // we found our attribute, we are done
                return attributeMapping;
            }
        }
        // no attribute matching the provided property found
        return null;
    }

