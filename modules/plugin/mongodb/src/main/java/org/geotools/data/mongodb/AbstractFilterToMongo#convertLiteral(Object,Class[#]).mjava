    /**
     * Helper method that tries to convert a literal to the expected type. If the target type is not
     * supported by MongoDB the string representation of the literal is returned.
     */
    private Object convertLiteral(Object literal, Class<?> targetType) {
        if (literal == null) {
            // return the NULL value
            return null;
        }
        // do we have a target type ?
        if (targetType == null) {
            // no target type, if the literal is already a supported Java
            // primitive type we return it otherwise we do a to string
            return covertToPrimitive(literal);
        }
        // let's see if the target type is a primitive type supported by MongoDB
        if (!isPrimitiveTypeSupported(targetType)) {
            return literal.toString();
        }
        Object converted = Converters.convert(literal, targetType);
        if (converted == null) {
            // no conversion found return the literal as string
            return literal.toString();
        }
        // return the converted value
        return converted;
    }

