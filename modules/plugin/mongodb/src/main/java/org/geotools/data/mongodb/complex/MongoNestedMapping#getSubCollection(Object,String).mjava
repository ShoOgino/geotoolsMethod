    private List getSubCollection(Object feature, String collectionPath) {
        feature = MongoComplexUtilities.extractFeature(feature, collectionPath);
        if (feature instanceof MongoFeature) {
            DBObject mongoObject = ((MongoFeature) feature).getMongoObject();
            return getSubCollection(mongoObject, collectionPath, Collections.emptyMap());
        } else if (feature instanceof MongoCollectionFeature) {
            MongoCollectionFeature collectionFeature = (MongoCollectionFeature) feature;
            return getSubCollection(
                    collectionFeature.getMongoFeature().getMongoObject(),
                    collectionPath,
                    collectionFeature.getCollectionsIndexes());
        }
        throw new RuntimeException("MongoDB nesting only works with MongoDB features.");
    }

