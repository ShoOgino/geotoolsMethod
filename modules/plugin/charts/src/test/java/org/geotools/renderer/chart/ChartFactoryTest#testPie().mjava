    @Test
    public void testPie() throws Exception {
        Literal url = ff.literal("http://chart?cht=p&chd=t:10,20,70&chs=200x100");
        JFreeChart chart = factory.getChart(null, url, ChartGraphicFactory.FORMAT, 500);
        Assert.assertNotNull(chart);
        Assert.assertTrue(chart.getPlot() instanceof PiePlot);
        PiePlot p = (PiePlot) chart.getPlot();

        // values are turned in percentages
        Assert.assertEquals(3, p.getDataset().getItemCount());
        Assert.assertEquals(0.1f, p.getDataset().getValue(0));
        Assert.assertEquals(0.2f, p.getDataset().getValue(1));
        Assert.assertEquals(0.7f, p.getDataset().getValue(2));
    }

