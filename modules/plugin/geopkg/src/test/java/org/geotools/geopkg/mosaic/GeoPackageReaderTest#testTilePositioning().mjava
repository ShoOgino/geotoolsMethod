    @Test
    public void testTilePositioning() throws IOException {
        // before GEOT-5809 the bounds might have matched, but the raster contents were wrong, check
        // image vs image
        GeoPackageReader reader =
                new GeoPackageReader(GeoPackageTest.class.getResource("Blue_Marble.gpkg"), null);

        GeneralParameterValue[] parameters = new GeneralParameterValue[1];
        GridGeometry2D gg =
                new GridGeometry2D(
                        new GridEnvelope2D(new Rectangle(128, 128)),
                        new ReferencedEnvelope(-81, -80, 30, 31, WGS_84));
        parameters[0] = new Parameter<GridGeometry2D>(AbstractGridFormat.READ_GRIDGEOMETRY2D, gg);
        GridCoverage2D gc = reader.read("bluemarble_tif_tiles", parameters);
        RenderedImage img = gc.getRenderedImage();
        File reference =
                new File("./src/test/resources/org/geotools/geopkg/tilePositionZoomLevel4.png");
        ImageAssert.assertEquals(reference, img, 1000);
    }

