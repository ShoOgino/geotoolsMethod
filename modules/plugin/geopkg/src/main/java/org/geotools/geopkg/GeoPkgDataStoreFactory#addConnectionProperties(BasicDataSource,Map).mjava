    static void addConnectionProperties(BasicDataSource dataSource, Map configuration)
            throws IOException {
        SQLiteConfig config = new SQLiteConfig();
        config.setSharedCache(true);
        config.enableLoadExtension(true);
        Object synchronous = READ_ONLY.lookUp(configuration);
        if (Boolean.TRUE.equals(synchronous)) {
            config.setPragma(SQLiteConfig.Pragma.SYNCHRONOUS, "OFF");
            config.setReadOnly(true);
        }
        // config.setPragma(SQLiteConfig.Pragma.MMAP_SIZE, "268435456");

        for (Map.Entry e : config.toProperties().entrySet()) {
            dataSource.addConnectionProperty((String) e.getKey(), (String) e.getValue());
        }
    }

