    @Test
    public void testDataDoesNotContainAllFields() throws IOException {
        String input =
                CSVTestStrategySupport.buildInputString("lat,lon,foo,bar", "-72.3829,42.29,quux");
        CSVFileState fileState = new CSVFileState(input, "typename");
        CSVLatLonStrategy strategy = new CSVLatLonStrategy(fileState);
        SimpleFeatureType featureType = strategy.getFeatureType();
        assertEquals("Invalid attribute count", 3, featureType.getAttributeCount());
        CSVIterator iterator = strategy.iterator();
        SimpleFeature feature = iterator.next();
        Point point = (Point) feature.getAttribute("location");
        Coordinate coordinate = point.getCoordinate();
        assertEquals("Invalid y coordinate", 42.29, coordinate.y, 0.1);
        assertEquals("Invalid x coordinate", -72.3829, coordinate.x, 0.1);
        assertEquals("Invalid attribute value", "quux", feature.getAttribute("foo"));
        assertNull("Expected null", feature.getAttribute("bar"));
    }

