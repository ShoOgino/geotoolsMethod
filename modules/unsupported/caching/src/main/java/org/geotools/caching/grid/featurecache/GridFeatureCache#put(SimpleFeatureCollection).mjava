    /**
     * Adds a feature collection to the cache.
     *
     * @throws CacheOversizedException if the feature collection has too many features for the
     *     cache.
     */
    public void put(SimpleFeatureCollection fc) throws CacheOversizedException {
        isOversized(fc);
        lock.writeLock().lock();
        try {
            SimpleFeatureIterator it = fc.features();
            try {
                while (it.hasNext()) {
                    SimpleFeature f = it.next();
                    this.tracker.insertData(f, CacheUtil.convert((Envelope) f.getBounds()));
                }
            } finally {
                fc.close(it);
            }
        } finally {
            lock.writeLock().unlock();
        }
        // flush cache at this point to write to store
        this.tracker.flush();
    }

