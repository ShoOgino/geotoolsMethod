    /**
     * Registers filter from the cache.
     *
     * <p>Filter needs to be an instance of BBOXImpl or a collection of BBOXImpls that are combined
     * using or. Any other combination will result in a UnsupportedOperationException.
     *
     * @param f
     */
    public void register(Filter f) {
        if (f instanceof OrImpl) {
            for (Iterator<Filter> it = ((OrImpl) f).getChildren().iterator(); it.hasNext(); ) {
                Filter child = (Filter) it.next();
                register(child);
            }
        } else if (f instanceof BBOXImpl) {
            register((BBOXImpl) f);
        } else {
            throw new UnsupportedOperationException("Do not know how to handle this filter" + f);
        }
    }

