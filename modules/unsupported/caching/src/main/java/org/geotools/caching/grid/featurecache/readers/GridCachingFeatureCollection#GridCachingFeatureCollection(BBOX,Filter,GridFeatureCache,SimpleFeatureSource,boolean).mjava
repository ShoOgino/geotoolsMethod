    /**
     * Creates a feature collection that will first read items from the cache then read any missing
     * items from the feature source.
     *
     * @param preFilter the bounding filter of the request
     * @param postFilter the complete request filter
     * @param g
     * @param fs
     * @param cacheFeatures
     */
    public GridCachingFeatureCollection(
            BBOX preFilter,
            Filter postFilter,
            GridFeatureCache g,
            SimpleFeatureSource fs,
            boolean cacheFeatures) {
        this.grid = g;
        this.preFilter = preFilter;

        this.postFilter = postFilter;
        this.fs = fs;
        this.cacheFeatures = cacheFeatures;

        this.listeners = new HashSet<CollectionListener>();
        iterators = new HashSet<Object>();
        featureType = g.getSchema();
    }

