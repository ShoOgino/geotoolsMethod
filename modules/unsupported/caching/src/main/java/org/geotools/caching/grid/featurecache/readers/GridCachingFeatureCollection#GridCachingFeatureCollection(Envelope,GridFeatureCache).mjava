    /**
     * Creates a feature collection that will only read items from the cache.
     *
     * @param e
     * @param g
     */
    public GridCachingFeatureCollection(Envelope e, GridFeatureCache g) {
        this.grid = g;

        this.preFilter =
                filterFactory.bbox(
                        g.getSchema().getGeometryDescriptor().getLocalName(),
                        e.getMinX(),
                        e.getMinY(),
                        e.getMaxX(),
                        e.getMaxY(),
                        g.getSchema()
                                .getGeometryDescriptor()
                                .getCoordinateReferenceSystem()
                                .toString());
        this.postFilter =
                filterFactory.bbox(
                        g.getSchema().getGeometryDescriptor().getLocalName(),
                        e.getMinX(),
                        e.getMinY(),
                        e.getMaxX(),
                        e.getMaxY(),
                        g.getSchema()
                                .getGeometryDescriptor()
                                .getCoordinateReferenceSystem()
                                .toString());

        this.fs = null;
        this.cacheFeatures = false;
        this.listeners = new HashSet<CollectionListener>();
        iterators = new HashSet<Object>();
        featureType = g.getSchema();
    }

