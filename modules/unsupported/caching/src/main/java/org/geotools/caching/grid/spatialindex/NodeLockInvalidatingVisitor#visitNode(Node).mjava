    public void visitNode(Node n) {

        if (this.region == null || this.region.contains(n.getShape())) {
            // clear & write out the node
            // note this will not clear children; in this case
            // we assume the validation will visit these children
            // and clear them separately
            try {
                n.getIdentifier().writeLock();
                try {
                    dataCount += n.getDataCount();
                    n.clear();
                    index.writeNode(n);
                } finally {
                    n.getIdentifier().writeUnLock();
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }

