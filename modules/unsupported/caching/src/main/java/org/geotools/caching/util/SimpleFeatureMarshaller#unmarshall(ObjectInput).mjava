    /**
     * Inverse operation of marshall : read a feature from a stream.
     *
     * @param s the stream to read from
     * @return the unmarshalled feature
     * @throws IOException
     * @throws ClassNotFoundException
     * @throws IllegalAttributeException
     */
    public SimpleFeature unmarshall(ObjectInput s)
            throws IOException, ClassNotFoundException, IllegalAttributeException {
        String typeName = (String) s.readObject();
        SimpleFeatureType type = typeLookUp(typeName);

        if (type != null) {
            SimpleFeature f = unmarshall(s, type);

            if (f == null) {
                System.err.println("Returning null feature");
            }

            return f;
        } else {
            throw new IllegalStateException(typeName + " is not a registered type.");
        }
    }

