    /**
     * Registers a given envelope in the cache. All nodes within this envelope are flagged as valid.
     */
    protected void register(Envelope e) {
        Region r = CacheUtil.convert(e);
        ValidatingVisitor v = new ValidatingVisitor(r);

        lock.writeLock().lock();
        try {
            // we don't want to track access while we register; this will ensure that just because a
            // node touches another node it
            // isn't considered an access; it might be better to improve the way containment query
            // is done.
            boolean recordaccess = this.tracker.getDoRecordAccess();
            this.tracker.setDoRecordAccess(false);
            try {
                this.tracker.containmentQuery(r, v);
            } finally {
                this.tracker.setDoRecordAccess(recordaccess);
            }
        } finally {
            lock.writeLock().unlock();
        }
    }

