    /**
     * Marshall and unmarshall a DefaultFeature, and test for equality with the result.
     *
     * @throws IOException
     * @throws ClassNotFoundException
     * @throws IllegalAttributeException
     */
    public void testMarshall()
            throws IOException, ClassNotFoundException, IllegalAttributeException {
        Generator gen = new Generator(1000, 1000);
        SimpleFeature f = (SimpleFeature) gen.createFeature(0);
        SimpleFeatureMarshaller m = new SimpleFeatureMarshaller();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        m.marshall(f, oos);

        byte[] ba = baos.toByteArray();
        baos.close();

        ByteArrayInputStream bais = new ByteArrayInputStream(ba);
        ObjectInputStream ois = new ObjectInputStream(bais);
        SimpleFeature newf = m.unmarshall(ois);
        bais.close();
        // System.out.println(f) ;
        // System.out.println(newf);
        assertTrue(f.equals(newf));

        //        for (Iterator<SimpleFeatureType> it = m.types.values().iterator(); it.hasNext();)
        // {
        //        	SimpleFeatureType next = it.next();
        //        	System.out.println(next);
        //        	FeatureTypeTransformer t = new FeatureTypeTransformer();
        //        	try {
        //        		t.setIndentation(5);
        ////        		t.setOmitXMLDeclaration(true);
        ////        		FileOutputStream fos = new FileOutputStream("/tmp/schema.xml");
        ////        		fos.write("<xs:schema
        // xmlns:xs=\"http://www.w3.org/2001/XMLSchema\">\n".getBytes());
        //				t.transform(next, System.out);
        ////				fos.write("</xs:schema>".getBytes());
        ////				fos.close();
        //				FileInputStream fis = new FileInputStream("/tmp/schema.xml");
        //				Schema schema = SchemaFactory.getInstance(null, fis); //
        // "http://www.w3.org/2001/XMLSchema"
        //				System.out.println(GMLComplexTypes.createFeatureType(schema.getComplexTypes()[0]));
        //				fis.close();
        //			} catch (TransformerException e) {
        //				// TODO Auto-generated catch block
        //				e.printStackTrace();
        //			} catch (SAXException e) {
        //				// TODO Auto-generated catch block
        //				e.printStackTrace();
        ////			} catch (URISyntaxException e) {
        ////				// TODO Auto-generated catch block
        ////				e.printStackTrace();
        //			} catch (NullPointerException e) {
        //				e.printStackTrace();
        //			}
        //        }
    }

