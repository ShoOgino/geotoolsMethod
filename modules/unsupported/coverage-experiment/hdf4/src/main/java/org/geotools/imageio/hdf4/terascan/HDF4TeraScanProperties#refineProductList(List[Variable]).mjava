    /**
     * Reduces the product's list by removing not interesting ones. As an
     * instance the dataset containing l2_flags will be not presented.
     * 
     * @param products
     *                The originating <code>String</code> array containing the
     *                list of products to be checked.
     * @return A <code>String</code> array containing a refined list of
     *         products
     */
    static String[] refineProductList(final List<Variable> variables) {
    	if (variables!=null && !variables.isEmpty()){
	    	final int inputProducts = variables.size();
	        final String[] products = new String[inputProducts];
	        int j = 0;
	        final boolean[] accepted = new boolean[inputProducts];
	
	        for (int i = 0; i < inputProducts; i++) {
	            final String productName = variables.get(i).getName();
	            products[i] = productName;
	            if (HDF4TeraScanProperties.terascanProducts.get(productName) != null) {
	                accepted[i] = true;
	                j++;
	            } else
	                accepted[i] = false;
	        }
	        if (j == inputProducts)
	            return products;
	        final String[] returnedProductsList = new String[j];
	        j = 0;
	        for (int i = 0; i < inputProducts; i++) {
	            if (accepted[i])
	                returnedProductsList[j++] = products[i];
	        }
	        return returnedProductsList;
    	}
    	return null;
    }

