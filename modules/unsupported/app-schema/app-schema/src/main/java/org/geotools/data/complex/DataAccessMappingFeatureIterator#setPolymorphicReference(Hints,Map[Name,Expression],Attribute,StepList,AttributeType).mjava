    /**
     * Special handling for polymorphic mapping where the value of the attribute determines that
     * this attribute should be a placeholder for an xlink:href.
     *
     * @param xlinkHrefHints
     *            the xlink:href hints holding the URI
     * @param clientPropsMappings
     *            client properties
     * @param target
     *            the complex feature being built
     * @param xpath
     *            the xpath of attribute
     * @param targetNodeType
     *            the type of the attribute to be cast to, if any
     */
    private void setPolymorphicReference(Hints xlinkHrefHints,
            Map<Name, Expression> clientPropsMappings, Attribute target, StepList xpath,
            AttributeType targetNodeType) {

        Object uri = xlinkHrefHints.get(ComplexFeatureConstants.STRING_KEY);
        if (uri != null) {
            Attribute instance = xpathAttributeBuilder.set(target, xpath, null, "", targetNodeType,
                    true, null);
            FilterFactoryImpl ff = new FilterFactoryImpl();
            Map<Name, Expression> newClientProps = new HashMap<Name, Expression>();
            newClientProps.putAll(clientPropsMappings);
            newClientProps.put(XLINK_HREF_NAME, ff.literal(uri));
            setClientProperties(instance, null, newClientProps);
        }
    }

