    /**
     *  
     * @see org.geotools.feature.FeatureCollection#accepts(org.opengis.feature.FeatureVisitor,
     *      org.opengis.util.ProgressListener)
     */
    public void accepts(FeatureVisitor visitor, ProgressListener progress) throws IOException {
        FeatureIterator iterator = null;
        if( progress == null ) progress = new NullProgressListener();
        try{
            progress.started();
            for( iterator = features(); !progress.isCanceled() && iterator.hasNext();){
                try {
                    Feature feature = iterator.next();
                    visitor.visit(feature);
                }
                catch( Exception erp ){
                    progress.exceptionOccurred( erp );
                }
            }            
        }
        finally {
            progress.complete();            
            iterator.close();
        }
    }

