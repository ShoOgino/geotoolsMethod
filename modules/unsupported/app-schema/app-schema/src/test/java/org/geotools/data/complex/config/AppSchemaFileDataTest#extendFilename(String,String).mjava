    /**
     * extends a base filename with a path relative to the base filename
     * 
     * @param baseFilename
     *            may be absolute, or relative to the current directory
     * @param relativePath
     *            must be relative to the base file name
     * @return an absolute, normalized filename
     * @throws RuntimeException
     *             if the base filename and relative path are incompatible
     */
    private String extendFilename(String baseFilename, String relativePath) throws RuntimeException {
        baseFilename = new File(baseFilename).getAbsolutePath();
        String extendedFilename = FilenameUtils.concat(baseFilename, relativePath);

        if (extendedFilename == null) {
            throw new RuntimeException("Relative path to datastore is incompatible with the "
                    + "base path - check double dot steps.");
        }
        return extendedFilename;
    }

