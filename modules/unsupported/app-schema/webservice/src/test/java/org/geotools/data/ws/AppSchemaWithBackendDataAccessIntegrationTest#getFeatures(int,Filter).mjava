    private FeatureCollection<FeatureType, Feature> getFeatures(
            final int maxFeatures, Filter inputFilter) throws Exception {
        FeatureSource<FeatureType, Feature> fSource =
                newGuDataAccess.getFeatureSourceByName(typeName);
        FeatureCollection<FeatureType, Feature> features =
                fSource.getFeatures(namedQuery(inputFilter, Integer.valueOf(maxFeatures)));
        return features;
    }

