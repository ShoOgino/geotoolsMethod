    private FeatureCollection getFeatures(final int maxFeatures, Filter inputFilter)
            throws Exception {
        FeatureSource fSource = (FeatureSource) mappingDataStore.getFeatureSource(typeName);
        FeatureCollection features =
                (FeatureCollection)
                        fSource.getFeatures(namedQuery(inputFilter, Integer.valueOf(maxFeatures)));
        return features;
    }

