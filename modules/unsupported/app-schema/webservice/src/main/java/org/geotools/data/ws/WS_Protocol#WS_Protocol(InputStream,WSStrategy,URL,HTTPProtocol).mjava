    public WS_Protocol(InputStream capabilitiesReader, WSStrategy strategy, URL query,
            HTTPProtocol http) throws IOException {
        this.strategy = strategy;
        this.capabilitiesStream = capabilitiesReader;
        this.capabilities = parseCapabilities(capabilitiesReader);
        this.http = http;
        this.url = query;
        this.typeInfos = new HashMap<String, FeatureTypeType>();
    }

