    /**
     * Configure the parser.
     * 
     * @param parser
     *            the XML parser to configure
     */
    private void configure(XMLReader parser) {
        try {
            // See: http://xerces.apache.org/xerces2-j/features.html
            // (1) Enable validation in the parser.
            parser.setFeature("http://xml.org/sax/features/validation", true);
            // (2) Specify that validation is against XML schemas.
            parser.setFeature("http://apache.org/xml/features/validation/schema", true);
            // (2a) Enable the most pedantic level of checking of the schemas themselves.
            // This has no effect on checking of instance documents, so we leave it turned off.
            // It is left here for the education of the reader.
            // parser.setFeature("http://apache.org/xml/features/validation/schema-full-checking",
            // true);
            // (3) Set the entity resolver, which is used to look up XML schemas.
            // See: http://xerces.apache.org/xerces2-j/faq-xcatalogs.html
            parser.setProperty("http://apache.org/xml/properties/internal/entity-resolver",
                    new AppSchemaXMLEntityResolver());
        } catch (Exception e) {
            // Validation failures do not throw. This block is entered if there is, for example, an
            // I/O error occurs or a schema cannot be located during parsing.
            throw new RuntimeException(e);
        }
    }

