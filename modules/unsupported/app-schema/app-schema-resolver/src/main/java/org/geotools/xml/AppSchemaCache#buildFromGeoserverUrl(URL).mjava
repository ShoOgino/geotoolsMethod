    /**
     * Search parents of url for a GeoServer data directory. If found, use it to create a cache in
     * the "app-schema-cache" subdirectory, with downloading enabled.
     * 
     * @param url
     *            a URL for a file in a GeoServer data directory.
     * @return a cache in the "app-schema-cache" subdirectory
     */
    public static AppSchemaCache buildFromGeoserverUrl(URL url) {
        if (!geoserverSupportEnabled) {
            return null;
        }
        File file = DataUtilities.urlToFile(url);
        while (true) {
            if (file == null) {
                return null;
            }
            if (isGeoserverDataDirectory(file)) {
                return new AppSchemaCache(new File(file, GEOSERVER_CACHE_DIRECTORY_NAME), true);
            }
            file = file.getParentFile();
        }
    }

