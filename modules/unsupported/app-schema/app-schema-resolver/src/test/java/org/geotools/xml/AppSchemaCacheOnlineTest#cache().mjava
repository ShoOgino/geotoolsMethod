    @Test
    public void cache() throws Exception {
        // expect failure when downloading disabled
        {
            AppSchemaCache cache = new AppSchemaCache(CACHE_DIRECTORY, false);
            String location = cache.resolveLocation(SCHEMA_LOCATION);
            Assert.assertNull(location);
        }
        // should succeed if able to download
        {
            AppSchemaCache cache = new AppSchemaCache(CACHE_DIRECTORY, true);
            String location = cache.resolveLocation(SCHEMA_LOCATION);
            Assert.assertNotNull(location);
            Assert.assertTrue(location.startsWith("file:"));
            Assert.assertTrue(location.endsWith(SCHEMA_FILENAME));
            Assert.assertTrue(DataUtilities.urlToFile((new URI(location)).toURL()).exists());
        }
        // now that schema is is in the cache, should succeed even if downloading is disabled
        {
            AppSchemaCache cache = new AppSchemaCache(CACHE_DIRECTORY, false);
            String location = cache.resolveLocation(SCHEMA_LOCATION);
            Assert.assertNotNull(location);
            Assert.assertTrue(location.startsWith("file:"));
            Assert.assertTrue(location.endsWith(SCHEMA_FILENAME));
            Assert.assertTrue(DataUtilities.urlToFile((new URI(location)).toURL()).exists());
        }
    }

