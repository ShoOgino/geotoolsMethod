    @Before
    public void setUp() throws Exception {
        mbstyle = MapboxTestUtils.parseTestStyle(getTestResourceName());
        final JSONArray layers = (JSONArray) mbstyle.get("layers");
        for (Object o : layers) {
            JSONObject layer = (JSONObject) o;
            testLayersById.put((String) layer.get("id"), layer);
        }
        parse = new MBObjectParser(MBExpression.class);
        ff = parse.getFilterFactory();
        // setup test features
        final SimpleFeatureType dataType = DataUtilities.createType("mbexpression.test",
            "anIntField:int,anotherIntField:int,doubleField:double,geom:Point,name:String");
        testFeatures = new SimpleFeature[intVals.length];
        for (int i = 0; i < intVals.length; ++i) {
            final SimpleFeature simpleFeature = SimpleFeatureBuilder.build(dataType,
                new Object[] {Integer.valueOf(i), Integer.valueOf(intVals[i]), Double.valueOf(doubleVals[i]),
                    geometryFactory.createPoint(new Coordinate(intVals[i], intVals[i])),
                    "name_" + intVals[i]},
                "mbexpression."+(i+1));
            testFeatures[i] = simpleFeature;
        }
        // finally, do any subclass setup steps
        setupInternal();
    }

