    @Test
    public void testTextOffsetEmsLinePlacement() throws Exception {
        JSONObject jsonObject =
                parseTestStyle("symbolStyleSimpleIconAndTextLinePlacementTest.json");
        MBStyle mbStyle = new MBStyle(jsonObject);
        StyledLayerDescriptor sld = mbStyle.transform();
        Style style = MapboxTestUtils.getStyle(sld, 0);
        TextSymbolizer ts =
                (TextSymbolizer)
                        style.featureTypeStyles().get(0).rules().get(0).symbolizers().get(0);
        LinePlacement lp = (LinePlacement) ts.getLabelPlacement();
        // text-offset: [0, 0.5] as ems, with text-size set to 20, and opposite y direction
        assertEquals(-10, lp.getPerpendicularOffset().evaluate(null, Double.class), 0d);
        // check also the other vendor options
        assertThat(
                ts.getOptions(),
                allOf(
                        hasEntry("followLine", "true"),
                        hasEntry("maxAngleDelta", "45.0"),
                        hasEntry("group", "true"),
                        hasEntry("labelAllGroup", "true"),
                        hasEntry("forceLeftToRight", "true")));
    }

