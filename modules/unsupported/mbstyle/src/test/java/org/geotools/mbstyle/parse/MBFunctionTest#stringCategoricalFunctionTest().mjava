    @Test
    public void stringCategoricalFunctionTest() throws Exception {
        String jsonStr = "{'property': 'roadtype', 'type': 'categorical', 'default': 'defaultStr', 'stops': [['trail', 'string1'], ['dirtroad', 'string2'], ['road', 'string3'], ['highway', 'string4']]}";
        MBFunction function = new MBFunction(object(jsonStr));
        assertTrue("Function category is \"property\"",
                EnumSet.of(MBFunction.FunctionCategory.PROPERTY).equals(function.category()));
        assertEquals("Function type is \"categorical\"", MBFunction.FunctionType.CATEGORICAL,
                function.getType());

        Expression outputExpression = function.function(String.class);

        SimpleFeatureType SAMPLE = DataUtilities.createType("SAMPLE",
                "id:\"\",roadtype,location=4326");

        // Test for each category
        SimpleFeature feature = DataUtilities.createFeature(SAMPLE, "measure1=A|trail|POINT(0,0)");
        String result = outputExpression.evaluate(feature, String.class);
        assertEquals("string1", result);

        feature = DataUtilities.createFeature(SAMPLE, "measure1=A|dirtroad|POINT(0,0)");
        result = outputExpression.evaluate(feature, String.class);
        assertEquals("string2", result);

        feature = DataUtilities.createFeature(SAMPLE, "measure1=A|road|POINT(0,0)");
        result = outputExpression.evaluate(feature, String.class);
        assertEquals("string3", result);

        feature = DataUtilities.createFeature(SAMPLE, "measure1=A|highway|POINT(0,0)");
        result = outputExpression.evaluate(feature, String.class);
        assertEquals("string4", result);

        // feature = DataUtilities.createFeature(SAMPLE, "measure1=A|other|POINT(0,0)");
        // result = outputExpression.evaluate(feature, String.class);
        // assertEquals("defaultStr", result); // TODO default case.
    }

