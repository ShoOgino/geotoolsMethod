    /**
     * Verify that a categorical property functions can be parsed correctly.
     */
    @Test
    public void testParseCategoricalFunction() throws IOException, ParseException {
        JSONObject layer = testLayersById.get("function6");
        Optional<JSONObject> o = safeTraverse(layer, JSONObject.class, "paint", "circle-color");
        JSONObject j = o.get();
        MBFunction fn = new MBFunction(j);
        assertEquals(MBFunction.FunctionType.CATEGORICAL, fn.getType());
        assertEquals(
                EnumSet.of(MBFunction.FunctionCategory.PROPERTY),
                fn.category());
        assertEquals("color", fn.getProperty());
        assertNotNull(fn.getStops());
        assertEquals(5, fn.getStops().size());
    }

