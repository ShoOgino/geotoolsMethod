    /**
     * Test that nothing breaks when an array function has output arrays of size one.
     *
     * @throws Exception
     */
    @Test
    public void testArrayFunctionSize1() throws Exception {
        JSONObject json =
                MapboxTestUtils.object(
                        "{'property':'temperature','type':'exponential', 'base':1.5, 'stops':[ [0,[0]], [100,[2]] ]}");
        MBFunction function = new MBFunction(json);

        List<MBFunction> splitFunctions = function.splitArrayFunction();
        assertEquals(1, splitFunctions.size());

        SimpleFeatureType SAMPLE =
                DataUtilities.createType(
                        "SAMPLE",
                        "id:\"\",temperature:0.0,location=4326,color:java.awt.Color,text:String:");
        SimpleFeature feature1 =
                DataUtilities.createFeature(SAMPLE, "measure1=A|0|POINT(0,0)|#FF0000|red");
        SimpleFeature feature2 =
                DataUtilities.createFeature(SAMPLE, "measure1=A|100|POINT(0,0)|#FF0000|red");

        assertEquals(
                0, splitFunctions.get(0).numeric().evaluate(feature1, Integer.class).intValue());
        assertEquals(
                2, splitFunctions.get(0).numeric().evaluate(feature2, Integer.class).intValue());
    }

