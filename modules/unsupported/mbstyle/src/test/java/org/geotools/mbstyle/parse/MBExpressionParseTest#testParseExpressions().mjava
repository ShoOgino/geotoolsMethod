    // ---- MAPBOX EXPRESSIONS BASE ---------------------------------------------------------
    /**
     * Verify that an expression can be parsed correctly from Layout, Paint, and Filter properties.
     */
    @Test
    public void testParseExpressions() {

        JSONObject layer = testLayersById.get("testExpressions");
        Optional<JSONObject> l = traverse(layer, JSONObject.class, "layout");
        JSONObject layout = l.get();
        Optional<JSONObject> p = traverse(layer, JSONObject.class, "paint");
        JSONObject paint = p.get();
        Optional<JSONArray> f = traverse(layer, JSONArray.class, "filter");
        JSONArray filter = f.get();

        // Testing parsing expression out of layer JSONObject
        Function upper = ff.function("strToUpperCase",ff.literal("test"));
        assertEquals(upper, parse.string(layout, "text-field", "fallback"));

        // Testing parsing expression out of filter JSONArray
        Function cat = ff.function("Concatenate", ff.literal("P"), ff.literal("o"), ff.literal("int"));
        assertEquals(cat, parse.string(filter, 2));

        // Testing parsing expression out of paint JSONObject
        Function down = ff.function("strToLowerCase", ff.literal("RED"));
        assertEquals(down, parse.color(paint, "text-color", Color.RED));


        // Testing exception thrown for unknown expression
        try {
            parse.string(layout, "text-size", "fallback");
            fail("expected format exception due to 'test' being an invalid MBExpression");
        }
        catch (MBFormatException expected){
        }

    }
    // ---- STRING EXPRESSIONS ---------------------------------------------------------

