    /**
     * Verify that a linear zoom-and-property function can be parsed correctly.
     */
    @Test
    public void testParsePropertyZoomFunction() throws IOException, ParseException {
        JSONObject layer = testLayersById.get("function4");
        Optional<JSONObject> o = traverse(layer, JSONObject.class, "paint", "circle-radius");
        JSONObject j = o.get();
        MBFunction fn = new MBFunction(j);
        
        // The function type is not specified in the JSON, so getType should return null.
        assertNull(fn.getType());
        // But the default fallback function type for number returns is 'exponential':
        assertEquals(MBFunction.FunctionType.EXPONENTIAL, fn.getTypeWithDefault(Number.class));
        
        assertEquals(
                EnumSet.of(MBFunction.FunctionCategory.PROPERTY, MBFunction.FunctionCategory.ZOOM),
                fn.category());
        assertEquals("rating", fn.getProperty());
        assertNotNull(fn.getStops());
        assertEquals(4, fn.getStops().size());
    }

