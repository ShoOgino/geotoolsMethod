    /**
     * Verify that symbol layer properties are parsed correctly.
     */
    @Test
    public void testParseSymbolLayer() throws IOException, ParseException {
        JSONObject jsonObject = MapboxTestUtils.parseTestStyle("symbolStyleTest.json");
        MBStyle s = new MBStyle(jsonObject);
        SymbolMBLayer l = getSingleLayerOfType(s, SymbolMBLayer.class);
        assertEquals("symbol", l.getType());
        assertEquals("testid", l.getId());
        assertEquals("testsource", l.getSource());

        assertEquals(1.0, l.getTextLineHeight().doubleValue(), .00001);
        assertEquals(20.0, l.getTextSize().doubleValue(), .00001);
        assertEquals("homer-simpson", l.getIconImage());
        assertEquals(TextTransform.LOWERCASE, l.getTextTransform());
        assertEquals(40.0, l.getIconRotate().doubleValue(), .00001);
        assertEquals(Justification.LEFT, l.getTextJustify());
        // assertEquals( , l.getVisibility());
        assertEquals(0.1, l.getIconSize().doubleValue(), .00001);
        assertEquals(TextAnchor.TOP, l.getTextAnchor());
        assertEquals(Alignment.VIEWPORT, l.getTextPitchAlignment());
        assertEquals("{name}", l.getTextField());
        assertEquals(10.0, l.getTextRotate().doubleValue(), .00001);
        assertEquals(0.05, l.getTextLetterSpacing().doubleValue(), .00001);
        assertEquals(5.0, l.getTextMaxWidth().doubleValue(), .00001);
        assertEquals(Arrays.asList("Bitstream Vera Sans", "Other Test Font"), l.getTextFont());
        assertEquals(new Color(0xFEDCBA), l.getTextColor());
        assertEquals(0.94, l.getTextOpacity().doubleValue(), .00001);
        assertEquals(new Color(0xABCDEF), l.getTextHaloColor());
        assertEquals(0.0, l.getTextHaloWidth().doubleValue(), .00001);
        assertEquals(0.0, l.getTextHaloBlur().doubleValue(), .00001);
        
        assertEquals(2, l.getIconOffset().length);
        assertEquals(-1, l.getIconOffset()[0], .00001);
        assertEquals(-10, l.getIconOffset()[1], .00001);
        
        assertEquals(2, l.getTextOffset().length);
        assertEquals(1, l.getTextOffset()[0], .00001);
        assertEquals(1, l.getTextOffset()[1], .00001);
        
        assertEquals(2, l.getIconTranslate().length);
        assertEquals(1, l.getIconTranslate()[0], .00001);
        assertEquals(1, l.getIconTranslate()[1], .00001);
        
        assertEquals(2, l.getTextTranslate().length);
        assertEquals(-1, l.getTextTranslate()[0], .00001);
        assertEquals(-1, l.getTextTranslate()[1], .00001);        
    }

