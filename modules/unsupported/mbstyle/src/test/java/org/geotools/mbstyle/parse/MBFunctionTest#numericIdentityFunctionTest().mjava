    /**
     * Test an MBFunction (type = Identity) that returns a numeric value for a given property.
     */
    @Test
    public void numericIdentityFunctionTest() throws Exception {
        SimpleFeatureType SAMPLE = DataUtilities.createType("SAMPLE",
                "id:\"\",temperature:0.0,location=4326");
        SimpleFeature feature = DataUtilities.createFeature(SAMPLE, "measure1=A|50.0|POINT(0,0)");

        // Verify the function was created correctly
        String jsonStr = "{'property':'temperature', 'type':'identity', 'default':-1}";
        MBFunction function = new MBFunction(MapboxTestUtils.object(jsonStr));
        assertTrue("Function category is \"property\"", EnumSet.of(MBFunction.FunctionCategory.PROPERTY).equals(function.category()));
        assertEquals("Function type is \"Identity\"", MBFunction.FunctionType.IDENTITY, function.getType());
        
        // Verify that the output is correct (== input)
        Expression outputExpression = function.numeric();
        Number result = outputExpression.evaluate(feature, Number.class);
        
        assertEquals("Numeric identity function output is == input property value", 50.0, result.doubleValue(), .000001);

        // Check default (for a feature missing the property)
        feature = DataUtilities.createFeature(SAMPLE, "measure1=A||POINT(0,0)");
        result = outputExpression.evaluate(feature, Number.class);
        assertEquals(-1, result.intValue());
    }

