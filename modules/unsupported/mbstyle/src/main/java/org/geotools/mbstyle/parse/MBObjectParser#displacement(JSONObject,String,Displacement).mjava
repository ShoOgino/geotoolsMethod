    /**
     * Maps a {@link JSONArray} to a {@link Displacement}.
     * 
     */
    public Displacement displacement(JSONObject json, String tag, Displacement fallback) {
        Object defn = json.get(tag);
        if (defn == null) {
            return fallback;
        } else if (defn instanceof JSONArray) {
            JSONArray array = (JSONArray) defn;
            return sf.displacement(number(array, 0, 0), number(array, 1, 0));
        } else if (defn instanceof JSONObject) {
            throw new MBFormatException("\"" + tag + "\": Functions not supported yet.");
        } else {
            throw new MBFormatException("\"" + tag + "\": Expected array or function, but was "
                    + defn.getClass().getSimpleName());
        }
    }

