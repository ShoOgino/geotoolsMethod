    /**
     * 
     * Transforms a given {@link MBLayer} to a GeoTools {@link FeatureTypeStyle}.
     * 
     * @param layer The MBLayer to transform.
     * @param styleContext The {@link MBStyle} to use as a context, e.g. for sprite and glyph address resolution.
     * @return A feature type style from the provided layer.
     */
    public FeatureTypeStyle transform(MBLayer layer, MBStyle styleContext) {
        if( !layer.visibility()){
            return null; // layer layout visibility 'none'
        }
        if (layer instanceof FillMBLayer) {
            return transform((FillMBLayer) layer, styleContext);
        } else if (layer instanceof RasterMBLayer) {
            return transform((RasterMBLayer) layer);
        } else if (layer instanceof LineMBLayer) {
            return transform((LineMBLayer) layer);
        } else if (layer instanceof CircleMBLayer) {
            return transform((CircleMBLayer) layer);
        } else if (layer instanceof BackgroundMBLayer) {
            return transform((BackgroundMBLayer) layer);
        } else if (layer instanceof SymbolMBLayer) {
            return transform((SymbolMBLayer) layer, styleContext);
        } else if (layer instanceof FillExtrusionMBLayer) {
            return transform(layer, styleContext);
        }

        throw new MBFormatException(layer.getType() + " not yet supported.");
    }

