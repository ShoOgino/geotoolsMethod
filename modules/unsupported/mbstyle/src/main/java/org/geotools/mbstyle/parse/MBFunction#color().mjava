    /** GeoTools {@link Function} from json definition that evaluates to a color.
     * <p>
     * This is the same as {@link #numeric()} except we can make some assumptions about
     * the values (converting hex to color, looking up color names).
     * 
     * @return {@link Function} (or identity {@link Expression} for the provided json 
     */
    public Expression color(){
        Expression value = value();
        // this is a plain property category so we can turn it into a function
        // Assume a EXPOTENTIAL function for now because it is the default for color
        FunctionType type = getType();
        if( type == null || type == FunctionType.CATEGORICAL){
            return colorCategorical(value); // CATEGORICAL is the default
        }
        else if( type == FunctionType.EXPONENTIAL){
            return colorExponential(value);
        }
        else if( type == FunctionType.INTERVAL){
            return colorInterval(value);
        }
        else if( type == FunctionType.IDENITY){
            return value;
        }
        throw new UnsupportedOperationException("Not yet implemented support for '"+type+"' function");
    }

