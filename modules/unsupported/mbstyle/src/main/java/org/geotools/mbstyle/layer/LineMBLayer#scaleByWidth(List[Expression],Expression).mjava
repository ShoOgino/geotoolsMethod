    private List<Expression> scaleByWidth(List<Expression> dasharray, Expression lineWidth) {
        if (dasharray == null) {
            return null;
        }

        // no need for scaling if the width happens to be exactly 1
        if (lineWidth instanceof Literal
                && Double.valueOf(1).equals(lineWidth.evaluate(null, Double.class))) {
            return dasharray;
        }

        return dasharray
                .stream()
                .map(dash -> ff.multiply(dash, lineWidth))
                .collect(Collectors.toList());
    }

