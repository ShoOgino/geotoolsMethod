    /**
     * Parses the GeoTools filter and tries to extract an SQL expression that can be used as the OGR
     * attribute filter
     *
     * @param schema
     * @param filter
     * @return
     */
    public String getAttributeFilter() {
        // TODO: switch to the non deprecated splitter (that no one seems to be using)
        PostPreProcessFilterSplittingVisitor visitor =
                new PostPreProcessFilterSplittingVisitor(
                        ATTRIBUTE_FILTER_CAPABILITIES, schema, null);
        filter.accept(visitor, null);
        Filter preFilter = visitor.getFilterPre();
        if (preFilter != Filter.EXCLUDE && preFilter != Filter.INCLUDE) {
            FilterToRestrictedWhere sqlConverter = new FilterToRestrictedWhere(schema);
            preFilter.accept(sqlConverter, null);
            return sqlConverter.getRestrictedWhere();
        }
        return null;
    }

