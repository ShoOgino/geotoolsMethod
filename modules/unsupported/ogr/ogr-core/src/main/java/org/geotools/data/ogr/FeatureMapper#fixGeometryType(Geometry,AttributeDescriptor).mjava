    /**
     * Turns line and polygon into multiline and multipolygon. This is a stop-gap measure to make
     * things works against shapefiles, I've asked the GDAL mailing list on how to properly handle
     * this in the meantime
     *
     * @param ogrGeometry
     * @param ad
     * @return
     */
    Geometry fixGeometryType(Geometry ogrGeometry, AttributeDescriptor ad) {
        if (MultiPolygon.class.equals(ad.getType().getBinding())) {
            if (ogrGeometry instanceof MultiPolygon) return ogrGeometry;
            else return geomFactory.createMultiPolygon(new Polygon[] {(Polygon) ogrGeometry});
        } else if (MultiLineString.class.equals(ad.getType().getBinding())) {
            if (ogrGeometry instanceof MultiLineString) return ogrGeometry;
            else
                return geomFactory.createMultiLineString(
                        new LineString[] {(LineString) ogrGeometry});
        }
        return ogrGeometry;
    }

