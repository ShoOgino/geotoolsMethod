    public void close() throws IOException {
        if (reader != null) {
            try {
                original = null;
                live = null;
                Object driver = dataSource.getDriver();
                String driverName = ogr.DriverGetName(driver);

                if ("ESRI Shapefile".equals(driverName) && deletedFeatures) {
                    String layerName = ogr.LayerGetName(layer);
                    dataSource.executeSQL("REPACK " + layerName, null);
                }
                ogr.LayerSyncToDisk(layer);
            } finally {
                reader.close();
            }
        }
    }

