    /**
     * @param features
     * @throws IOException
     */
    public void writeFeatureCollection(SimpleFeatureCollection features) throws IOException {
        // the collection might be empty, but we still need the wrapper JSON
        // for a collection to be generated
        if (!initalised) {
            initialise();
        }
        try (SimpleFeatureIterator itr = features.features()) {
            while (itr.hasNext()) {
                SimpleFeature feature = (SimpleFeature) itr.next();
                write(feature);
            }
        }
    }

