    @Override
    protected ReferencedEnvelope getBoundsInternal(Query query) throws IOException {

        collection = fetchFeatures();
        FeatureCollection<?, ?> sub = collection.subCollection(query.getFilter());
        ReferencedEnvelope bounds = sub.getBounds();
        if (bounds.getCoordinateReferenceSystem() == null) {
            bounds = new ReferencedEnvelope(bounds, DefaultGeographicCRS.WGS84);
        }
        return bounds;
    }

