    private Geometry reprojectGeometry(SimpleFeature currentFeature) {
        Geometry defaultGeometry = (Geometry) currentFeature.getDefaultGeometry();
        CoordinateReferenceSystem inCRS =
                currentFeature
                        .getDefaultGeometryProperty()
                        .getDescriptor()
                        .getCoordinateReferenceSystem();
        if (transform == null || inCRS != lastCRS) {
            lastCRS = inCRS;
            try {
                if (inCRS == null) {
                    transform = IdentityTransform.create(2);
                } else {
                    transform = CRS.findMathTransform(inCRS, outCRS, true);
                }
            } catch (FactoryException e) {
                throw new RuntimeException(e);
            }
        }
        if (!CRS.equalsIgnoreMetadata(inCRS, outCRS)) {
            // reproject
            try {
                defaultGeometry = JTS.transform(defaultGeometry, transform);
            } catch (MismatchedDimensionException | TransformException e) {
                throw new RuntimeException(e);
            }
        }
        return defaultGeometry;
    }

