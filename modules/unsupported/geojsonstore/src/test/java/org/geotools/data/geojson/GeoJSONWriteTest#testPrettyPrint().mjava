    @Test
    public void testPrettyPrint() throws Exception {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        try (GeoJSONWriter writer = new GeoJSONWriter(out)) {
            writer.setPrettyPrinting(true);
            SimpleFeatureType type =
                    DataUtilities.createType("test", "the_geom:Polygon:srid=27700");
            writer.writeFeatureCollection(new EmptyFeatureCollection(type));
        }
        String json = new String(out.toByteArray(), StandardCharsets.UTF_8);
        String expected =
                "{\n" //
                        + "  \"type\" : \"FeatureCollection\",\n" //
                        + "  \"features\" : [ ]\n" //
                        + "}";
        assertEquals(normalizeLineEnds(expected), normalizeLineEnds(json));
    }

