    @Test
    @SuppressWarnings("PMD.UseTryWithResources") // transaction needed in catch
    public void removeAllExample() throws Exception {
        Map<String, Serializable> params = new HashMap<>();
        params.put(GeoJSONDataStoreFactory.URL_PARAM.key, url);
        DataStore store = fac.createDataStore(params);

        Transaction t = new DefaultTransaction("locations");
        try {

            try (FeatureWriter<SimpleFeatureType, SimpleFeature> writer =
                    store.getFeatureWriter("locations", Filter.INCLUDE, t)) {
                while (writer.hasNext()) {
                    writer.next();
                    writer.remove(); // marking contents for removal
                }
            }

            // Test the contents have been removed
            SimpleFeatureStore featureStore =
                    (SimpleFeatureStore) store.getFeatureSource("locations");
            assertEquals("featureStore should be empty", 0, featureStore.getFeatures().size());
            // Make sure the file is empty
            assertEquals("file should have no content", "", checkFileContents(file));
            t.commit();
        } catch (Throwable eek) {
            t.rollback();
        } finally {
            t.close();
            store.dispose();
        }
    }

