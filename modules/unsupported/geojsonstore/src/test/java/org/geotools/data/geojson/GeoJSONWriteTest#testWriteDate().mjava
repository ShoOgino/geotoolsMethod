    @Test
    public void testWriteDate() throws Exception {
        // test feature
        SimpleFeatureType type =
                DataUtilities.createType("test", "the_geom:Point:srid=4326,date:java.util.Date");
        SimpleFeatureBuilder builder = new SimpleFeatureBuilder(type);
        builder.add(new GeometryFactory().createPoint(new Coordinate(1, 2)));
        builder.add(new Date());
        SimpleFeature feature = builder.buildFeature(null);

        String json = writeSingleFeature(feature);
        JsonNode root = new ObjectMapper().readTree(json);
        String isoDatePattern =
                "(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2})\\:(\\d{2})\\:(\\d{2})\\.(\\d{3})Z";
        String date = root.get("properties").get("date").textValue();
        assertTrue(date + " does not match ISO date", date.matches(isoDatePattern));
    }

