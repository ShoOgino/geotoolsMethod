    @Test
    public void testWriteArray() throws Exception {
        // test feature
        SimpleFeatureTypeBuilder tb = new SimpleFeatureTypeBuilder();
        tb.setName("test");
        tb.add("the_geom", Point.class, 4326);
        tb.add("array", Integer[].class);
        SimpleFeatureType type = tb.buildFeatureType();
        SimpleFeatureBuilder builder = new SimpleFeatureBuilder(type);
        builder.add(new GeometryFactory().createPoint(new Coordinate(1, 2)));
        builder.add(new int[] {1, 2, 3});
        SimpleFeature feature = builder.buildFeature(null);

        String json = writeSingleFeature(feature);
        JsonNode root = new ObjectMapper().readTree(json);
        assertTrue(root.get("properties").get("array").isArray());
        ArrayNode array = (ArrayNode) root.get("properties").get("array");
        assertEquals(JsonNodeType.NUMBER, array.get(0).getNodeType());
        assertEquals(1, array.get(0).intValue());
        assertEquals(JsonNodeType.NUMBER, array.get(1).getNodeType());
        assertEquals(2, array.get(1).intValue());
        assertEquals(JsonNodeType.NUMBER, array.get(2).getNodeType());
        assertEquals(3, array.get(2).intValue());
    }

