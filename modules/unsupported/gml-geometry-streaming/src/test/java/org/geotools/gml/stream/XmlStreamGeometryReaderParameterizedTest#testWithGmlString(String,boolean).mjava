    private void testWithGmlString(final String gml, final boolean isGml3_2) throws Exception {
        XMLInputFactory f = XMLInputFactory.newInstance();
        f.setProperty(XMLInputFactory.SUPPORT_DTD, Boolean.FALSE);
        XMLStreamReader r = f.createXMLStreamReader(new StringReader(gml));
        XmlStreamGeometryReader geometryReader = new XmlStreamGeometryReader(r);
        r.nextTag();
        Geometry g = geometryReader.readGeometry();
        assertNotNull(g);
        assertEquals(expectedGeometryClass, g.getClass());
        assertEquals(expectedWKT, g.toString());

        if (compareXSD) {
            Geometry xsdGeometry = parseWithXSD(gml, isGml3_2);
            // Compare via default WKT toString()
            assertEquals(xsdGeometry.toString(), g.toString());
        }
    }

