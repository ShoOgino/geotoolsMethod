    @Test
    public void test()
            throws IOException, XMLStreamException, FactoryException, ParserConfigurationException,
                    SAXException {
        try (InputStream input =
                getClass()
                        .getClassLoader()
                        .getResourceAsStream("org/geotools/gml/stream/" + gmlResource)) {
            XMLInputFactory f = XMLInputFactory.newInstance();
            f.setProperty(XMLInputFactory.SUPPORT_DTD, Boolean.FALSE);
            XMLStreamReader r = f.createXMLStreamReader(input);
            XmlStreamGeometryReader geometryReader = new XmlStreamGeometryReader(r);
            r.nextTag();
            Geometry g = geometryReader.readGeometry();
            assertNotNull(g);
            assertEquals(expectedGeometryClass, g.getClass());
            assertEquals(expectedWKT, g.toString());

            if (compareXSD) {
                Geometry xsdGeometry = parseWithXSD();
                // Compare via default WKT toString()
                assertEquals(xsdGeometry.toString(), g.toString());
            }
        }
    }

