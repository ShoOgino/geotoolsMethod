    /**
     * Configures MemoryDataStore with Collection.
     * <p>
     * You may use this to create a MemoryDataStore from a FeatureCollection.
     * </p>
     * 
     * @param collection Collection of features to add
     * @throws IllegalArgumentException If provided collection is empty
     */
    public void addFeatures(Collection<?> collection) {
        if ((collection == null) || collection.isEmpty()) {
            throw new IllegalArgumentException(
                    "Provided FeatureCollection is empty");
        }

        synchronized (memory) {
            for (Iterator<?> i = collection.iterator(); i.hasNext();) {
                addFeatureInternal((Feature) i.next());
            }
        }
    }

