    private List<Ref> filterByAction(Iterator<Ref> refs, Version.Action action) {
        if (Version.Action.ALL.equals(action)) {
            List<Ref> newRefs = new ArrayList<Ref>();
            while (refs.hasNext()) {
                Ref ref = refs.next();
                newRefs.add(ref);
            }
            return newRefs;
        } else if (Version.Action.NEXT.equals(action)) {
            // iterate through refs and retrieve the previous version
            return Collections.emptyList();
        } else if (Version.Action.PREVIOUS.equals(action)) {
            // iterate through refs and retrieve the next version
            return Collections.emptyList();
        }
        List<Ref> actionRefs = fetchByAction(action);
        return filterIteratorByList(actionRefs, refs);
    }

