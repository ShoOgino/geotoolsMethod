    @Override
    protected ObjectId getRootTreeId() {
        final Transaction transaction = getTransaction();
        if (null == transaction || Transaction.AUTO_COMMIT.equals(transaction)) {
            // no transaction in progress, return the repository's root
            return super.getRootTreeId();
        }
        // transaction in progress, return null to signal querying the index
        // first
        return null;
        // Repository repository = dataStore.getRepository();
        // StagingArea index = repository.getIndex();
        // RevTree staged = index.getStaged();
        // ObjectId stagedRootId = staged.getId();
        // return stagedRootId;
    }

