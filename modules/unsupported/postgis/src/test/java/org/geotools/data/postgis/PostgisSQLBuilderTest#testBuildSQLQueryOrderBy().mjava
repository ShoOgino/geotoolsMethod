    /**
     * Test method for
     * {@link PostgisSQLBuilder#buildSQLQuery(java.lang.String, org.geotools.data.jdbc.fidmapper.FIDMapper, org.opengis.feature.type.AttributeDescriptor[], org.opengis.filter.Filter, org.opengis.filter.sort.SortBy[], java.lang.Integer, java.lang.Integer)}.
     * 
     * @throws SQLEncoderException
     */
    public void testBuildSQLQueryOrderBy() throws SQLEncoderException {
        FIDMapper mapper = new OIDFidMapper();
        SortBy[] sortBy = { CommonFactoryFinder.getFilterFactory(null).sort("attribute",
                SortOrder.DESCENDING) };
        Integer offset = null;
        Integer limit = null;

        String sql = buildSQLQuery(mapper, sortBy, offset, limit);
        final String baseSelect = "SELECT \"oid\", \"attribute\" FROM \"typeName\"";
        assertEquals(baseSelect + " ORDER BY \"attribute\" DESC", sql);

        sortBy = new SortBy[] { SortBy.NATURAL_ORDER };
        sql = buildSQLQuery(mapper, sortBy, offset, limit);
        assertEquals(baseSelect + " ORDER BY oid ASC", sql);

        sortBy = new SortBy[] { SortBy.REVERSE_ORDER };
        sql = buildSQLQuery(mapper, sortBy, offset, limit);
        assertEquals(baseSelect + " ORDER BY oid DESC", sql);
    }

