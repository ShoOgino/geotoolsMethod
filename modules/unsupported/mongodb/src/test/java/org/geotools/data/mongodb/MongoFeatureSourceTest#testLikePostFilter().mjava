    public void testLikePostFilter() throws Exception {
        FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2();
        // wrapping the property name in a function that is not declared as
        // supported in the filter capabilities (i.e. Concatenate) will make the
        // filter a post-filter
        PropertyIsLike f = ff.like(ff.function("Concatenate",
                ff.property("properties.stringProperty"), ff.literal("test")),
                "on%", "%", "_", "\\");

        SimpleFeatureSource source = dataStore.getFeatureSource("ft1");
        Query q = new Query("ft1", f, new String[] { "geometry" });

        // filter should match just one feature
        assertEquals(1, source.getFeatures(q).size());
        assertEquals(new ReferencedEnvelope(1d,1d,1d,1d,DefaultGeographicCRS.WGS84), source.getBounds(q));

        SimpleFeatureCollection features = source.getFeatures(q);
        SimpleFeatureIterator it = features.features();
        try {
            assertTrue(it.hasNext());
            SimpleFeature feature =  it.next();
            assertFeature(feature, 1, false);
            // the stringProperty attribute should not be returned, since it was
            // used in the post-filter, but was not listed among the properties to fetch
            assertNull(feature.getAttribute("properties.stringProperty"));
        }
        finally {
            it.close();
        }
    }

