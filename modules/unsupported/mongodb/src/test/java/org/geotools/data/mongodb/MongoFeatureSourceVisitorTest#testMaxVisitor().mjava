    @Test
    public void testMaxVisitor() throws Exception {
        FilterFactory ff = dataStore.getFilterFactory();
        PropertyName p = ff.property("properties.dateProperty");
        
        MaxVisitor v = new TestMaxVisitor(p);

        dataStore.getFeatureSource("ft1").accepts(Query.ALL, v, null);
        
        Date minDate = Date.from(Instant.from(DateTimeFormatter.ISO_DATE_TIME.parse("2015-01-01T21:30:00Z")));
        assertEquals(minDate, v.getResult().getValue());
        
        assertFalse(visited);
        assertTrue(valueSet);
    }

