    /**
     * Will extract from the mongo db object all the values that correspond to the given json path.
     * If the path contains nested collections the values from all the branches will be merged.
     */
    public static Object getValues(DBObject dbObject, String jsonPath) {
        if (jsonPath == null || jsonPath.isEmpty() || dbObject == null) {
            // nothing to do here
            return Collections.emptyList();
        }
        // let's split the json path in parts which will give us the necessary keys
        String[] jsonPathParts = jsonPath.split("\\.");
        // recursively get the values using an helper function
        List<Object> values = getValuesHelper(dbObject, jsonPathParts, new ArrayList<>(), 0);
        if (values.size() == 1) {
            // we only have a single value, let's extract it
            return values.get(0);
        }
        return values;
    }

