    /**
     * Creates a feature collection containing a single feature with a
     * polygon geometry based on the input envelope.
     *
     * @param env the input envelope
     * @return new feature collection
     */
    private SimpleFeatureCollection singlePolygonFeatureCollection(ReferencedEnvelope env) {
        if (env == null || env.isEmpty()) {
            throw new IllegalArgumentException("env must not be null or empty");
        }

        SimpleFeatureTypeBuilder typeBuilder = new SimpleFeatureTypeBuilder();
        typeBuilder.setName("rectangle");
        typeBuilder.add("shape", Polygon.class, env.getCoordinateReferenceSystem());
        typeBuilder.add("label", String.class);
        final SimpleFeatureType TYPE = typeBuilder.buildFeatureType();

        SimpleFeature feature = SimpleFeatureBuilder.build(
                TYPE, new Object[]{JTS.toGeometry(env), "a rectangle"}, null);

        return new ListFeatureCollection(TYPE, Arrays.asList(feature));
    }

