    private void doGetInfoTest(Layer layer, int maxFeatures) throws Exception {
        MapContent mapContent = new MapContent();
        mapContent.addLayer(layer);

        helper.setMapContent(mapContent);
        helper.setLayer(layer);

        try (SimpleFeatureIterator iter =
                ((SimpleFeatureSource) layer.getFeatureSource()).getFeatures().features()) {
            int n = 0;
            while (iter.hasNext() && n < maxFeatures) {
                SimpleFeature feature = iter.next();
                assertGetInfo(feature);
                n++;
            }

        } finally {
            mapContent.dispose();
        }
    }

