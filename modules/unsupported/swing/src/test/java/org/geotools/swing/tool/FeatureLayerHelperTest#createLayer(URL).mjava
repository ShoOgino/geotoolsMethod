    private Layer createLayer(URL url) throws Exception {
        Map params = new HashMap();
        params.put("url", url);
        DataStore dataStore = DataStoreFinder.getDataStore(params);
        String typeName = dataStore.getTypeNames()[0];
        featureSource = dataStore.getFeatureSource(typeName);

        return new FeatureLayer(featureSource, null);
    }

