    @Test
    public void selectInListAndClickOKButton() throws Exception {
        Future<CoordinateReferenceSystem> future = showDialog();
        
        final int index = rand.nextInt(CODES.size());
        window.list().clickItem(index);
        window.robot.waitForIdle();
        
        getButton("OK").click();
        window.robot.waitForIdle();
        
        CoordinateReferenceSystem crs = retrieveCRS(future);
        assertNotNull(crs);

        // Compare return value to list selection
        CoordinateReferenceSystem expected = FACTORY.createCoordinateReferenceSystem(
                JCRSChooser.DEFAULT_AUTHORITY + ":" + CODES.get(index));

        assertTrue( CRS.equalsIgnoreMetadata(expected, crs) );
    }

