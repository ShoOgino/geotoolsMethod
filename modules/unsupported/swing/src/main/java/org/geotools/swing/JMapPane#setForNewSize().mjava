    private void setForNewSize() {
        currentPaintArea = getVisibleRect();

        // allow a single pixel margin at the right and bottom edges
        currentPaintArea.width -= 1;
        currentPaintArea.height -= 1;

        if (context != null && context.getLayerCount() > 0) {
            if (fullExtent == null) {
                setFullExtent();
            }

            if (pendingDisplayArea != null) {
                doSetDisplayArea(pendingDisplayArea);
                pendingDisplayArea = null;

            } else {
                doSetDisplayArea(fullExtent);
            }

            acceptRepaintRequests = true;
            drawBaseImage(true);

            MapPaneEvent ev = new MapPaneEvent(this, MapPaneEvent.Type.PANE_RESIZED);
            publishEvent(ev);
        }
    }

