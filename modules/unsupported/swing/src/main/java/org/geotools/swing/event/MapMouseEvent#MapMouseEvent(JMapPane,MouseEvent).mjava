    /**
     * Constructor. Calculates the map position of the mouse event.
     * 
     * @param pane
     *            the map pane sending this event
     * @param event
     *            the mouse event
     */
    public MapMouseEvent(JMapPane pane, MouseEvent event) {
        super(pane, event.getID(), event.getWhen(), event.getModifiers(), event
                .getX(), event.getY(), event.getClickCount(), event.isPopupTrigger(), event
                .getButton());

        isWheelEvent = false;
        wheelAmount = 0;

        AffineTransform tr = pane.getScreenToWorldTransform();
        geoCoords = new DirectPosition2D(event.getX(), event.getY());
        tr.transform(geoCoords, geoCoords);
        geoCoords.setCoordinateReferenceSystem(pane.getMapContext().getCoordinateReferenceSystem());
    }

