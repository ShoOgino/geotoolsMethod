        /** Called by the associated TextDialog when it is closing */
        private void setDialogClosed() {
            Lock writeLock = updateLock.writeLock();
            writeLock.lock();
            try {
                dialogRef.clear();
                active.set(false);
                fireEvent(StateChange.DIALOG_CLOSED);

            } finally {
                try {
                    removeAllListeners();
                } finally {
                    writeLock.unlock();
                }
            }
        }

