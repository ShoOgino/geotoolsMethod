        /**
         * Called by the associated TextDialog when it is closing
         */
        private void setDialogClosed() {
            updateLock.writeLock().lock();
            try {
                dialogRef.clear();
                active.set(false);
                fireEvent(StateChange.DIALOG_CLOSED);
                
            } finally {
                removeAllListeners();
                updateLock.writeLock().unlock();
            }
        }

