    /**
     * Creates a new item to display a menu which will be supplired by {@code menuProvider}.
     *
     * @param name the item name
     * @param icon the icon to display
     * @param menuProvider an object to provide a (possibly dynamic) pop-up menu
     * @throws IllegalArgumentException if {@code icon} or {@code menuPRovider} are {@code null}
     */
    public JMenuStatusBarItem(
            String name,
            final ImageIcon icon,
            String toolTip,
            final PopupMenuProvider menuProvider) {

        super(name, false);

        if (icon == null) {
            throw new IllegalArgumentException("icon must not be null");
        }
        if (menuProvider == null) {
            throw new IllegalArgumentException("menuProvider must not be null");
        }

        final JButton btn = new JButton(icon);
        btn.setBorderPainted(false);
        btn.addActionListener(ae -> menuProvider.getMenu().show(btn, 0, 0));

        if (toolTip != null && toolTip.trim().length() > 0) {
            btn.setToolTipText(toolTip);
        }

        add(btn);
    }

