    /**
     * Helper method for {@linkplain #append(String)}.
     *
     * @param text the text to be appended
     * @param indent indent width as number of spaces
     */
    private void doAppend(final String text, final int indent) {
        int startLine = textArea.getLineCount();

        String appendText;
        if (indent > 0) {
            char[] c = new char[indent];
            Arrays.fill(c, ' ');
            String pad = String.valueOf(c);
            appendText = pad + text.replaceAll("\\n", "\n" + pad);
        } else {
            appendText = text;
        }
        
        textArea.append(appendText);
        textArea.setCaretPosition(textArea.getDocument().getLength());

        for (TextReporterListener listener : listeners) {
            listener.onReporterUpdated(startLine);
        }
    }

