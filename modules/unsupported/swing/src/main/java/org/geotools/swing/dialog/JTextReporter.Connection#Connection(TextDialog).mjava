        /**
         * Private constructor.
         *
         * @param dialog the dialog to connect to
         */
        private Connection(TextDialog dialog) {
            dialogRef = new WeakReference<>(dialog);
            listeners = new ArrayList<>();
            updateLock = new ReentrantReadWriteLock();
            active = new AtomicBoolean(true);
        }

