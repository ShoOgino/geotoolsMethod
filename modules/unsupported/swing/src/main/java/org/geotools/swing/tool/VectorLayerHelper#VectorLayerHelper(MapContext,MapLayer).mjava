    /**
     * Create a new helper to work with a {@code MapLayer} that has vector feature data.
     *
     * @param layer the map layer
     *
     * @param geomAttributeName the name of the geometry attribute for {@code Features}
     *
     * @param geomClass the geometry class
     */
    public VectorLayerHelper(MapContext context, MapLayer layer) {
        super(context, layer.getFeatureSource().getSchema().getCoordinateReferenceSystem());

        this.layerRef = new WeakReference<MapLayer>(layer);

        final GeometryDescriptor geomDesc = layer.getFeatureSource().getSchema().getGeometryDescriptor();
        this.attrName = geomDesc.getLocalName();

        final Class<? extends Geometry> geomClass = (Class<? extends Geometry>) geomDesc.getType().getBinding();
        final Geometries type = Geometries.getForBinding(geomClass);
        this.isPolygonGeometry = (type == Geometries.POLYGON || type == Geometries.MULTIPOLYGON);
    }

