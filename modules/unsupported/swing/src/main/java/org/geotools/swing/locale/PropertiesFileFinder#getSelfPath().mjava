    /**
     * Gets the path to this class file. This will be a jar file path
     * if called from outside this module, or a local path if called 
     * from within.
     * 
     * @return path to this class
     */
    private String getSelfPath() {
        try {
            String className = getClass().getSimpleName() + ".class";
            URL url = getClass().getResource(className);
            
            /*
             * DataUtiltiies.urlToFile doesn't deal with the jar protocol
             * so if that's what we've got we remove the "jar:" prefix. 
             * TODO: It would be better to add proper support to the DataUtilities
             * class.
             */
            if (url.getProtocol().equals("jar")) {
                String urlStr = url.toExternalForm();
                url = new URL(urlStr.substring(4));
                
            }
            return DataUtilities.urlToFile(url).getPath();
            
        } catch (MalformedURLException ex) {
            throw new RuntimeException(ex);
        }
    }

