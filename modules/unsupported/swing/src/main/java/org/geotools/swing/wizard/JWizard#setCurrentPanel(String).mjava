    /**
     * Called to display a page.
     *
     * <p>
     *
     * @param id
     */
    public void setCurrentPanel(String id) {
        if (id == null) {
            close(ERROR);
        }
        JPage old = current;
        if (old != null) {
            old.preClosePanel();
        }
        if (!model.containsKey(id)) {
            close(ERROR);
        }
        JPage page = model.get(id);
        if (page == null) {
            close(ERROR);
        }
        current = page;

        JPanel panel = null;
        // see if panel is already created
        for (Component card : cardPanel.getComponents()) {
            if (id.equals(card.getName())) {
                panel = (JPanel) card;
                break;
            }
        }
        if (panel == null) {
            // lazy create panel
            panel = page.getPanel();
            panel.setName(id);
            if (panel == null) {
                close(ERROR); // card panel not provided
            }
            cardPanel.add(panel, id);
        }
        controller.syncButtonsToPage();
        page.preDisplayPanel();

        // Show the panel in the dialog.
        cardLayout.show(cardPanel, id);
        page.postDisplayPanel();
    }

