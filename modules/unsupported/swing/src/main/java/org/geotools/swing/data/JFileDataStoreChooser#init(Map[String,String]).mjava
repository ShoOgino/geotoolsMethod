    /**
     * Helper method for constructors that creates file filters.
     *
     * @param fileAssociations a {@code Map} where keys are extensions (with or wirhout the leading
     *     dot) and values are descriptions.
     */
    private void init(final Map<String, String> fileAssociations) {

        for (final String ext : fileAssociations.keySet()) {
            addChoosableFileFilter(
                    new FileFilter() {

                        @Override
                        public boolean accept(File f) {
                            if (f.isDirectory()) {
                                return true;
                            }

                            for (String ext : fileAssociations.keySet()) {
                                if (f.getPath().endsWith(ext)
                                        || f.getPath().endsWith(ext.toUpperCase())) {
                                    return true;
                                }
                            }

                            return false;
                        }

                        @Override
                        public String getDescription() {
                            return fileAssociations.get(ext);
                        }
                    });
        }
    }

