    /**
     * Update controls when one of the image size fields has been edited
     *
     * @param controlModified constant indicating which field was edited
     */
    private void onImageSizeChange(int controlModified) {
        switch (controlModified) {
            case WIDTH_FIELD:
                imageSize.width = widthField.getValue();
                imageSize.height = (int) Math.round(imageSize.width * heightToWidth);
                heightField.setValue(imageSize.height, false);
                break;

            case HEIGHT_FIELD:
                imageSize.height = heightField.getValue();
                imageSize.width = (int) Math.round(imageSize.height / heightToWidth);
                widthField.setValue(imageSize.width, false);
                break;
        }

        int scaleDenominator = 0;
        if (imageSize.width > 0) {
            scaleDenominator = (int) Math.round(mapBounds.getSpan(XAXIS) / imageSize.width);
        }
        scaleCombo.getEditor().setItem(Integer.valueOf(scaleDenominator));
    }

