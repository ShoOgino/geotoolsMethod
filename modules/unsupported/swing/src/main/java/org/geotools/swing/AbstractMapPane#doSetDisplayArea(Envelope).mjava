    /**
     * Helper method for {@linkplain #setDisplayArea} which is also called by other methods that
     * want to set the display area without provoking repainting of the display
     *
     * @param envelope requested display area
     */
    protected void doSetDisplayArea(Envelope envelope) {
        if (mapContent != null) {
            CoordinateReferenceSystem crs = envelope.getCoordinateReferenceSystem();
            if (crs == null) {
                // assume that it is the current CRS
                crs = mapContent.getCoordinateReferenceSystem();
            }

            ReferencedEnvelope refEnv =
                    new ReferencedEnvelope(
                            envelope.getMinimum(0),
                            envelope.getMaximum(0),
                            envelope.getMinimum(1),
                            envelope.getMaximum(1),
                            crs);

            mapContent.getViewport().setBounds(refEnv);

        } else {
            pendingDisplayArea = new ReferencedEnvelope(envelope);
        }

        // Publish the resulting display area with the event
        publishEvent(
                new MapPaneEvent(this, MapPaneEvent.Type.DISPLAY_AREA_CHANGED, getDisplayArea()));
    }

