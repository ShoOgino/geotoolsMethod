    /**
     * Check if the given map layer contains a grid coverage or a grid coverage reader.
     * <p>
     * Implementation note: we avoid referencing org.geotools.coverage.grid classes
     * directly here so that applications dealing only with other data types are not
     * forced to have JAI in the classpath.
     *
     * @param layer the map layer
     *
     * @return true if this is a grid layer; false otherwise
     */
    public static boolean isGridLayer(MapLayer layer) {

        Collection<PropertyDescriptor> descriptors = layer.getFeatureSource().getSchema().getDescriptors();
        for (PropertyDescriptor desc : descriptors) {
            Class<?> binding = desc.getType().getBinding();

            if (BASE_GRID_CLASS.isAssignableFrom(binding) || BASE_READER_CLASS.isAssignableFrom(binding)) {
                return true;
            }
        }

        return false;
    }

