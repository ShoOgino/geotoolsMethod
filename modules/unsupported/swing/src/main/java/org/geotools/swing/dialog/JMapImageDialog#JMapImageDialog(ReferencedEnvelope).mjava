    /**
     * Creates a new dialog
     *
     * @param mapBounds the bounds (world coordinates) of the map area to
     *        draw into the image
     */
    public JMapImageDialog(ReferencedEnvelope mapBounds) {
        if (mapBounds == null) {
            throw new IllegalArgumentException("The mapBounds argument cannot be null");
        }
        
        setTitle("Output image size");
        setModal(true);
        setResizable(false);

        this.mapBounds = new ReferencedEnvelope(mapBounds);
        CoordinateReferenceSystem crs = mapBounds.getCoordinateReferenceSystem();
        boolean swapAxes = false;
        if (crs != null) {
            CoordinateSystem cs = crs.getCoordinateSystem();
            if (cs != null) {
                AxisDirection dir = cs.getAxis(0).getDirection().absolute();
                if (dir.equals(AxisDirection.NORTH) || dir.equals(AxisDirection.DISPLAY_UP)) {
                    swapAxes = true;
                }
            }
        }

        XAXIS = swapAxes ? 1 : 0;
        YAXIS = swapAxes ? 0 : 1;

        initComponents();
        initValues();
    }

