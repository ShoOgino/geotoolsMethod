    /**
     * Closes the dialog and sets the return code to the integer parameter.
     * 
     * @param code
     *            The return code.
     */
    protected void close(int code) {
        returnCode = code;
        for( Component card : cardPanel.getComponents() ){
            String id = card.getName();
            JPage page = model.get(id);
            if( page != null ){
                try {
                    page.dispose();
                } catch (Throwable t ){
                    System.out.println( id + " close: "+ t );
                }
            }
        }
        dispose();
    }

