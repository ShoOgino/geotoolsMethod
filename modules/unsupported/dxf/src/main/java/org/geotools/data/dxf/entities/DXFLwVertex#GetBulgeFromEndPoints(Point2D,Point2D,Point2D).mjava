    /*
     * Calculates the <see cref="Bulge"/> from the arc segment's
     * center and end points.
     * <param name="center">The arc center.</param>
     * <param name="arcStart">The arc start point.</param>
     * <param name="arcEnd">The arc end point.</param>
     */
    public static double GetBulgeFromEndPoints(Point2D center, Point2D arcStart, Point2D arcEnd) {
        // Take v1 as the x-axis.
        Point2D v1 =
                new Point2D.Double(
                        arcStart.getX() - center.getX(), arcStart.getY() - center.getY());
        Point2D yaxis = new Point2D.Double(-v1.getY(), v1.getX());

        Point2D v2 =
                new Point2D.Double(arcEnd.getX() - center.getX(), arcEnd.getY() - center.getY());
        // Project on v1.
        double x = v1.getX() * v2.getX() + v1.getY() * v2.getY();
        double y = yaxis.getX() * v2.getX() + yaxis.getY() * v2.getY();

        double angle = Math.atan2(y, x);

        return Math.tan(angle / 4d);
    }

