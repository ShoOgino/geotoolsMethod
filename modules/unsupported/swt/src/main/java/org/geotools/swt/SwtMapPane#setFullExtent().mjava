    /**
     * Gets the full extent of map context's layers. The only reason this method is defined is to
     * avoid having try-catch blocks all through other methods.
     */
    private void setFullExtent() {
        if (content != null && content.layers().size() > 0) {
            try {

                fullExtent = content.getMaxBounds();

                /*
                 * Guard agains degenerate envelopes (e.g. empty
                 * map layer or single point feature)
                 */
                if (fullExtent == null) {
                    // set arbitrary bounds centred on 0,0
                    fullExtent = worldEnvelope(); // new ReferencedEnvelope(-1, 1, -1, 1,
                    // context.getCoordinateReferenceSystem());

                }
                // else {
                // double w = fullExtent.getWidth();
                // double h = fullExtent.getHeight();
                // double x = fullExtent.getMinimum(0);
                // double y = fullExtent.getMinimum(1);
                //
                // double xmin = x;
                // double xmax = x + w;
                // if (w <= 0.0) {
                // xmin = x - 1.0;
                // xmax = x + 1.0;
                // }
                //
                // double ymin = y;
                // double ymax = y + h;
                // if (h <= 0.0) {
                // ymin = y - 1.0;
                // ymax = y + 1.0;
                // }
                //
                // fullExtent = new ReferencedEnvelope(xmin, xmax, ymin, ymax,
                // context.getCoordinateReferenceSystem());
                // }

            } catch (Exception ex) {
                throw new IllegalStateException(ex);
            }
        } else {
            fullExtent = null;
        }
    }

