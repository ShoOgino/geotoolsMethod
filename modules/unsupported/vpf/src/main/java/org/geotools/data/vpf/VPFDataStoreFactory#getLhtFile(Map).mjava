    /*
     * private method to get the lht file from the map of params, to avoid
     * code duplication in canProcess and create, since they both need the
     * file - canProcess just returns true if it's there, and eats the 
     * exception, create makes the store.
     */
    private File getLhtFile(Map params) throws IOException {
        URL url = (URL) DIR.lookUp(params);
        File file = null;
        if (url.getProtocol().equals("file")){
     
            if(url.getHost()!=null && !url.getHost().equals("")) {
                //win
                file = new File(url.getHost()+":"+url.getFile());
            }else {
                //linux
                file = new File(url.getFile());
            }
            File lhtFile;
            if (file.isDirectory()) {
                lhtFile = new File(file, FileConstants.LIBRARY_HEADER_TABLE);
            } else {
                lhtFile = file;
		if (!lhtFile.getName().equalsIgnoreCase(FileConstants.LIBRARY_HEADER_TABLE)) {
		    throw new IOException("File: " + file + "is not a lht file");
		}
            }

        } else {
            throw new IOException("only file protocol supported");
        }
        return file;
    }

