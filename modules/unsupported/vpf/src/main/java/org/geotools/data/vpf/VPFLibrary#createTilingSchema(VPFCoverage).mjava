    /**
     * Generates the tile map for this coverage
     *
     * @param coverage a <code>VPFCoverage</code> which happens to be a TILEREF coverage
     */
    private void createTilingSchema(VPFCoverage coverage) throws IOException {
        //            File tilefile = new File(directory, "tilereft.tft");

        VPFFeatureType tileType = (VPFFeatureType) coverage.getFeatureTypes().get(0);

        // VPFFile tileFile = (VPFFile) tileType.getFeatureClass().getFileList().get(0);
        // Iterator rowsIter = tileFile.readAllRows().iterator();
        List<SimpleFeature> allFeatures = tileType.readAllRows();
        Iterator rowsIter = allFeatures.iterator();

        while (rowsIter.hasNext()) {
            SimpleFeature row = (SimpleFeature) rowsIter.next();
            Short rowId = new Short(Short.parseShort(row.getAttribute("id").toString()));
            String value = row.getAttribute(FIELD_TILE_NAME).toString();

            // Mangle tile directory from DOS style directory splits to a system
            // specific form
            String[] tmp = value.split("\\\\");
            value = tmp[0];
            for (int i = 1, ii = tmp.length; i < ii; i++) {
                value = value.concat(File.separator).concat(tmp[i]);
            }
            tileMap.put(rowId, value);
        }
    }
    //            HashMap hm = new HashMap();
    //
    //            TableInputStream testInput = new TableInputStream(
    //                                                 tilefile.getAbsolutePath());
    //            TableRow row = (TableRow) testInput.readRow();
    //            String tmp = null;
    //            StringBuffer buff = null;
    //
    //            while (row != null) {
    //                tmp = row.get().toString().trim();
    //
    //                if ((tmp != null) && (tmp.length() > 0)) {
    //                    tmp = tmp.toLowerCase();
    //                    buff = new StringBuffer();
    //                    buff.append(tmp.charAt(0));
    //
    //                    for (int i = 1; i < tmp.length(); i++) {
    //                        buff.append(File.separator);
    //                        buff.append(tmp.charAt(i));
    //                    }
    //
    //                    hm.put(row.get(FIELD_TILE_ID).toString().trim(),
    //                           buff.toString());
    //
    //
    //                    //System.out.println( new File( coverage, tmp.charAt(0) + File.separator +
    // tmp.charAt(1) ).getAbsolutePath() );
    //                    row = (TableRow) testInput.readRow();
    //                }
    //            }
    //
    //            testInput.close();
    //            base.setTileMap(hm);
    //        }

