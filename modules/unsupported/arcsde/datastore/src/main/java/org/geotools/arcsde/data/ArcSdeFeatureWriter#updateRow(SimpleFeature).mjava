    /**
     * Updates the contents of a Feature in the database.
     *
     * <p>The db row to modify is obtained from the feature id.
     *
     * @param modifiedFeature the newly create Feature to insert.
     * @throws SeException if thrown by any sde stream method
     */
    private void updateRow(final SimpleFeature modifiedFeature) throws IOException {

        final SeLayer layer = getLayer();
        final SeCoordinateReference seCoordRef = layer == null ? null : layer.getCoordRef();

        final SeUpdate updateStream = (SeUpdate) createStream(SeUpdate.class);
        // updateStream.setWriteMode(true);

        final LinkedHashMap<Integer, String> mutableColumns = getUpdatableColumnNames();
        final String[] rowColumnNames =
                new ArrayList<>(mutableColumns.values()).toArray(new String[0]);
        final String typeName = featureType.getTypeName();
        final String fid = modifiedFeature.getID();
        final long numericFid = ArcSDEAdapter.getNumericFid(fid);
        final SeObjectId seObjectId = new SeObjectId(numericFid);

        final Command<Void> updateCmd =
                new Command<Void>() {
                    @Override
                    public Void execute(ISession session, SeConnection connection)
                            throws SeException, IOException {
                        try {
                            final SeRow row =
                                    updateStream.singleRow(seObjectId, typeName, rowColumnNames);

                            setRowProperties(modifiedFeature, seCoordRef, mutableColumns, row);
                            updateStream.execute();
                            // updateStream.flushBufferedWrites();
                        } finally {
                            updateStream.close();
                        }
                        return null;
                    }
                };

        try {
            session.issue(updateCmd);
            versionHandler.editOperationWritten(updateStream);
        } catch (NoSuchElementException e) {
            versionHandler.editOperationFailed(updateStream);
            throw e;
        } catch (IOException e) {
            versionHandler.editOperationFailed(updateStream);
            throw e;
        }
    }

