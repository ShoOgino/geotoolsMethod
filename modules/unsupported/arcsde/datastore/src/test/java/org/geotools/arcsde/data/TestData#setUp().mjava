    /**
     * Must be called from inside the test's setUp() method. Loads the test fixture from <code>
     * testparams.properties</code>, besides that, does not creates any connection nor any other
     * costly resource.
     *
     * @throws IOException if the test fixture can't be loaded
     * @throws IllegalArgumentException if some required parameter is not found on the test fixture
     */
    public void setUp() throws IOException {
        if (ArcSDEDataStoreFactory.getSdeClientVersion()
                == ArcSDEDataStoreFactory.JSDE_VERSION_DUMMY) {
            throw new RuntimeException(
                    "Don't run the test-suite with the dummy jar.  "
                            + "Make sure the real ArcSDE jars are on your classpath.");
        }

        Properties conProps = new Properties();

        String propsFile = "testparams.properties";
        InputStream in = org.geotools.test.TestData.openStream(null, propsFile);

        // The line above should never returns null. It should thow a
        // FileNotFoundException instead if the resource is not available.

        conProps.load(in);
        in.close();

        this.temp_table = conProps.getProperty("temp_table");
        this.configKeyword = conProps.getProperty("configKeyword");
        if (this.configKeyword == null) {
            this.configKeyword = "DEFAULTS";
        }

        if (this.temp_table == null) {
            throw new IllegalArgumentException("temp_table not defined in " + propsFile);
        }
        this.conProps = new HashMap<>();
        for (Map.Entry<Object, Object> e : conProps.entrySet()) {
            this.conProps.put(String.valueOf(e.getKey()), (Serializable) e.getValue());
        }
    }

