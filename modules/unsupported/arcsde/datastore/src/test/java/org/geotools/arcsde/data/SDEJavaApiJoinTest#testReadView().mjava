    @Test
    public void testReadView() throws Exception {
        SelectBody select =
                ViewRegisteringFactoryHelper.parseSqlQuery(
                        InProcessViewSupportTestData.masterChildSql);
        store.registerView(InProcessViewSupportTestData.typeName, (PlainSelect) select);

        SimpleFeatureSource fs = store.getFeatureSource(InProcessViewSupportTestData.typeName);

        Query query =
                new Query(
                        InProcessViewSupportTestData.typeName,
                        Filter.INCLUDE,
                        Query.ALL_PROPERTIES);
        SimpleFeatureCollection fc = fs.getFeatures(query);
        int fcCount = fc.size();
        int itCount = 0;
        final int expectedCount = 7;
        try (SimpleFeatureIterator it = fc.features()) {
            while (it.hasNext()) {
                SimpleFeature f = (SimpleFeature) it.next();
                assertNotNull(f);
                itCount++;
            }
        }
        assertEquals(expectedCount, fcCount);
        assertEquals(expectedCount, itCount);
    }

