    @Test
    public void testFeatureWriter_RowID_USER_Transaction()
            throws IOException, UnavailableConnectionException {
        final String tableName = seRowidUserTable;
        final Transaction transaction = new DefaultTransaction();
        try {
            FeatureWriter<SimpleFeatureType, SimpleFeature> writer;

            writer = addFeatures(tableName, transaction);
            if (databaseIsMsSqlServer) {
                /*
                 * SQL Server always is at READ UNCOMMITTED isolation level iff the table is not versioned. And this one can't be versioned cause it
                 * has no sde maintained row id < http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=32190 >
                 */
                assertEquals(2, ds.getFeatureSource(tableName).getCount(Query.ALL));
            } else {
                assertEquals(0, ds.getFeatureSource(tableName).getCount(Query.ALL));
            }
            transaction.commit();
            writer.close();
            assertEquals(2, ds.getFeatureSource(tableName).getCount(Query.ALL));
        } finally {
            transaction.close();
        }
    }

