        public RasterAsPointFeatureIterator(final RasterAsPointFeatureCollection fc) {

            // checks
            Utilities.ensureNonNull("fc", fc);

            // get elements
            this.fc = fc;
            this.fb = new SimpleFeatureBuilder(fc.getSchema());
            this.size = fc.size;

            // create an iterator that only goes forward, it is the fastest one
            iterator = RectIterFactory.create(fc.gc2d.getRenderedImage(), null);

            //
            // start the iterator
            //
            iterator.startLines();
            if (iterator.finishedLines()) {
                throw new NoSuchElementException("Index beyond size:" + index + ">" + size);
            }
            iterator.startPixels();
            if (iterator.finishedPixels()) {
                throw new NoSuchElementException("Index beyond size:" + index + ">" + size);
            }

            // appo
            temp = new double[fc.numBands];

            // grid convergence angle manager
            if (fc.gridConvergenceAngleCorrectionNeeded) {
                sourceCRSPosition = new DirectPosition2D();
                targetCRSPosition = new DirectPosition2D(fc.targetCRS);
            }
        }

