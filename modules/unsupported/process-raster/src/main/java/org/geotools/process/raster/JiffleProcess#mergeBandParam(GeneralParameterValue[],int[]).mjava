    private GeneralParameterValue[] mergeBandParam(GeneralParameterValue[] params, int[] bands) {
        // is it already there for some reason?
        if (params != null) {
            for (GeneralParameterValue param : params) {
                if (param.getDescriptor().getName().equals(AbstractGridFormat.BANDS.getName())) {
                    ((ParameterValue) param).setValue(bands);
                    return params;
                }
            }
        }

        // not found, need to add
        List<GeneralParameterValue> list =
                new ArrayList<>(params == null ? Collections.emptyList() : Arrays.asList(params));
        ParameterValue<int[]> value = AbstractGridFormat.BANDS.createValue();
        value.setValue(bands);
        list.add(value);
        return list.toArray(new GeneralParameterValue[list.size()]);
    }

