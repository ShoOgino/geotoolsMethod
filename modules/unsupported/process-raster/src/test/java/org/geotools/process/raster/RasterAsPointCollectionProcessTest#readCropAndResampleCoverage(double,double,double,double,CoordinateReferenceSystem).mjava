    private GridCoverage2D readCropAndResampleCoverage(
            double x1, double x2, double y1, double y2, CoordinateReferenceSystem outCRS)
            throws IOException {
        // Read the global coverage in LonLat coordinates
        GeoTiffReader reader = new GeoTiffReader(TestData.file(this, "current.tif"));
        GridCoverage2D coverage = reader.read(null);
        reader.dispose();
        // Crop the global coverage to the specified envelope
        CoordinateReferenceSystem inCRS = coverage.getCoordinateReferenceSystem();
        ParameterValueGroup param = processor.getOperation("CoverageCrop").getParameters();
        param.parameter("Source").setValue(coverage);
        param.parameter("Envelope").setValue(new ReferencedEnvelope(x1, x2, y1, y2, inCRS));
        // Resample the coverage to to the specified coordinate system
        coverage = (GridCoverage2D) processor.doOperation(param);
        param = processor.getOperation("Resample").getParameters();
        param.parameter("Source").setValue(coverage);
        param.parameter("CoordinateReferenceSystem").setValue(outCRS);
        return (GridCoverage2D) processor.doOperation(param);
    }

