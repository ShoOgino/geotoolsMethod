    @Test
    public void testAddCustomProcess() {
        assertNull(Processors.createProcess(new NameImpl("ras", "Custom")));

        FactoryIteratorProvider p =
                new FactoryIteratorProvider() {
                    @Override
                    public <T> Iterator<T> iterator(Class<T> category) {
                        if (category == RasterProcess.class) {
                            @SuppressWarnings("unchecked")
                            T customProcess = (T) new CustomProcess();
                            return Arrays.asList(customProcess).iterator();
                        }
                        return null;
                    }
                };
        GeoTools.addFactoryIteratorProvider(p);
        try {
            Processors.reset();
            assertNotNull(Processors.createProcess(new NameImpl("ras", "Custom")));
        } finally {
            GeoTools.removeFactoryIteratorProvider(p);
        }
    }

