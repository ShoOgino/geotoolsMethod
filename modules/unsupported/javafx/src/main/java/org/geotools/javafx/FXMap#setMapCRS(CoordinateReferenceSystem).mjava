    /**
     * Set the used coordinate reference system
     * @param crs The new crs
     */
    public void setMapCRS(CoordinateReferenceSystem crs){
        this.mapContent.getViewport().setCoordinateReferenceSystem(crs);
        try{
            this.maxBBox = new GeneralEnvelope(
                new ReferencedEnvelope(maxBBox).transform(crs, true));
            this.layerBBox = new GeneralEnvelope(
                new ReferencedEnvelope(layerBBox).transform(crs, true));
        } catch (Exception tEx) {
            log.log(Level.SEVERE, tEx.getMessage());
        }
        this.crs = crs;
        repaint();
    }

