    /**
    	 * This methods built up a RenderedOp for subsampling an image in order to
    	 * create various previes. I wanted to use the filtered subsample but It was
    	 * giving me problems in the native libraries therefore I am doing a two
    	 * steps downsampling:
    	 * 
    	 * Step 1: low pass filtering.
    	 * 
    	 * Step 2: Subsampling.
    	 * 
    	 * @param src
    	 *            Image to subsample.
    	 * @param scaleTC 
    	 * @param scale
    	 *            Scale factor.
    	 * @param interpolation
    	 *            Interpolation method used.
    	 * @param tileHints
    	 *            Hints provided.
    	 * 
    	 * @return The subsampled RenderedOp.
    	 */
    	static RenderedOp subsample(RenderedOp src, TileCache scaleTC, final Interpolation interpolation, int downsampleStep,BorderExtender borderExtender) {
    		final RenderingHints newHints = new RenderingHints(JAI.KEY_TILE_CACHE,scaleTC);
    		newHints.add(ImageUtilities.DONT_REPLACE_INDEX_COLOR_MODEL);
    		newHints.add(new RenderingHints(JAI.KEY_BORDER_EXTENDER, borderExtender));
    		ImageWorker w = new ImageWorker(src).setRenderingHints(newHints);
    		w.scale(Float.valueOf(1.0f/downsampleStep),
    		        Float.valueOf(1.0f/downsampleStep),
    		        Float.valueOf(0.0f),
    		        Float.valueOf(0.0f),
    		        interpolation);
    		return w.getRenderedOperation();
    	}

