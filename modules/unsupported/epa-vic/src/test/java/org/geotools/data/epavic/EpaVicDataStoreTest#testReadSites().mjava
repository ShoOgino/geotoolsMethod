  @Test
  public void testReadSites() throws Exception {

    this.clientMock = PowerMockito.mock(HttpClient.class);
    PowerMockito.whenNew(HttpClient.class).withNoArguments()
        .thenReturn(clientMock).thenReturn(clientMock);
    this.getMock = PowerMockito.mock(GetMethod.class);
    PowerMockito.whenNew(GetMethod.class).withNoArguments().thenReturn(getMock)
        .thenReturn(getMock);
    when(clientMock.executeMethod(getMock)).thenReturn(HttpStatus.SC_OK)
        .thenReturn(HttpStatus.SC_OK).thenReturn(HttpStatus.SC_OK);
    when(getMock.getResponseBodyAsStream()).thenReturn(
        EpaVicDataStoreFactoryTest.readJSONAsStream("test-data/sites.json"));

    this.dataStore = (EpaVicDatastore) EpaVicDataStoreFactoryTest
        .createDefaultOpenDataTestDataStore();
    this.dataStore.createTypeNames();

    Sites sites = this.dataStore.retrieveSitesJSON();

    assertEquals(2, sites.getSites().size());
  }

