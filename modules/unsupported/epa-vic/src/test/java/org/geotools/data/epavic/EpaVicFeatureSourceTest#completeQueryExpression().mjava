  @Test
  public void completeQueryExpression() throws CQLException, IOException {

    Map<String, Object> params = fSource.composeRequestParameters(ECQL.toFilter(
        "BBOX(SHAPE, 144.79309207663,-37.790887782994,144.82828265916,-37.766134928431) "
            + "AND MonitorId='PM10' AND TimeBasisId='24HR_RAV' "
            + "AND fromDate='2015-12-01T00:10:59' AND toDate='2016-12-29T12:59:00'"));
    Envelope env = (Envelope) params.get(EpaVicFeatureSource.BBOXPARAM);
    assertEquals(EpaVicFeatureSource.FILTERREQUIREDPARAMS + 1, params.size());
    assertEquals(144.79309207663,
        env.getLowerCorner().getDirectPosition().getOrdinate(0), 0.01);
    assertEquals(-37.790887782994,
        env.getLowerCorner().getDirectPosition().getOrdinate(1), 0.01);
    assertEquals(144.82828265916,
        env.getUpperCorner().getDirectPosition().getOrdinate(0), 0.01);
    assertEquals(-37.7661349284311,
        env.getUpperCorner().getDirectPosition().getOrdinate(1), 0.01);
    assertEquals("PM10", params.get(EpaVicFeatureSource.MONITORID));
    assertEquals("24HR_RAV", params.get(EpaVicFeatureSource.TIMEBASISID));
    assertEquals("2015120100", params.get(EpaVicFeatureSource.FROMDATE));
    assertEquals("2016122912", params.get(EpaVicFeatureSource.TODATE));
  }

