    @SuppressWarnings("PMD.ReplaceHashtableWithMap")
    BufferedImage initImage(Tile tile) {
        BufferedImage from = tile.image;
        // copy over properties of this tile
        Hashtable<String, Object> props = null;
        if (from.getPropertyNames() != null) {
            props = new Hashtable<>();
            for (String name : from.getPropertyNames()) {
                props.put(name, from.getProperty(name));
            }
        }

        SampleModel sm =
                from.getSampleModel()
                        .createCompatibleSampleModel((int) size.getWidth(), (int) size.getHeight());
        WritableRaster raster = Raster.createWritableRaster(sm, null);

        ColorModel colorModel = from.getColorModel();

        return new BufferedImage(colorModel, raster, from.isAlphaPremultiplied(), props);
    }

