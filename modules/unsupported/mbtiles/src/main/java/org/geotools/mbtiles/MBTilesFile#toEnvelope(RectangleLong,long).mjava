    /**
     * Converts the tile locations into a real world one
     *
     * @param rect The tile rectangle, in tile space
     * @param zoom The zoom level
     */
    protected ReferencedEnvelope toEnvelope(RectangleLong rect, long zoom) {
        final long numberOfTiles = tilesForZoom(zoom);
        final double spanX = WORLD_ENVELOPE.getSpan(0) / numberOfTiles;
        final double spanY = WORLD_ENVELOPE.getSpan(1) / numberOfTiles;
        final double minX = rect.getMinX() * spanX + WORLD_ENVELOPE.getMinX();
        final double maxX = rect.getMaxX() * spanX + WORLD_ENVELOPE.getMinX();
        final double minY = rect.getMinX() * spanY + WORLD_ENVELOPE.getMinY();
        final double maxY = rect.getMaxX() * spanY + WORLD_ENVELOPE.getMinY();
        return new ReferencedEnvelope(minX, maxX, minY, maxY, SPHERICAL_MERCATOR);
    }

