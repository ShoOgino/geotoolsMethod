    /**
     * Same as the GeoPackage data store, if you modify this, probably want to check if
     * modifications make sense there too
     *
     * @param params
     */
    protected DataSource createDataSource(Map<String, Serializable> params, boolean readOnly)
            throws IOException {
        SQLiteConfig config = new SQLiteConfig();
        config.setSharedCache(true);
        config.enableLoadExtension(true);
        if (readOnly) {
            config.setReadOnly(true);
            config.setPragma(SQLiteConfig.Pragma.SYNCHRONOUS, "OFF");
        }

        // use native "pool", which is actually not pooling anything (that's fast and
        // has less scalability overhead than DBCP)
        SQLiteConnectionPoolDataSource ds = new SQLiteConnectionPoolDataSource(config);
        ds.setUrl(getJDBCUrl(params));

        return ds;
    }

