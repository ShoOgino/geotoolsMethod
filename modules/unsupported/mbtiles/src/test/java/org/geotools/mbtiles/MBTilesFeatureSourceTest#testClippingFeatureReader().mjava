    @Test
    public void testClippingFeatureReader() throws IOException {
        File file =
                URLs.urlToFile(
                        MBTilesFileVectorTileTest.class.getResource("manypoints_test.mbtiles"));
        Query query = new Query("manypoints_tests", Filter.INCLUDE);
        query.setMaxFeatures(Query.DEFAULT_MAX);
        query.setHints(new Hints(Hints.REMOVE_BUFFER_PIXEL, true));
        MBTilesDataStore store = new MBTilesDataStore(new MBTilesFile(file));
        MBTilesFeatureSource source =
                (MBTilesFeatureSource) store.getFeatureSource("manypoints_test");
        ContentFeatureCollection fcClipped = source.getFeatures(query);
        FeatureIterator itClipped = fcClipped.features();
        int clippedCount = 0;
        while (itClipped.hasNext()) {
            clippedCount++;
            itClipped.next();
        }
        ContentFeatureCollection fcAll = source.getFeatures();
        FeatureIterator itAll = fcAll.features();
        int allCount = 0;
        while (itAll.hasNext()) {
            allCount++;
            itAll.next();
        }
        assertTrue(allCount > clippedCount);
    }

