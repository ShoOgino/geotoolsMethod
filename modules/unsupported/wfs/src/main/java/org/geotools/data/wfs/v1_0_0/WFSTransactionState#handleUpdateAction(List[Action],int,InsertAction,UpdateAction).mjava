    private int handleUpdateAction(List<Action> actions, int i, InsertAction action,
            UpdateAction updateAction) {
        // if update action applies to feature then update feature
        if (updateAction.getFilter().evaluate(action.getFeature())) {
            updateAction.update(action.getFeature());
            // if filter is a fid filter and there is only 1 fid then filter
            // uniquely identifies
            // only the
            // one features so remove it.
            if (updateAction.getFilter() instanceof FidFilter
                    && ((FidFilter) updateAction.getFilter()).getFids().length == 1) {
                actions.remove(i + 1);
                return i;
            }
        }
        swap(actions, i);
        return i + 1;
    }

