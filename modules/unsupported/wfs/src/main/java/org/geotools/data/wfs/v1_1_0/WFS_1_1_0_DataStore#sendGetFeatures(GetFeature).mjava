    /**
     * Sends the GetFeature request using the appropriate HTTP method depending on the
     * {@link #isPreferPostOverGet()} preference and what the server supports.
     * 
     * @param request
     *            the request to send
     * @param map
     * @return the server response handle
     * @throws IOException
     *             if a communication error occurs. If a server returns an exception report that's a
     *             normal response, no exception will be thrown here.
     */
    private WFSResponse sendGetFeatures(GetFeature request) throws IOException {
        final WFSResponse response;
        if (useHttpPostFor(GET_FEATURE)) {
            response = wfs.issueGetFeaturePOST(request);
        } else {
            response = wfs.issueGetFeatureGET(request);
        }
        return response;
    }

