    /**
     * A less expensive way of counting the features if numberOfFeatures attribute is not
     * set in the FeatureCollection element without having to calculate the FC bounds
     * {@link #getBounds()} if it's not really necessary.
     *
     * @throws IOException
     */
    private void doForceFeatureCount() throws IOException {
        FeatureReader<SimpleFeatureType, SimpleFeature> reader;
        reader = dataStore.getFeatureReader(query, Transaction.AUTO_COMMIT);
        try {
            // collect size to alleviate #getCount if needed
            int collectionSize = 0;
            while (reader.hasNext()) {
                reader.next();
                collectionSize++;
            }
            this.cachedSize = collectionSize;
        } finally {
            reader.close();
        }
    }

