    /**
     * Alters the versioned state of a feature type
     * 
     * @param typeName
     *            the type name that must be changed
     * @param versioned
     *            if true, the type gets version enabled, if false versioning is disabled
     * @param t
     *            the transaction used to performe version enabling. It shall contain user and
     *            commit message as properties.
     * @throws IOException
     */
    public synchronized void setVersioned(String typeName, boolean versioned, String author,
            String message) throws IOException {
        if (typeName == null)
            throw new NullPointerException("TypeName cannot be null");
        if (typeName.equals(TBL_CHANGESETS) && versioned)
            throw new IOException(TBL_CHANGESETS
                    + " is exposed as a log facility, and cannot be versioned");

        // no change, no action
        if (isVersioned(typeName) == versioned)
            return;

        if (versioned) { // turn on versioning
            enableVersioning(typeName, author, message);
        } else { // turn off versioning
            disableVersioning(typeName, author, message);
        }
        versionedMap.put(typeName, Boolean.valueOf(versioned));
    }

