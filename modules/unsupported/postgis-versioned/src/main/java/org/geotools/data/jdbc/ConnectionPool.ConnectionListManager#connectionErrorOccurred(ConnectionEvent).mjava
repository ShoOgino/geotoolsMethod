        /**
         * Called when an error occurs on the Connection. This removes the connection from the
         * pool.
         *
         * @param event The ConnectionEvent indicating an error.
         *
         * @see javax.sql.ConnectionEventListener#connectionErrorOccurred(javax.sql.ConnectionEvent)
         */
        public void connectionErrorOccurred(ConnectionEvent event) {
            PooledConnection conn = (PooledConnection) event.getSource();
            synchronized (mutex) {
                ManagedPooledConnection mConn = getInUseManagedPooledConnection(conn);
    
                conn.removeConnectionEventListener(this);
    
                try {
                    conn.close();
                } catch (SQLException e) {
                    // don't need to do anything here, just log it
                    LOGGER.log(Level.WARNING, "Error closing a connection", e);
                }

                usedConnections.remove(mConn);
            }
        }

