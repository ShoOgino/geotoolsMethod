    /**
     * Create history, rollback it, diff used to report changes anyways
     * @throws IOException 
     * @throws IllegalAttributeException 
     */
    public void testRollbackDiff() throws IOException, IllegalAttributeException {
        VersionedPostgisDataStore ds = getDataStore();
        buildRiverHistory();

        // try to rollback to revision 1, that is, rollback everything
        Transaction t = createTransaction("Mambo", "Restarting the world");
        VersionedPostgisFeatureStore fs = (VersionedPostgisFeatureStore) ds
                .getFeatureSource("river");
        fs.setTransaction(t);
        fs.rollback("1", Filter.INCLUDE, null);
        t.commit();

        // now extract a diff between current revision and the last one
        FeatureDiffReader reader = fs.getDifferences("1",null, null, null);
        assertFalse(reader.hasNext());
        reader.close();
        t.close();
    }

