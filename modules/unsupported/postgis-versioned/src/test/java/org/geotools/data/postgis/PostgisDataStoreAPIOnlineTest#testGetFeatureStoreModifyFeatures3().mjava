    /**
     * Test with a filter that won't be matched after the modification is done, was throwing an NPE
     * before the fix
     * 
     * @throws IOException
     */
    public void testGetFeatureStoreModifyFeatures3() throws IOException {
        SimpleFeatureStore road = (SimpleFeatureStore) data.getFeatureSource("road");

        PropertyIsEqualTo filter = ff.equals(ff.property("name"), ff.literal("r1"));

        AttributeDescriptor name = roadType.getDescriptor("name");
        road.modifyFeatures(new AttributeDescriptor[] { name, }, new Object[] { "changed", }, filter);
    }

