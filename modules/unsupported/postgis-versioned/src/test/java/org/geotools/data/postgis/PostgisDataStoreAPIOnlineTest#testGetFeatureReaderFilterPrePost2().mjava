    public void testGetFeatureReaderFilterPrePost2() throws IOException, IllegalFilterException {
        // GEOT-1069, make sure the post filter is run even if the geom property is not requested
        Transaction t = new DefaultTransaction();
         FeatureReader<SimpleFeatureType, SimpleFeature> reader;

        FilterFactory factory = FilterFactoryFinder.createFilterFactory();
        FilterFunction_geometryType geomTypeExpr = new FilterFunction_geometryType();
        geomTypeExpr.setArgs(new Expression[] { factory.createAttributeExpression("geom") });

        CompareFilter filter = factory.createCompareFilter(FilterType.COMPARE_EQUALS);
        filter.addLeftValue(geomTypeExpr);
        filter.addRightValue(factory.createLiteralExpression("Polygon"));

        reader = data.getFeatureReader(new Query("road", filter), t);
        // if the above statement didn't throw an exception, we're content
        assertNotNull(reader);
        reader.close();
        t.close();
    }

