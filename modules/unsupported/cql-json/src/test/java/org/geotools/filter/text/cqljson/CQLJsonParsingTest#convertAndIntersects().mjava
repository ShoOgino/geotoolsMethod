    @Test
    public void convertAndIntersects() throws JsonProcessingException, CQLException {
        String beam =
                "{"
                        + "             \"and\": ["
                        + "                {\"eq\": {\"property\": \"beamMode\", \"value\": \"ScanSAR Narrow\"}},"
                        + "                {\"eq\":{\"property\": \"swathDirection\", \"value\": \"ascending\"}},"
                        + "                {\"eq\": {\"property\": \"polarization\", \"value\": \"HH+VV+HV+VH\"}},"
                        + "                {\"intersects\": {\"property\": \"footprint\","
                        + "                                \"value\": {\"type\": \"Polygon\","
                        + "                                        \"coordinates\": [["
                        + "                                           [-77.117938,38.936860],"
                        + "                                           [-77.040604,39.995648],"
                        + "                                           [-76.910536,38.892912],"
                        + "                                           [-77.039359,38.791753],"
                        + "                                           [-77.047906,38.841462],"
                        + "                                           [-77.034183,38.840655],"
                        + "                                           [-77.033142,38.857490]"
                        + "                                        ]]}}}"
                        + "             ]"
                        + "          }";

        CQLJsonCompiler cqlJsonCompiler = new CQLJsonCompiler(beam, new FilterFactoryImpl());
        cqlJsonCompiler.compileFilter();
        Filter filter = cqlJsonCompiler.getFilter();
        Assert.assertEquals(
                true,
                ECQL.toCQL(filter)
                        .startsWith(
                                "beamMode = 'ScanSAR Narrow' AND swathDirection = 'ascending' " +
                                        "AND polarization = 'HH+VV+HV+VH' AND INTERSECTS(footprint, " +
                                        "'org.geotools.geometry.jts.spatialschema.geometry.primitive.SurfaceImpl"));
    }

