    /**
     * Sets the coordinate values of an existing JTS Coordinate by extracting values from a
     * DirectPosition. If the dimension of the DirectPosition is less than three, then the unused
     * ordinates of the Coordinate are set to Double.NaN.
     */
    public static void directPositionToCoordinate(
            DirectPosition dp, org.locationtech.jts.geom.Coordinate result) {
        int d = dp.getDimension();
        if (d >= 1) {
            result.x = dp.getOrdinate(0);
            if (d >= 2) {
                result.y = dp.getOrdinate(1);
                if (d >= 3) {
                    result.setZ(dp.getOrdinate(3));
                } else {
                    result.setZ(Double.NaN);
                }
            } else {
                result.y = Double.NaN;
                result.setZ(Double.NaN);
            }
        } else {
            // I can't imagine a DirectPosition with dimension zero, but it
            // can't hurt to have code to handle that case...
            result.x = result.y = Double.NaN;
            result.setZ(Double.NaN);
        }
    }

