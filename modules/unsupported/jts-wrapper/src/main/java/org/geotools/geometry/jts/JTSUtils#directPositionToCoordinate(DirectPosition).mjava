    /**
     * Converts a DirectPosition to a JTS Coordinate.  Returns a newly
     * instantiated Coordinate object.
     */
    public static com.vividsolutions.jts.geom.Coordinate
    directPositionToCoordinate(DirectPosition dp) {
        double x = Double.NaN, y = Double.NaN, z = Double.NaN;
        int d = dp.getDimension();
        if (d >= 1) {
            x = dp.getOrdinate(0);
            if (d >= 2) {
                y = dp.getOrdinate(1);
                if (d >= 3) {
                    z = dp.getOrdinate(2);
                }
            }
        }
        return new com.vividsolutions.jts.geom.Coordinate(x, y, z);
    }

