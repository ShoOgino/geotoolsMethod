    /**
     * Helper method that builds sort by expression for all the identifier attributes of the
     * provided feature type.
     *
     * @param featureTypeMapping the feature type from where to extract the identifier attributes
     * @return an arrays contain ascending sort by expression on the featrue type identifier
     *     attributes
     */
    private SortBy[] sortByFeatureTypeIds(FeatureTypeMapping featureTypeMapping) {
        ArrayList<SortBy> sortByExpressions = new ArrayList<>();
        for (org.geotools.data.complex.AttributeMapping mapping :
                featureTypeMapping.getAttributeMappings()) {
            if (mapping.getIdentifierExpression() != null
                    && !mapping.getIdentifierExpression().equals(Expression.NIL)) {
                // we have an identifier expression
                String attributeXpath = mapping.getTargetXPath().toString();
                SortBy sortByExpression = filterFactory.sort(attributeXpath, SortOrder.ASCENDING);
                sortByExpressions.add(sortByExpression);
            }
        }
        // add the sort by expression to the query
        return sortByExpressions.toArray(new SortBy[sortByExpressions.size()]);
    }

