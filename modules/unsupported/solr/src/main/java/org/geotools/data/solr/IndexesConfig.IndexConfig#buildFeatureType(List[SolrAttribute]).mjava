        SimpleFeatureType buildFeatureType(List<SolrAttribute> solrAttributes) {
            SimpleFeatureTypeBuilder featureTypeBuilder = new SimpleFeatureTypeBuilder();
            featureTypeBuilder.setName(indexName);
            if (!denormalizedIndexMode) {
                // normal attributes build
                for (String attributeName : attributes) {
                    AttributeDescriptor attribute =
                            buildAttributeDescriptor(attributeName, solrAttributes);
                    if (attribute == null) {
                        continue;
                    }
                    featureTypeBuilder.add(attribute);
                }
            } else {
                // denormalized index build
                for (SolrAttribute sa : solrAttributes) {
                    AttributeDescriptor attribute =
                            buildAttributeDescriptor(sa.getName(), solrAttributes);
                    if (attribute == null) {
                        continue;
                    }
                    featureTypeBuilder.add(attribute);
                }
            }
            GeometryConfig defaultGeometry = searchDefaultGeometry();
            if (defaultGeometry != null) {
                featureTypeBuilder.setDefaultGeometry(defaultGeometry.getAttributeName());
            }
            return featureTypeBuilder.buildFeatureType();
        }

