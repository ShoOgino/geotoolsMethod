    /**
     * Helper method that searches the attribute name in the available feature type that corresponds
     * to the provided property name expression. If no feature type is available we simple return
     * the property name.
     *
     * @param expression property name expression
     * @return the name of the attribute that corresponds to property name expression if a feature
     *     type is available, otherwise returns the property name
     */
    private String encodePropertyName(PropertyName expression) {
        if (expression == null) {
            // the only think we can do is log an warning and move on
            LOGGER.log(Level.WARNING, "NULL property name provided.");
            return null;
        }
        if (featureType == null) {
            // no feature type available, let's just encode the property name as is
            return getPropertyName(expression);
        }
        // feature type available, let's try to retrieve the attribute for the property name
        AttributeDescriptor attribute = (AttributeDescriptor) expression.evaluate(featureType);
        if (attribute == null) {
            // no attribute descriptor available, fall back on encoding the property name as is
            return getPropertyName(expression);
        }
        // return the name of the attribute corresponding to the property name
        return attribute.getLocalName();
    }

