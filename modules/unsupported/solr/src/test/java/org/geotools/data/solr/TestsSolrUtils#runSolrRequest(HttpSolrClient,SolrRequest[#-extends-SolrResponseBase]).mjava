    /**
     * Helper method that just runs a Solr request taking care of the commit action and error
     * handling.
     *
     * <p>Note that an exception may be throw if something bad happen when executing the request on
     * the client side.
     *
     * @param client Sorl client to use, should already point to the desired core
     * @param request Solr request
     * @return response containing any found error or none
     */
    private static Response runSolrRequest(
            HttpSolrClient client, SolrRequest<? extends SolrResponseBase> request) {
        try {
            // execute the requests and parse is result
            Response response = Response.parse(request.process(client));
            if (response.hasErrors()) {
                // some thing bad happen with this request execution on the server side
                return response;
            }
            // everything looks good let's commit
            client.commit();
            return response;
        } catch (Exception exception) {
            // soem exception was thrown during the request execution or its commit
            throw new RuntimeException("Error executing Solr request.", exception);
        }
    }

