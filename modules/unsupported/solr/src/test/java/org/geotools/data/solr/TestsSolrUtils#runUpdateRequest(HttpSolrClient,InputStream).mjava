    /**
     * Performs an update request extracting the necessary Solr documents from the provided stream.
     * It is expected that the stream provides Solr documents encoded in the XML format:
     *
     * <p>
     *
     * <pre>{@code
     * (...)
     * <doc>
     *  <field name="id">1</field>
     *  <field name="status_s">active</field>
     *  <field name="vendor_s">D-Link</field>
     *  (...)
     * </doc>
     * }</pre>
     *
     * @param client Sorl client to use, should already point to the desired core
     * @param xml stream contain the Solr documents encoded in XML
     */
    public static void runUpdateRequest(HttpSolrClient client, InputStream xml) {
        UpdateRequest request = new UpdateRequest();
        // parse Solr documents from the provided XML stream
        List<SolrInputDocument> documents = parseDocuments(xml);
        request.add(documents);
        // execute the update requests, if something went wrong an exception will be throw
        runSolrRequest(client, request).throwIfNeeded();
    }

