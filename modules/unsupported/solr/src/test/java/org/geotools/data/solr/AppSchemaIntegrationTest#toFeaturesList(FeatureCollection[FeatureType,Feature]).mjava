    private List<Feature> toFeaturesList(FeatureCollection<FeatureType, Feature> features) {
        List<Feature> result = new ArrayList<>();
        FeatureIterator<Feature> i = features.features();
        try {
            while (i.hasNext()) {
                result.add(i.next());
            }
        } finally {
            i.close();
        }
        return result;
    }

