    /**
     * Helper method that checks if a feature exists in the provided features list, if the feature
     * is found its attributes are compared for equality with the provided ones.
     */
    private Feature checkFeatureExists(
            List<Feature> features, String id, String name, Point position) {
        for (Feature feature : features) {
            if (feature.getIdentifier().getID().equals(id)) {
                // check the station name
                Property property = feature.getProperty(STATION_NAME);
                assertThat(property, notNullValue());
                assertThat(property.getValue(), notNullValue());
                assertThat(property.getValue(), instanceOf(String.class));
                // check the station geometry
                assertThat(feature.getDefaultGeometryProperty(), notNullValue());
                Object value = feature.getDefaultGeometryProperty().getValue();
                assertThat(value, notNullValue());
                assertThat(value, instanceOf(Point.class));
                assertThat(value, is(position));
                // feature found, we are done
                return feature;
            }
        }
        // feature not found
        fail("Feature not found");
        return null;
    }

