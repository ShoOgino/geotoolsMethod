	/** Method called to read the GeoTiff file or input stream */
	public <T> T write(Write<T> write) throws IOException {
		// open up a reader
		globalLock.writeLock().lock();
		try {
			GeoTiffWriter writer = new GeoTiffWriter(this.input);
			try {
				return write.run(writer, this);
			} finally {
				if (writer != null) {
					writer.dispose();
				}
			}
		} finally {
			globalLock.writeLock().unlock();
		}
	}

