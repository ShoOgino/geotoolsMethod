    /**
     * Build a node having name <code>nodeName</code> and attributes retrieved
     * from the provided <code>attribMap</code>.
     * 
     * @param attribMap
     *                A <code>Map</code> containing couples (attrib name,
     *                attrib value)
     * @param nodeName
     *                the name which need to be set for the node.
     * @return the built node.
     */
    private IIOMetadataNode buildAttributesNodeFromMap(final Map<String,String> attribMap,
            final String nodeName) {
        final IIOMetadataNode node = new IIOMetadataNode(nodeName);
        synchronized (attribMap) {
            if (attribMap != null) {
                final Set<String> set = attribMap.keySet();
                final Iterator<String> iter = set.iterator();
                while (iter.hasNext()) {
                    String key = iter.next();
                    final String attribValue = attribMap.get(key);
                    key = key.replace('\\', '_');
                    node.setAttribute(key, attribValue);
                }
            }
        }
        return node;
    }

