    @Test
    public void testDeleteOnTransform() throws Exception {
        Filter f = CQL.toFilter("name = 'delaware'");
        SimpleFeatureStore transformed = (SimpleFeatureStore) transformWithPartialTransform();
        transformed.removeFeatures(f);

        // check it has been deleted
        int size = STATES.getCount(Query.ALL);
        assertEquals(9, size);

        // check it's not possible to get at it anymore
        assertEquals(0, STATES.getFeatures(f).size());
        assertEquals(0, transformed.getFeatures(f).size());
        
        // now remove everything else
        f = CQL.toFilter("people = total");
        transformed.removeFeatures(f);
        assertEquals(0, STATES.getFeatures(Query.ALL).size());
        assertEquals(0, transformed.getFeatures(Query.ALL).size());
    }

