    /**
     * Turns a geometry filter into the mySQL bbox statement.
     *
     * @param filter the geometry filter to be encoded.
     *
     * @throws RuntimeException for IO exception (need a better error)
     */
    
    public Object visit(BBOX filter, Object extra)
    {
            DefaultExpression left = (DefaultExpression) filter.getExpression1();
            DefaultExpression right = (DefaultExpression) filter.getExpression2();

            // left and right have to be valid expressions
            try {
                out.write("MBRIntersects(");

                if (left == null) {
                    out.write(defaultGeom);
                } else {
			// we want this to be returned as a Geometry
                    left.accept(this,Geometry.class);
                }

                out.write(", ");

                if (right == null) {
                    out.write(defaultGeom);
                } else {
			// we want this to be returned as a Geometry
                    right.accept(this,Geometry.class);
                }

                out.write(")");
            } catch (java.io.IOException ioe) {
                LOGGER.warning("Unable to export filter" + ioe);
            }
	    return extra;
    }

