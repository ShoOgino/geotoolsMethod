    /**
     * Returns the line separator to use when writing to the output stream. The default
     * implementation returns the {@linkplain Spi#lineSeparator line separator} specified
     * to the {@link Spi} object given to this {@code TextImageWriter} constructor. Subclasses
     * can override this method if they want to specify the line separator in some other way.
     *
     * @param  parameters The write parameters, or {@code null} for the defaults.
     * @return The line separator to use for writting the image.
     *
     * @see Spi#lineSeparator
     */
    protected String getLineSeparator(final ImageWriteParam parameters) {
        if (originatingProvider instanceof Spi) {
            final String lineSeparator = ((Spi)originatingProvider).lineSeparator;
            if (lineSeparator != null) {
                return lineSeparator;
            }
        }
        return System.getProperty("line.separator", "\n");
    }

