    /**
     * Invoked by {@link RegionCalculator} only. No other caller allowed.
     */
    final void setSubsampling(final Dimension subsampling) throws IllegalStateException {
        assert Thread.holdsLock(this);
        if (xSubsampling != 0 || ySubsampling != 0) {
            throw new IllegalStateException(); // Should never happen.
        }
        xSubsampling = ensureStrictlyPositive(subsampling.width);
        ySubsampling = ensureStrictlyPositive(subsampling.height);
    }

