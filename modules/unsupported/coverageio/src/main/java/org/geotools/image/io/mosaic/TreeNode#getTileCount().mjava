    /**
     * Returns the number of non-null tiles, including in children.
     */
    final int getTileCount() {
        int count = (tile != null) ? 1 : 0;
        TreeNode child = firstChildren;
        while (child != null) {
            count += child.getTileCount();
            child = child.nextSibling;
        }
        return count;
    }

