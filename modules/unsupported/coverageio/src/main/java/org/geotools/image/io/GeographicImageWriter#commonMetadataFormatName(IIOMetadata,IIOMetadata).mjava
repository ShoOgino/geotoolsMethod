    /**
     * Finds a common metadata format name between the two specified metadata objects. This
     * method query for the {@code outData} {@linkplain #getNativeMetadataFormatName native
     * metadata format name} first.
     *
     * @param  inData  The input metadata.
     * @param  outData The output metadata.
     * @return A metadata format name common to {@code inData} and {@code outData},
     *         or {@code null} if none where found.
     */
    private static String commonMetadataFormatName(final IIOMetadata inData, final IIOMetadata outData) {
        String format = outData.getNativeMetadataFormatName();
        if (isSupportedFormat(inData, format)) {
            return format;
        }
        final String[] formats = outData.getExtraMetadataFormatNames();
        if (formats != null) {
            for (int i=0; i<formats.length; i++) {
                format = formats[i];
                if (isSupportedFormat(inData, format)) {
                    return format;
                }
            }
        }
        if (outData.isStandardMetadataFormatSupported() && inData.isStandardMetadataFormatSupported()) {
            return IIOMetadataFormatImpl.standardMetadataFormatName;
        }
        return null;
    }

