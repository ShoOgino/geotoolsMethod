    /**
     * Initializes the formatter with a suffix inferred from the given image reader provider
     * if none was explicitly set. The longuest file extension is choosen (e.g. {@code "tiff"}
     * instead of {@code "tif"}).
     *
     * @param tileReaderSpi The image reader provider to be used for reading tiles.
     */
    public void initialize(final ImageReaderSpi tileReaderSpi) {
        if (prefix == null) {
            prefix = DEFAULT_PREFIX;
        }
        suffix = "";
        final String[] suffixes = tileReaderSpi.getFileSuffixes();
        if (suffixes != null) {
            for (int i=0; i<suffixes.length; i++) {
                final String s = suffixes[i];
                if (s.length() > suffix.length()) {
                    suffix = s;
                }
            }
            if (!suffix.startsWith(".")) {
                suffix = "." + suffix;
            }
        }
        levelFieldSize  = 0;
        rowFieldSize    = 0;
        columnFieldSize = 0;
    }

