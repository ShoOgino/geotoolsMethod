    /**
     * Removes all children.
     */
    public void removeChildren() {
        TreeNode child = firstChildren;
        while (child != null) {
            assert child.parent == this;
            final TreeNode next = child.nextSibling;
            child.previousSibling = null;
            child.nextSibling     = null;
            child.parent          = null;
            child = next;
        }
        firstChildren = lastChildren = null;
    }

