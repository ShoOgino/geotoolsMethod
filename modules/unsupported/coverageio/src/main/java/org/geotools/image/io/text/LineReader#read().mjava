    /**
     * Read a single character.
     *
     * @return The character read, or -1 if the end of the stream has been reached.
     * @throws IOException If an I/O error occurs.
     */
    @Override
    public int read() throws IOException {
        synchronized (lock) {
            final int c = super.read();
            if (c >= 0) {
                position++;
            }
            return c;
        }
    }

