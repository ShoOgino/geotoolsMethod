    /**
     * Sets the fill values for this band. This method formats all fill values as integers
     * if possible, or all values as floating points otherwise. We apply a "all or nothing"
     * rule for consistency.
     *
     * @param fillValues The packed values used for missing data, or {@code null} if none.
     *
     * @see #setPackedValues
     */
    public void setNoDataValues(final double[] fillValues) {
        if (fillValues != null) {
            int[] asIntegers = new int[fillValues.length];
            for (int i=0; i<fillValues.length; i++) {
                final double value = fillValues[i];
                if ((asIntegers[i] = (int) value) != value) {
                    asIntegers = null; // Not integers; stop the check.
                    break;
                }
            }
            if (asIntegers != null) {
                setAttributeAsIntegers("fillValues", asIntegers);
                return;
            }
        }
        setAttributeAsDoubles("fillValues", fillValues);
    }

