    @Test
    public void testDarkenAsCQL() throws Exception {
        String css = "* { fill: [darken('#FF0000', '30%')]}";
        Style style = translate(css);
        Rule rule = assertSingleRule(style);
        PolygonSymbolizer ps = assertSingleSymbolizer(rule, PolygonSymbolizer.class);
        final Expression color = ps.getFill().getColor();
        assertThat(color, instanceOf(DarkenFunction.class));
        assertEquals(Color.decode("#660000"), color.evaluate(null, Color.class));
    }

