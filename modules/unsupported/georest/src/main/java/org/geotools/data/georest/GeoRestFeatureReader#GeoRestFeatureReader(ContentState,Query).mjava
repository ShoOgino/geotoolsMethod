    /**
     * Create a new reader given a contentState and a query. This constructor will immediately open
     * a connection to the rest service and try to read from it.
     *
     * @param contentState The ContentState associated with this reader.
     * @param query A query that determines which features to read.
     * @throws IOException oops.
     */
    public GeoRestFeatureReader(ContentState contentState, Query query) throws IOException {
        this.contentState = contentState;

        // Open the connection....
        GeoRestDataStore ds = (GeoRestDataStore) contentState.getEntry().getDataStore();
        GeoRestFeatureSource source =
                (GeoRestFeatureSource) ds.getFeatureSource(contentState.getEntry().getName());
        InputStream in = getInputStream(source.getUrl(), query);
        SimpleFeatureCollection col =
                (SimpleFeatureCollection) json.readFeatureCollection(GeoJSONUtil.toReader(in));
        iterator = col.features();
    }

