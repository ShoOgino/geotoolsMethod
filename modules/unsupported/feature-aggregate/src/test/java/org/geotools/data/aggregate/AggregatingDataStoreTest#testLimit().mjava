    /**
     * Test query with maxFeatures
     *
     * @throws IOException
     * @throws FileNotFoundException
     */
    @Test
    public void testLimit() throws FileNotFoundException, IOException {
        Query query = new Query(Query.ALL);
        query.setMaxFeatures(2);
        // just the first store
        store.autoConfigureStores(Arrays.asList("store1"));
        assertEquals(2, store.getFeatureSource(BASIC_POLYGONS).getCount(query));

        // add all stores
        store.resetConfiguration();
        store.autoConfigureStores(Arrays.asList("store1", "store2", "gt:store3"));
        assertEquals(2, store.getFeatureSource(BASIC_POLYGONS).getCount(query));
    }

