    /**
     * Creates a filter matching specified objects.
     * 
     * @param all - if <code>true</code>, all objects must match
     * @param negated - if <code>true</code>, concatenation is negated
     * @param objects - object instances
     * 
     * @return the filter
     */
    public static EObjectFilter createObjectFilter(final boolean all, final boolean negated,
            final EObject... eObjects) {
        return new EObjectFilter() {
            @Override
            public boolean matches(Object object) {
                if (object instanceof EObject) {
                    int count = 0;
                    EObject match = (EObject) object;
                    for (EObject it : eObjects) {
                        if (EcoreUtil.equals(match, it)) {
                            count++;
                            if (!all)
                                break;
                        } else if (all) {
                            count = 0;
                            break;
                        }
                    }
                    return (all ? count > 0 : count == 1);
                }
                return false;
            }
        };
    }

