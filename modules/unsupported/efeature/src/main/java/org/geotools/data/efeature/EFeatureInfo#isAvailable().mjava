    @Override
    public boolean isAvailable() {
        // --------------------------------------------------------
        //  Is available and is a prototype or has at least
        //  one geometry defined?
        // --------------------------------------------------------
        //  Prototypes must be available since prototypes are used
        //  in queries matching all EFeature implementations. If
        //  prototypes are unavailable, getFeatureType() returns
        //  null, which breaks the construction of query instances.
        //
        //  See EFeatureUtils#toEFeatureQuery(TreeIterator,Filter)
        // --------------------------------------------------------
        //
        return super.isAvailable() && (isPrototype() || !eGeometryInfoMap.isEmpty());
    }

