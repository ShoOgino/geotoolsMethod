    protected static Map<String, EFeatureInfo> features(EFeatureFolderInfo eFolderInfo, EPackage ePackage) {
        //
        // Prepare
        //
        EList<EClassifier> eList = ePackage.getEClassifiers();
        Map<String, EFeatureInfo> eFeatureMap = 
            new HashMap<String, EFeatureInfo>(eList.size());  
        //
        // Inspect EMF package, adding all EFeature and EFeature compatible classes. 
        //
        for(EClassifier it : eList)
        {
            //
            // Check if it implements EFeature or contains EFeature compatible data
            //
            if(EFeatureUtils.isCompatible(it))
            {
                EFeatureInfo eFeatureInfo = 
                    EFeatureInfo.create(eFolderInfo, (EClass)it);
                eFeatureMap.put(eFeatureInfo.eName(), eFeatureInfo);
            }
        }      
        //
        // Finished
        //
        return Collections.unmodifiableMap(eFeatureMap);
    }

