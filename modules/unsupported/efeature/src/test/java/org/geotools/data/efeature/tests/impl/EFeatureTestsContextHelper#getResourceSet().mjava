    public ResourceSet getResourceSet() {
        //
        // Initialize?
        //
        if (eResourceSet == null) {
            //
            // Get editing domain
            //
            EditingDomain eDomain = getEditingDomain();
            //
            // Get resource set from domain
            //
            eResourceSet = eDomain.getResourceSet();
            //
            // Register the package to ensure it is available during loading.
            //
            eResourceSet.getPackageRegistry().put(eNS_URI, EFeatureTestsPackage.eINSTANCE);
            //
            // Register the EFeature resource factory to allow loading and saving XMI documents.
            //
            eResourceSet
                    .getResourceFactoryRegistry()
                    .getExtensionToFactoryMap()
                    .put((binary ? "bin" : "xmi"), new EFeatureTestsResourceFactoryImpl(binary));
            //
            // Map resource
            //
        }
        return eResourceSet;
    }

