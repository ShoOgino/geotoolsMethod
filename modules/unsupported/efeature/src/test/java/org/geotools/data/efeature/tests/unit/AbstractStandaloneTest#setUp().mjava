    @Override
    @BeforeClass
    public final void setUp() throws Exception {

        trace("===> Begin : " + getName()); //$NON-NLS-1$
        EFeatureLogFormatter.setMinimal();
        
        File eTestData = org.geotools.test.TestData.file(this,null);
        this.eTestDataPath = eTestData.toString();
        this.eResourcePath = eTestDataPath + "/" + getName()+"."+contentType;
        //
        // Create EMF resource URI
        //
        eResourceURI = URI.createURI(eResourcePath,true);
        //
        // Delete existing?
        //
        if(!reuse) delete(eResourcePath);
        //
        // Forward to implementation
        //
        doSetUp();        
        //
        // Prepare EMF resource
        //        
        eResourceSet = createResourceSet();
        try {
            //
            // Get flags
            //
            boolean createNew = !(reuse && (new File(eResourcePath)).exists());
            //
            // Get resource
            //           
            Resource r = (createNew ? eResourceSet.createResource(eResourceURI, contentType) : 
                                      eResourceSet.getResource(eResourceURI, true)) ;
            if(!createNew) {
                trace("Resource loaded",TIME_DELTA);                
            }

            //
            // Create resource data?
            //
            if(createNew) {
                createTestData(r);
                trace("Resource created",TIME_DELTA);
            }
            //
            // Persist resource to file
            //            
            r.save(Collections.EMPTY_MAP);
            eResource = r;
            //
            // Ensure that this resource is deleted on exist?
            //
            if(delete) deleteOnExit(eResourcePath);
            //
            // Prepare EMF editing domain
            //
            eDomain = createEditingDomain(eResourceSet);
            
        } catch (IOException e) {
            fail("Failed to load test model: " + e.getLocalizedMessage()); //$NON-NLS-1$
        }

        trace("Setup completed",TIME_TOTAL);
        
    }

