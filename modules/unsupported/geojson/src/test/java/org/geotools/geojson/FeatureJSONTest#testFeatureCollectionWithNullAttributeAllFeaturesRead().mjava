    @Test
    public void testFeatureCollectionWithNullAttributeAllFeaturesRead() throws Exception {
        String collectionText = collectionText(true, true, false, false, false, true);
        SimpleFeatureType ftype = fjson.readFeatureCollectionSchema((strip(collectionText)), false);

        assertNotNull(ftype.getDescriptor("double"));
        // type defaults to String as all values were null
        assertEquals(String.class, ftype.getDescriptor("double").getType().getBinding());
        assertNotNull(ftype.getDescriptor("int"));
        assertEquals(Long.class, ftype.getDescriptor("int").getType().getBinding());
        assertNotNull(ftype.getDescriptor("string"));
        assertEquals(String.class, ftype.getDescriptor("string").getType().getBinding());

        assertNotNull(ftype.getCoordinateReferenceSystem());

        fjson.setFeatureType(ftype);
        SimpleFeatureCollection fcol =
                (SimpleFeatureCollection) fjson.readFeatureCollection((strip(collectionText)));

        assertEquals(ftype, fcol.getSchema());

        try (FeatureIterator it = fcol.features()) {
            while (it.hasNext()) {
                assertEquals(ftype, it.next().getType());
            }
        }
    }

