    String featureArrayText(int val, boolean missingAttribute, boolean nullAttribute) {
        if (missingAttribute && nullAttribute) {
            throw new IllegalArgumentException(
                    "For tests, use only one of either missingAttribute or nullAttribute");
        }
        String text =
                "{"
                        + "  'type': 'Feature',"
                        + "  'geometry': {"
                        + "     'type': 'Point',"
                        + "     'coordinates': ["
                        + (val + 0.1)
                        + ","
                        + (val + 0.1)
                        + "]"
                        + "   }, "
                        + "'  properties': {"
                        + "     'int': "
                        + val
                        + ","
                        + (missingAttribute
                                ? ""
                                : (nullAttribute
                                        ? ("     'double': null,")
                                        : ("     'double': " + (val + 0.1) + ",")))
                        + "     'string': '"
                        + toString(val)
                        + "',"
                        + "'array': ['"
                        + toString(val)
                        + "','"
                        + toString(val + 1)
                        + "']"
                        + "   },"
                        + "   'id':'feature."
                        + val
                        + "'"
                        + "}";

        return text;
    }

