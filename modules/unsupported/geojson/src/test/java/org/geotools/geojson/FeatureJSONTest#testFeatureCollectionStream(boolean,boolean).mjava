    void testFeatureCollectionStream(boolean withBounds, boolean withCRS) throws Exception {
        FeatureIterator<SimpleFeature> features = 
            fjson.streamFeatureCollection(reader(strip(collectionText(withBounds, withCRS))));
        
        FeatureCollection expected = collection();
        Iterator e = expected.iterator();
        
        while(e.hasNext()) {
            features.hasNext(); //ensure that hasNext() does not skip features
            assertTrue(features.hasNext());
            assertEqualsLax((SimpleFeature)e.next(), features.next());
        }
        
        features.close();
        expected.close(e);
    }

