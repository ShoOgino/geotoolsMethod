    /**
     * Performs the encoding and populates the {@link FilterBuilder}.
     *
     * @param filter the Filter to be encoded.
     *
     * @throws FilterToElasticException If filter type not supported, or if there
     *         were io problems.
     */
    public void encode(Filter filter) throws FilterToElasticException {
        fullySupported = getCapabilities().fullySupports(filter);
        filter.accept(this, null);
    }

