    /**
     * Common implementation for BinaryLogicOperator filters.  This way
     * they're all handled centrally.
     *
     * @param filter the logic statement.
     * @param extraData extra filter data.  Not modified directly by this method.
     */
    protected Object visit(BinaryLogicOperator filter, Object extraData) {
        LOGGER.finer("exporting LogicFilter");

        final List<QueryBuilder> filterList = new ArrayList<>();
//        final List<FilterBuilder> filterList = new ArrayList<>();
        for (final Filter child : filter.getChildren()) {
            child.accept(this, extraData);
            filterList.add(filterBuilder);
        }
        final QueryBuilder[] filters;
//        final FilterBuilder[] filters;
        filters = filterList.toArray(new QueryBuilder[filterList.size()]);
//        filters = filterList.toArray(new FilterBuilder[filterList.size()]);
        if (extraData.equals("AND")) {
        	BoolQueryBuilder andQ = QueryBuilders.boolQuery();
        	for (QueryBuilder filterQ: filters){
        		andQ.must(filterQ);
        	}
    		filterBuilder = andQ;
//            filterBuilder = FilterBuilders.andFilter(filters);
        } else if (extraData.equals("OR")) {
        	BoolQueryBuilder orQ = QueryBuilders.boolQuery();
        	for (QueryBuilder filterQ: filters){
        		orQ.should(filterQ);
        	}
        	filterBuilder = orQ;
//            filterBuilder = FilterBuilders.orFilter(filters);
        } else {
            // OR
            filterBuilder = FilterBuilders.orFilter(filters);
        }
        return extraData;
    }

