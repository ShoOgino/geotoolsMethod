    /**
     * Perform basic update to the given name to make it XML namespace compliant.
     *
     * @param name Raw name
     * @return Name that is XML safe
     */
    private static String normalizeName(String name) {

        String normalName = name;

        /* XML element naming rules:
         * 1. Element names must start with a letter or underscore
         * 2. Element names cannot start with the letters xml
         * 3. Element names cannot contain spaces
         */
        if (normalName == null) {
            return null;
        }
        if (normalName.toLowerCase().startsWith("xml")) {
            normalName = "_".concat(normalName);
        } else if (!beginLetters.matcher(normalName).matches()) {
            normalName = "_".concat(normalName);
        }
        /* Simply replace all spaces in the name with "_". */
        return normalName.replaceAll(" ", "_");
    }

