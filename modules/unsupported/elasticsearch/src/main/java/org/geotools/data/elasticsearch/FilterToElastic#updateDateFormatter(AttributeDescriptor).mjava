    private void updateDateFormatter(AttributeDescriptor attType) {
        if (attType != null) {
            @SuppressWarnings("unchecked")
            final List<String> validFormats =
                    (List<String>) attType.getUserData().get(ElasticConstants.DATE_FORMAT);
            if (validFormats != null) {
                for (String format : validFormats) {
                    try {
                        dateFormatter = Joda.forPattern(format).printer();
                        break;
                    } catch (Exception e) {
                        LOGGER.fine(
                                "Unable to parse date format ('" + format + "') for " + attType);
                    }
                }
            }
        }
        if (dateFormatter == null) {
            dateFormatter = DEFAULT_DATE_FORMATTER;
        }
    }

