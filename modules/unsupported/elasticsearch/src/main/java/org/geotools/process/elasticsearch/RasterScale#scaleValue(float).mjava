    public float scaleValue(float value) {
        if (scaleLog && value > 0) {
            value = (float) Math.log10(value);
        }
        if (scaleMax == null) {
            return value;
        } else if (dataMax.floatValue() == dataMin) {
            return scaleMax;
        } else {
            return ((scaleMax - scaleMin) * (value - dataMin) / (dataMax - dataMin)) + scaleMin;
        }
    }

