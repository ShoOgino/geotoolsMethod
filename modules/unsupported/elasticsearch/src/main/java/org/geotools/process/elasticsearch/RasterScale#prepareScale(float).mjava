    public void prepareScale(float value) {
        if (scaleLog && value > 0) {
            value = (float) Math.log10(value);
        }
        if (scaleMax != null && dataMin != null) {
            if (value < dataMin) {
                dataMin = value;
            }
            if (value > dataMax) {
                dataMax = value;
            }
        } else if (scaleMax != null) {
            dataMin = value;
            dataMax = value;
        }
    }

