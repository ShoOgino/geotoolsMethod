    @Test
    public void testSearchResponseWithProxyClient() throws IOException {
        String content = "{\"hits\": {\"total\": 10, \"max_score\": 0.8, \"hits\": [{\"_index\": \"index_name\"}, {}]}}";
        final RequestMatcher matcher = new RequestMatcher("POST", "/status_s/_search",
                "{}", "runAsTest");
        InputStream inputStream = new ByteArrayInputStream(content.getBytes());
        when(mockEntity.getContent()).thenReturn(inputStream);
        when(mockProxyRestClient.performRequest(argThat(matcher))).thenReturn(mockResponse);

        final ElasticResponse response = proxyClient.search("status_s", "active", new ElasticRequest());
        assertEquals(10, response.getResults().getTotal().intValue());
        assertEquals("index_name", response.getHits().get(0).getIndex());
        assertEquals(0.8f, response.getResults().getMaxScore(), 1e-9);
    }

