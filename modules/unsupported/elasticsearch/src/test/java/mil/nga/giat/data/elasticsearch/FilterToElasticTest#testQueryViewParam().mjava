	@Test
	public void testQueryViewParam() {
		IdsQueryBuilder idsQuery = QueryBuilders.idsQuery("type1");
		parameters.put("q", idsQuery.toString());
		byte[] encoded = Base64.encodeBase64(idsQuery.toString().getBytes());
		final Pattern expected = Pattern.compile(".*\"wrapper\".*\"query\".*\"" + new String(encoded) + ".*",
				Pattern.MULTILINE | Pattern.DOTALL);

		builder.addViewParams(query);
		assertTrue(builder.getFilterBuilder().toString().equals(QueryBuilders.matchAllQuery().toString()));
//		assertTrue(builder.getFilterBuilder().toString().equals(FilterBuilders.matchAllFilter().toString()));
		assertTrue(expected.matcher(builder.getQueryBuilder().toString()).matches());
	}

