	@Test
	public void compoundFilter() throws CQLException, FilterToElasticException {
		Filter filter = ECQL.toFilter("time > \"1970-01-01\" and INTERSECTS(\"geom\", LINESTRING(0 0,1 1))");
		RangeQueryBuilder expected1 = QueryBuilders.rangeQuery("time").gt("1970-01-01");
//		RangeFilterBuilder expected1 = FilterBuilders.rangeFilter("time").gt("1970-01-01");
		LineStringBuilder shape = ShapeBuilder.newLineString().point(0, 0).point(1, 1);
		GeoShapeQueryBuilder expected2 = QueryBuilders.geoShapeQuery("geom", shape, ShapeRelation.INTERSECTS);
		BoolQueryBuilder expected = QueryBuilders.boolQuery().must(expected1).must(expected2);
//		GeoShapeFilterBuilder expected2 = FilterBuilders.geoShapeFilter("geom", shape, ShapeRelation.INTERSECTS);
//		AndFilterBuilder expected = FilterBuilders.andFilter(expected1, expected2);

		builder.encode(filter);
		assertTrue(builder.createFilterCapabilities().fullySupports(filter));
		
		String one = expected.toString();
		String two = builder.getFilterBuilder().toString();

		assertEquals(one,two);
//		assertTrue(builder.getFilterBuilder().toString().equals(expected.toString()));
	}

