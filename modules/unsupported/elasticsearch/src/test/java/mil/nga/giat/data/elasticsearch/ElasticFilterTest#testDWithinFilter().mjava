    @Test
    public void testDWithinFilter() throws CQLException {
        DWithin filter = (DWithin) ECQL.toFilter("DWITHIN(\"geo_point\", POINT(0 1.1), 1.0, meters)");
        Map<String,Object> expected = ImmutableMap.of("bool", 
                ImmutableMap.of("must", MATCH_ALL, "filter", ImmutableMap.of("geo_distance", 
                        ImmutableMap.of("distance", "1.0m",
                                "geo_point", ImmutableList.of(0.,1.1)))));

        builder.visit(filter, null);
        assertTrue(builder.createCapabilities().fullySupports(filter));
        assertEquals(expected, builder.getQueryBuilder());       
    }

