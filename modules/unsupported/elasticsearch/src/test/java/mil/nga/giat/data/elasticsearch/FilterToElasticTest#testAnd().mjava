	@Test
	public void testAnd() {
		And filter = ff.and(ff.id(ff.featureId("id1")), ff.id(ff.featureId("id2")));
		BoolQueryBuilder expected = QueryBuilders.boolQuery().must(QueryBuilders.idsQuery().addIds("id1"))
				.must(QueryBuilders.idsQuery().addIds("id2"));
		// AndFilterBuilder expected = FilterBuilders.andFilter(
		// FilterBuilders.idsFilter().addIds("id1"),
		// FilterBuilders.idsFilter().addIds("id2"));

		builder.visit(filter, null);

		String expe = expected.toString();
		String bld = builder.getFilterBuilder().toString();
		
		assertEquals(expe,bld);
		
		assertTrue(builder.createFilterCapabilities().fullySupports(filter));
		assertTrue(builder.getFilterBuilder().toString().equals(expected.toString()));
	}

