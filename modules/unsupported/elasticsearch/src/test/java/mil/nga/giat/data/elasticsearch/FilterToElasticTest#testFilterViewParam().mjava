	@Test
	public void testFilterViewParam() {
		IdsQueryBuilder idsFilter = QueryBuilders.idsQuery().addIds("id");
//		IdsFilterBuilder idsFilter = FilterBuilders.idsFilter().addIds("id");
		parameters.put("f", idsFilter.toString());
		byte[] encoded = Base64.encodeBase64(idsFilter.toString().getBytes());
		final Pattern expected = Pattern.compile(".*\"wrapper\".*\"query\".*\"" + new String(encoded) + ".*",
				Pattern.MULTILINE | Pattern.DOTALL);
//		final Pattern expected = Pattern.compile(".*\"wrapper\".*\"filter\".*\"" + new String(encoded) + ".*",
//				Pattern.MULTILINE | Pattern.DOTALL);

		builder.addViewParams(query);
		
		String exp = builder.getFilterBuilder().toString();
		
		assertTrue(expected.matcher(builder.getFilterBuilder().toString()).matches());
		assertTrue(builder.getQueryBuilder().toString().equals(QueryBuilders.matchAllQuery().toString()));
	}

