    @Test(expected=IllegalStateException.class)
    public void testMissingAuth() throws IOException {
        when(mockStx.getAuthentication()).thenReturn(null);
        proxyClient.search("status_s", "active", new ElasticRequest());
    }

