    @Test
    public void testQueryViewParam() throws JsonProcessingException {
        Map<String,Object> idsQuery = ImmutableMap.of("ids", ImmutableMap.of("value", ImmutableList.of("type1")));
        parameters.put("q", new ObjectMapper().writeValueAsString(idsQuery));

        builder.addViewParams(query);
        assertEquals(idsQuery, builder.nativeQueryBuilder);
    }

