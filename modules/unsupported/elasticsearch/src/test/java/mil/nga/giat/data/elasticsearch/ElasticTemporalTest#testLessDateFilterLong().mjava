    @Test
    public void testLessDateFilterLong() throws Exception {
        init();
        Date testDate = new Date(1005912798000l);
        FilterFactory ff = dataStore.getFilterFactory();

        Filter f = ff.lessOrEqual(ff.property("installed_td"), ff.literal(testDate.getTime()));
        SimpleFeatureCollection features = featureSource.getFeatures(f);
        assertEquals(4, features.size());
        SimpleFeatureIterator it = features.features();
        while (it.hasNext()) {
            SimpleFeature next = it.next();
            Date date = (Date) next.getAttribute("installed_td");
            assertTrue(date.before(testDate) || date.equals(testDate));
        }
        it.close();
    }

