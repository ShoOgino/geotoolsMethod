    @Test
    public void testGeoShapeIntersectsFilterReversed() throws CQLException {
        Intersects filter = (Intersects) ECQL.toFilter("INTERSECTS(LINESTRING(0 0,1.1 1.1), \"geom\")");
        List<List<Double>> coords = new ArrayList<>();
        coords.add(ImmutableList.of(0.,0.));
        coords.add(ImmutableList.of(1.1,1.1));
        Map<String,Object> expected = ImmutableMap.of("bool", 
                ImmutableMap.of("must", MATCH_ALL, "filter", ImmutableMap.of("geo_shape", 
                        ImmutableMap.of("geom", ImmutableMap.of("shape", 
                                ImmutableMap.of("coordinates", coords, "type", "LineString"),
                                "relation", "INTERSECTS")))));

        builder.visit(filter, null);
        assertTrue(builder.createCapabilities().fullySupports(filter));
        assertEquals(expected.toString(), builder.getQueryBuilder().toString());
    }

