    @Test
    public void testNativeOnlyQueryViewParam() throws JsonProcessingException {
        parameters.put("native-only", "true");
        Map<String, Object> idsQuery =
                ImmutableMap.of("ids", ImmutableMap.of("value", ImmutableList.of("id")));
        builder.queryBuilder = idsQuery;
        parameters.put("q", new ObjectMapper().writeValueAsString(idsQuery));

        builder.addViewParams(query);
        assertEquals(builder.getQueryBuilder(), idsQuery);
    }

