    @Test(expected = FilterToElasticException.class)
    public void testNativeQueryViewParamWithError() {
        parameters.put("native-only", "true");
        builder.queryBuilder =
                ImmutableMap.of("ids", ImmutableMap.of("value", ImmutableList.of("id")));
        parameters.put("q", "{\"x}");

        builder.addViewParams(query);
    }

