    @Test
    public void testVersionWithError() throws IOException {
        String content = "{}";
        InputStream inputStream = new ByteArrayInputStream(content.getBytes());
        when(mockEntity.getContent()).thenReturn(inputStream);
        final RequestMatcher matcher = new RequestMatcher("GET", "/", null, null);
        when(mockRestClient.performRequest(argThat(matcher))).thenThrow(IOException.class);

        final double version = client.getVersion();
        assertEquals(RestElasticClient.DEFAULT_VERSION, version, 1e-9);
    }

