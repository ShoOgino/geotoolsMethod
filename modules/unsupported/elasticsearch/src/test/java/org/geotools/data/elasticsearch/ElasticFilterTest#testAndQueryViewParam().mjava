    @Test
    public void testAndQueryViewParam() throws JsonProcessingException {
        Map<String, Object> idsQuery =
                ImmutableMap.of("ids", ImmutableMap.of("value", ImmutableList.of("id")));
        builder.queryBuilder = idsQuery;
        parameters.put("q", new ObjectMapper().writeValueAsString(idsQuery));

        builder.addViewParams(query);
        assertNotNull(builder.getQueryBuilder());
    }

