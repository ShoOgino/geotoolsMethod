    @Test
    public void testConstructionWithProxyClientAndIndex() throws IOException {
        Map<String, Serializable> params = createConnectionParams();
        String host = ElasticDataStoreFactory.getValue(ElasticDataStoreFactory.HOSTNAME, params);
        Integer port = ElasticDataStoreFactory.getValue(ElasticDataStoreFactory.HOSTPORT, params);
        String indexName =
                ElasticDataStoreFactory.getValue(ElasticDataStoreFactory.INDEX_NAME, params);

        HttpHost httpHost = new HttpHost(host, port, "http");
        try (RestClient client = RestClient.builder(httpHost).build()) {

            DataStore dataStore = new ElasticDataStore(client, client, indexName, false);
            String[] typeNames = dataStore.getTypeNames();
            assertTrue(typeNames.length > 0);
        }
    }

