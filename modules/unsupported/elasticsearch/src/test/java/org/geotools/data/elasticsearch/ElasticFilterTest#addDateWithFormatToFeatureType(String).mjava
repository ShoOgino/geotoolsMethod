    private void addDateWithFormatToFeatureType(String format) {
        SimpleFeatureTypeBuilder typeBuilder = new SimpleFeatureTypeBuilder();
        typeBuilder.init(featureType);

        AttributeTypeBuilder dateAttBuilder = new AttributeTypeBuilder();
        dateAttBuilder.setName("dateAttrWithFormat");
        dateAttBuilder.setBinding(Date.class);
        AttributeDescriptor dateAtt =
                dateAttBuilder.buildDescriptor("dateAttrWithFormat", dateAttBuilder.buildType());
        List<String> validFormats = new ArrayList<>();
        validFormats.add(format);
        dateAtt.getUserData().put(ElasticConstants.DATE_FORMAT, validFormats);
        typeBuilder.add(dateAtt);

        featureType = typeBuilder.buildFeatureType();
        setFilterBuilder();
    }

