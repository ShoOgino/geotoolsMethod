    @Test
    public void testCreateRestClient() throws IOException {
        assertEquals(
                ImmutableList.of(new HttpHost("localhost", port, "http")), getHosts("localhost"));
        assertEquals(
                ImmutableList.of(new HttpHost("localhost.localdomain", port, "http")),
                getHosts("localhost.localdomain"));

        assertEquals(
                ImmutableList.of(new HttpHost("localhost", 9201, "http")),
                getHosts("localhost:9201"));
        assertEquals(
                ImmutableList.of(new HttpHost("localhost.localdomain", 9201, "http")),
                getHosts("localhost.localdomain:9201"));

        assertEquals(
                ImmutableList.of(new HttpHost("localhost", port, "http")),
                getHosts("http://localhost"));
        assertEquals(
                ImmutableList.of(new HttpHost("localhost", 9200, "http")),
                getHosts("http://localhost:9200"));
        assertEquals(
                ImmutableList.of(new HttpHost("localhost", 9201, "http")),
                getHosts("http://localhost:9201"));

        assertEquals(
                ImmutableList.of(new HttpHost("localhost", port, "https")),
                getHosts("https://localhost"));
        assertEquals(
                ImmutableList.of(new HttpHost("localhost", 9200, "https")),
                getHosts("https://localhost:9200"));
        assertEquals(
                ImmutableList.of(new HttpHost("localhost", 9201, "https")),
                getHosts("https://localhost:9201"));

        assertEquals(
                ImmutableList.of(
                        new HttpHost("somehost.somedomain", port, "http"),
                        new HttpHost("anotherhost.somedomain", port, "http")),
                getHosts("somehost.somedomain:" + port + ",anotherhost.somedomain:" + port));
        assertEquals(
                ImmutableList.of(
                        new HttpHost("somehost.somedomain", port, "https"),
                        new HttpHost("anotherhost.somedomain", port, "https")),
                getHosts(
                        "https://somehost.somedomain:"
                                + port
                                + ",https://anotherhost.somedomain:"
                                + port));
        assertEquals(
                ImmutableList.of(
                        new HttpHost("somehost.somedomain", port, "https"),
                        new HttpHost("anotherhost.somedomain", port, "https")),
                getHosts(
                        "https://somehost.somedomain:"
                                + port
                                + ", https://anotherhost.somedomain:"
                                + port));
        assertEquals(
                ImmutableList.of(
                        new HttpHost("somehost.somedomain", port, "https"),
                        new HttpHost("anotherhost.somedomain", port, "http")),
                getHosts(
                        "https://somehost.somedomain:" + port + ",anotherhost.somedomain:" + port));
    }

