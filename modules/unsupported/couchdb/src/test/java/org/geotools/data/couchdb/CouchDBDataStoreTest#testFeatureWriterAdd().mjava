    @Test
    public void testFeatureWriterAdd() throws Exception {
        // currently require some data to exist due to construction of featuretype from existing
        // feature...
        db.postBulk(loadJSON("morocco.json", "countries"));

        JSONArray data = loadJSON("italy.json", "countries");
        JSONObject italy = (JSONObject) data.get(0);
        FeatureJSON json = new FeatureJSON();
        json.setFeatureType(CouchDBUtils.createFeatureType(italy, "countries"));
        Feature feature = json.readFeature(italy.toString());

        ContentFeatureStore featureStore =
                (ContentFeatureStore) store.getFeatureSource("gttestdb.countries");
        featureStore.addFeatures(Collections.singleton(feature));

        // single add case
        ContentFeatureCollection features = featureStore.getFeatures();
        assertEquals(2, features.size());

        // double add (we can add the same features repeatedly at the moment
        // since the id is opaque to the feature
        featureStore.addFeatures(Arrays.asList(feature, feature));
        assertEquals(4, features.size());
    }

