    @Test
    public void testPutDesignDocument() throws Exception {
        deleteIfExists(getTestDB());
        CouchDBConnection db = client.createDB(getTestDB());

        // failure first
        try {
            db.putDesignDocument("not json");
            fail("expected error");
        } catch (CouchDBException ex) {
            assertTrue("expected reason", ex.getMessage().indexOf("invalid UTF-8 JSON") >= 0);
        }

        // success path
        db.putDesignDocument(resolveFile("design-doc.json"));
    }

