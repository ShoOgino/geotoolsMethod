    /**
     * Local utility method to make a copy of a Map object.
     * 
     * <p>
     * Used to make copies of a HashMap of Param objects but should work for
     * any Map.
     * </p>
     *
     * @param params an arbitrary Map object
     *
     * @return a copy of the input Map object
     */
    protected Map copyParams(Map params) {
        Map<String, Object> p2 = new HashMap<String, Object>();
        Set keys = params.keySet();
        Iterator it = keys.iterator();

        while (it.hasNext()) {
            String key = (String) it.next();
            p2.put(key, params.get(key));
        }

        return p2;
    }

