    /**
     * @return
     */
    public GetTileRequest createGetTileRequest() {

        GetTileRequest request;

        if (WMTSServiceType.KVP.equals(type)) {
            URL onlineResource = findURL(getCapabilities().getRequest().getGetTile());

            request =  (GetTileRequest) ((WMTSSpecification) specification)
                    .createGetTileRequest(onlineResource, (Properties) null, capabilities);
        } else {
            request = (GetTileRequest) ((WMTSSpecification) specification)
                    .createGetTileRequest(serverURL, (Properties) null, capabilities);
        }

        request.getHeaders().putAll(headers);
        
        return request;
    }

