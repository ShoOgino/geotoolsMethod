    private static SimpleFeature iterate(
            SimpleFeatureCollection features, int expectedSize, boolean getSize) {
        int size = -1;
        if (getSize) {
            size = features.size();
            if (size > -1) {
                assertEquals(expectedSize, size);
            }
        }

        size = 0;

        SimpleFeature sf = null;
        try (SimpleFeatureIterator reader = features.features()) {
            while (reader.hasNext()) {
                if (sf == null) {
                    sf = reader.next();
                } else {
                    reader.next().getIdentifier();
                }
                size++;
            }
        }

        assertEquals(expectedSize, size);

        return sf;
    }

