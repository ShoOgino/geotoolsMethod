    @Before
    public void setUp() throws IOException {
        if (serviceAvailable == null) {
            // check for service availability only once
            URL url = new URL(SERVER_URL);
            serviceAvailable = Boolean.FALSE;

            try (InputStream stream = url.openStream()) {
                serviceAvailable = Boolean.TRUE;
            } catch (Throwable t) {
                LOGGER.log(
                        Level.WARNING,
                        "The test server is not available: "
                                + SERVER_URL
                                + ". "
                                + getClass().getSimpleName()
                                + " test disabled ");
                url = null;
                return;
            }
        }

        if (wfs == null && serviceAvailable.booleanValue()) {
            LOGGER.info("Creating test datastore for " + SERVER_URL);

            Map<String, Serializable> params = new HashMap<>();
            params.put(WFSDataStoreFactory.URL.key, SERVER_URL);
            params.put(WFSDataStoreFactory.GML_COMPATIBLE_TYPENAMES.key, true);
            params.put(WFSDataStoreFactory.AXIS_ORDER.key, axisOrder);

            WFSDataStoreFactory dataStoreFactory = new WFSDataStoreFactory();
            wfs = dataStoreFactory.createDataStore(params);
            LOGGER.fine("WFS datastore created");
        }
    }

