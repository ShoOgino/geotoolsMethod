    private Id createFidFilter(SimpleFeatureSource fs) throws IOException {
        try (SimpleFeatureIterator iter = fs.getFeatures().features()) {
            FilterFactory2 ffac = CommonFactoryFinder.getFilterFactory2(GeoTools.getDefaultHints());
            Set<FeatureId> fids = new HashSet<>();
            while (iter.hasNext()) {
                String id = iter.next().getID();
                FeatureId fid = ffac.featureId(id);
                fids.add(fid);
            }
            Id filter = ffac.id(fids);
            return filter;
        }
    }

