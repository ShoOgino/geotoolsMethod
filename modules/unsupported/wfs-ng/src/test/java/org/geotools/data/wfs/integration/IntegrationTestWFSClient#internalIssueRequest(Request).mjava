    @Override
    protected Response internalIssueRequest(Request request) throws IOException {
        try {
            if (request instanceof GetCapabilitiesRequest) {
                return mockCapabilities(request);
            }
            if (request instanceof DescribeFeatureTypeRequest) {
                return mockDFT((DescribeFeatureTypeRequest) request);
            }
            if (request instanceof GetFeatureRequest) {
                return mockGetFeature((GetFeatureRequest) request);
            }
            if (request instanceof TransactionRequest) {
                if(failOnTransaction){
                    return mockTransactionFailure((TransactionRequest) request);
                }else{
                    return mockTransactionSuccess((TransactionRequest) request);
                }
            }
        } catch (ServiceException e) {
            throw new IOException(e);
        }

        throw new IllegalArgumentException("Unknown request : " + request);
    }

