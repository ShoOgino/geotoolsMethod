    /**
     * Tests case where filter is makes use of 2 different attributes but Query object only requests
     * 1 of the two attributes. This is a fix for a bug that has occurred.
     */
    @Test
    public void testFeatureReaderWithQueryFilter() throws Exception {
        if (Boolean.FALSE.equals(serviceAvailable)) {
            return;
        }

        Filter filter = ff.equals(ff.property("NAME"), ff.literal("E 58th St"));

        Query query = new Query("tiger_tiger_roads", filter);
        int expected = 0;
        try (Transaction t = new DefaultTransaction();
                FeatureReader<SimpleFeatureType, SimpleFeature> reader =
                        wfs.getFeatureReader(query, t)) {

            while (reader.hasNext()) {
                expected++;
                reader.next();
            }
        }
        query = new Query("tiger_tiger_roads", filter, 100, new String[] {"CFCC"}, "");
        try (Transaction t = new DefaultTransaction();
                FeatureReader<SimpleFeatureType, SimpleFeature> reader =
                        wfs.getFeatureReader(query, t)) {
            int count = 0;
            while (reader.hasNext()) {
                count++;
                reader.next();
            }

            assertEquals(expected, count);
        }
    }

