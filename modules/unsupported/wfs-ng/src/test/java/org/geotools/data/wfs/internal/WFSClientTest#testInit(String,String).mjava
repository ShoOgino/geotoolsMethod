    private WFSClient testInit(String resource, String expectedVersion)
            throws IOException, ServiceException {

        WFSClient client = newClient(resource);
        WFSGetCapabilities capabilities = client.getCapabilities();
        // GEOT-5113 (should not throw NPE)
        if (!client.getRemoteTypeNames().isEmpty()) {
            client.supportsTransaction(client.getRemoteTypeNames().iterator().next());
        }
        Assert.assertEquals(expectedVersion, capabilities.getVersion());
        return client;
    }

