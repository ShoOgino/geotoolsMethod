    private void assertCorrectSize(SimpleFeatureCollection collection, Object totalFeatures)
            throws Exception {
        SimpleFeatureIterator iter = collection.features();

        try {
            int count = 0;
            while (iter.hasNext()) {
                count++;
                iter.next();
            }
            assertEquals(totalFeatures, count);

        } finally {
            iter.close();
        }
    }

