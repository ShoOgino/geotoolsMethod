    public WFSFeatureWriter(final WFSContentFeatureStore store,
            final WFSLocalTransactionState localSate,
            final FeatureReader<SimpleFeatureType, SimpleFeature> reader, final boolean autoCommit) {

        super(store, localSate.getDiff(), reader);
        featureBuilder = new SimpleFeatureBuilder(getFeatureType(),
                new MutableIdentifierFeatureFactory());

        if (autoCommit) {
            WFSContentDataStore dataStore = (WFSContentDataStore) store.getDataStore();
            autoCommitState = new WFSRemoteTransactionState(dataStore);
            autoCommitState.watch(localSate);
        } else {
            autoCommitState = null;
        }
    }

