    @Override
    public Set<String> getServerSupportedOutputFormats(WFSOperationType operation) {
        String parameterName;

        switch (operation) {
            case GET_FEATURE:
            case DESCRIBE_FEATURETYPE:
            case GET_FEATURE_WITH_LOCK:
                parameterName = "outputFormat";
                break;
            case TRANSACTION:
                parameterName = "inputFormat";
                break;
            case LIST_STORED_QUERIES:
            case DESCRIBE_STORED_QUERIES:
                // These return XML as specified in WFS 2.0.0
                return Collections.singleton("text/xml");
            default:
                throw new UnsupportedOperationException("not yet implemented for " + operation);
        }

        final OperationType operationMetadata = getOperationMetadata(operation);

        Set<String> serverSupportedFormats;
        serverSupportedFormats = findParameters(operationMetadata, parameterName);
        return serverSupportedFormats;
    }

