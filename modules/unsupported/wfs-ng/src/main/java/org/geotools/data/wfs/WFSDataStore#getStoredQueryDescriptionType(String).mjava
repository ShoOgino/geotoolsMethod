    public StoredQueryDescriptionType getStoredQueryDescriptionType(String storedQueryId)
            throws IOException {

        StoredQueryDescriptionType desc = null;

        storedQueryDescriptionTypesLock.readLock().lock();
        desc = storedQueryDescriptionTypes.get(storedQueryId);
        storedQueryDescriptionTypesLock.readLock().unlock();

        if (desc == null) {
            storedQueryDescriptionTypesLock.writeLock().lock();

            // Make sure another thread has not retrieved this information while waiting for locks
            desc = storedQueryDescriptionTypes.get(storedQueryId);

            try {
                // If desc is still null, retrieve it
                if (desc == null) {
                    DescribeStoredQueriesRequest request =
                            client.createDescribeStoredQueriesRequest();

                    URI id;
                    try {
                        id = new URI(storedQueryId);
                    } catch (URISyntaxException use) {
                        throw new IOException(use);
                    }

                    request.getStoredQueryIds().add(id);

                    DescribeStoredQueriesResponse response = client.issueRequest(request);

                    desc = response.getStoredQueryDescriptions().get(0);
                    storedQueryDescriptionTypes.put(storedQueryId, desc);
                }
            } finally {
                storedQueryDescriptionTypesLock.writeLock().unlock();
            }
        }
        return desc;
    }

