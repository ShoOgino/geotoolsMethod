    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null) return false;
        // compare objs based on their type
        if (position instanceof DirectPosition || position instanceof DirectPositionImpl) {
            DirectPositionImpl dp = (DirectPositionImpl) position;
            return dp.equals(obj);
        } else if (position instanceof Point || position instanceof PointImpl) {
            PointImpl point = (PointImpl) position;
            return point.equals(obj);
        } else {
            return position.equals(obj);
        }
    }

