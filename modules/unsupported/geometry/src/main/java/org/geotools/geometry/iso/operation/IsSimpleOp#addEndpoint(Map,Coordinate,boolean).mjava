    /** Add an endpoint to the map, creating an entry for it if none exists */
    private void addEndpoint(Map endPoints, Coordinate p, boolean isClosed) {
        EndpointInfo eiInfo = (EndpointInfo) endPoints.get(p);
        if (eiInfo == null) {
            eiInfo = new EndpointInfo(p);
            endPoints.put(p, eiInfo);
        }
        eiInfo.addEndpoint(isClosed);
    }

