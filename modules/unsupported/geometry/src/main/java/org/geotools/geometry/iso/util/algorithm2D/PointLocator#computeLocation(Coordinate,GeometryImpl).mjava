    private void computeLocation(Coordinate p, GeometryImpl geom) {
        if (geom instanceof CurveImpl) {
            updateLocationInfo(locate(p, (CurveImpl) geom));
        } else if (geom instanceof SurfaceImpl) {
            updateLocationInfo(locate(p, (SurfaceImpl) geom));
        } else if (geom instanceof MultiPrimitiveImpl) {
            Iterator<? extends Primitive> iterator =
                    ((MultiPrimitiveImpl) geom).getElements().iterator();
            while (iterator.hasNext()) {
                PrimitiveImpl prim = ((PrimitiveImpl) iterator.next());
                updateLocationInfo(locate(p, prim));
            }
        }

        // else if (geom instanceof MultiLineString) {
        // MultiLineString ml = (MultiLineString) geom;
        // for (int i = 0; i < ml.getNumGeometries(); i++) {
        // LineString l = (LineString) ml.getGeometryN(i);
        // updateLocationInfo(locate(p, l));
        // }
        // } else if (geom instanceof MultiPolygon) {
        // MultiPolygon mpoly = (MultiPolygon) geom;
        // for (int i = 0; i < mpoly.getNumGeometries(); i++) {
        // Polygon poly = (Polygon) mpoly.getGeometryN(i);
        // updateLocationInfo(locate(p, poly));
        // }
        // } else if (geom instanceof GeometryCollection) {
        // Iterator geomi = new GeometryCollectionIterator(
        // (GeometryCollection) geom);
        // while (geomi.hasNext()) {
        // GeometryImpl g2 = (GeometryImpl) geomi.next();
        // if (g2 != geom)
        // computeLocation(p, g2);
        // }
        // }
    }

