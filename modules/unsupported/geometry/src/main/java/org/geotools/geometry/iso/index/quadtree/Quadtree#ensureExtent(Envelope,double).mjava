    /**
     * Ensure that the envelope for the inserted item has non-zero extents. Use the current
     * minExtent to pad the envelope, if necessary
     */
    public static Envelope ensureExtent(Envelope itemEnv, double minExtent) {
        // The names "ensureExtent" and "minExtent" are misleading -- sounds
        // like
        // this method ensures that the extents are greater than minExtent.
        // Perhaps we should rename them to "ensurePositiveExtent" and
        // "defaultExtent".
        // [Jon Aquino]
        double minx = itemEnv.getMinX();
        double maxx = itemEnv.getMaxX();
        double miny = itemEnv.getMinY();
        double maxy = itemEnv.getMaxY();
        // has a non-zero extent
        if (minx != maxx && miny != maxy) return itemEnv;

        // pad one or both extents
        if (minx == maxx) {
            minx = minx - minExtent / 2.0;
            maxx = minx + minExtent / 2.0;
        }
        if (miny == maxy) {
            miny = miny - minExtent / 2.0;
            maxy = miny + minExtent / 2.0;
        }
        return new Envelope(minx, maxx, miny, maxy);
    }

