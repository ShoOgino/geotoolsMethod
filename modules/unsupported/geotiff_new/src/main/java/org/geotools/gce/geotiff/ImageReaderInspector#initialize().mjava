    protected void initialize() throws IOException {

        // instantiate a stream and a reader
        ImageInputStream inputStream= null;
        ImageReader reader =null;
        try{
            inputStream= createImageInputStream();
            reader = readerSPI.createReaderInstance();
            reader.setInput(inputStream);
            
            final RasterManagerBuilder rasterManagerBuilder=getRasterManagerBuilder();
            if(rasterManagerBuilder==null){
                throw new IOException("Unable to obtain a RasterManagerBuilder");
            }
            
            // get basic information
            this.numImages= reader.getNumImages(true);
            this.minIndex=reader.getMinIndex();
            
            // now parse the stream metadata
            if(rasterManagerBuilder.isParseStreamMetadata()){
                rasterManagerBuilder.parseStreamMetadata(reader.getStreamMetadata());
            }
            
            // now start parsing metadata plus other info for each image we have
            for(int i=0; i<this.numImages; i++){
                rasterManagerBuilder.parseImage(minIndex+i,reader);
            }
            
            this.elements=rasterManagerBuilder.create();
        } finally {
            if(inputStream!=null){
                try{
                    inputStream.close();
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
            if(reader!=null){
                try{
                    reader.dispose();
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }            
        }
    }

