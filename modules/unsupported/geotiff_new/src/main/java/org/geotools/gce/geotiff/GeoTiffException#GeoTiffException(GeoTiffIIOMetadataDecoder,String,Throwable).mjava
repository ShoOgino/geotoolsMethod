	/**
	 * Constructs an instance of <code>GeoTiffException</code> with the
	 * specified detail message.
	 * 
	 * @param metadata
	 *            The metadata from the GeoTIFFWritingUtilities image causing
	 *            the error.
	 * @param msg
	 *            the detail message.
	 */
	public GeoTiffException(GeoTiffIIOMetadataDecoder metadata, String msg,
			Throwable t) {
		super(msg);
		this.metadata = metadata;
		if (t != null)
			this.initCause(t);

		if (metadata != null) {
			final int numGeoKeys = metadata.getNumGeoKeys();
			if (numGeoKeys > 0) {
				geoKeys = new GeoKeyEntry[numGeoKeys];
				for (int i = 0; i < numGeoKeys; i++) {
					geoKeys[i] = metadata.getGeoKeyRecordByIndex(i);
				}
			}
		}
	}

