        /**
         * Evalute this function for a given feature and return a
         * Color.
         *
         * @param object the feature for which a colour is being requested
         *
         * @return the colour for this feature
         */
        @Override
        public Object evaluate(Object feature) {
            if (lookup == null) {
                createLookup();
            }

            Object key = ((Expression)params.get(0)).evaluate(feature);
            Color color = lookup.get(key);
            if (color == null) {
                color = addColor(key);
            }

            return color;
        }

