    /**
     * Creates a style that includes labels formed from two feature
     * attributes selected by the user, then displays the shapefile using
     * this style.
     */
    private void displayShapefile(File file) throws Exception {
        FileDataStore store = FileDataStoreFinder.getDataStore(file);
        FeatureSource featureSource = store.getFeatureSource();

        Style style = createLabelStyle(featureSource);
        if (style != null) {
            MapContext map = new DefaultMapContext();
            map.setTitle("Compound feature labels");
            map.addLayer(featureSource, style);

            JMapFrame.showMap(map);
        }
    }

